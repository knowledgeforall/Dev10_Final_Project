// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/identity/IdentityManagerBase":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/Evented ../core/events ../core/lang ../core/object ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./IdentityForm ./IdentityModal ./OAuthCredential ./OAuthInfo ./ServerInfo".split(" "),function(A,w,t,
p,u,I,C,W,K,X,G,B,y,R,Y,Z,L,ba,la,ka,da){const S={},ma=T=>{const U=(new y.Url(T.owningSystemUrl)).host;T=(new y.Url(T.server)).host;const r=/.+\.arcgis\.com$/i;return r.test(U)&&r.test(T)},ea=(T,U)=>!!(ma(T)&&U&&U.some(r=>r.test(T.server)));let fa=null,ha=null;try{fa=window.localStorage,ha=window.sessionStorage}catch{}Y=function(T){function U(){var a=T.call(this)||this;a._portalConfig=globalThis.esriGeowConfig;a.serverInfos=[];a.oAuthInfos=[];a.credentials=[];a._soReqs=[];a._xoReqs=[];a._portals=
[];a.defaultOAuthInfo=null;a.defaultTokenValidity=60;a.dialog=null;a.formConstructor=L;a.tokenValidity=null;a.normalizeWebTierAuth=!1;a._appOrigin="null"!==window.origin?window.origin:window.location.origin;a._appUrlObj=y.urlToObject(window.location.href);a._busy=null;a._rejectOnPersistedPageShow=!1;a._oAuthLocationParams=null;a._gwTokenUrl="/sharing/rest/generateToken";a._agsRest="/rest/services";a._agsPortal=/\/sharing(\/|$)/i;a._agsAdmin=/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i;a._adminSvcs=
/\/rest\/admin\/services(\/|$)/i;a._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},
{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}];a._legacyFed=[];a._regexSDirUrl=/http.+\/rest\/services\/?/gi;a._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi;
a._gwUser=/http.+\/users\/([^\/]+)\/?.*/i;a._gwItem=/http.+\/items\/([^\/]+)\/?.*/i;a._gwGroup=/http.+\/groups\/([^\/]+)\/?.*/i;a._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i;a._createDefaultOAuthInfo=!0;a._hasTestedIfAppIsOnPortal=!1;a._getOAuthLocationParams();window.addEventListener("pageshow",b=>{a._pageShowHandler(b)});return a}w._inheritsLoose(U,T);var r=U.prototype;r.registerServers=function(a){const b=this.serverInfos;b?(a=a.filter(c=>!this.findServerInfo(c.server)),this.serverInfos=
b.concat(a)):this.serverInfos=a;a.forEach(c=>{c.owningSystemUrl&&this._portals.push(c.owningSystemUrl);c.hasPortal&&this._portals.push(c.server)})};r.registerOAuthInfos=function(a){const b=this.oAuthInfos;if(b){for(const c of a){const d=this.findOAuthInfo(c.portalUrl);d&&b.splice(b.indexOf(d),1)}this.oAuthInfos=b.concat(a)}else this.oAuthInfos=a};r.registerToken=function(a){a={...a};const b=this._sanitizeUrl(a.server),c=this._isServerRsrc(b);let d=this.findServerInfo(b),g=!0,l;d||(d=new da,d.server=
this._getServerInstanceRoot(b),c?d.hasServer=!0:(d.tokenServiceUrl=this._getTokenSvcUrl(b),d.hasPortal=!0),this.registerServers([d]));(l=this._findCredential(b))?(delete a.server,Object.assign(l,a),g=!1):(l=new A.Credential({userId:a.userId,server:d.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:c?"server":"portal"}),l.resources=[b],this.credentials.push(l));l.emitTokenChange(!1);g||l.refreshServerTokens()};r.toJSON=function(){return X.fixJson({serverInfos:this.serverInfos.map(a=>a.toJSON()),
oAuthInfos:this.oAuthInfos.map(a=>a.toJSON()),credentials:this.credentials.map(a=>a.toJSON())})};r.initialize=function(a){if(a){"string"===typeof a&&(a=JSON.parse(a));var b=a.serverInfos,c=a.oAuthInfos;a=a.credentials;if(b){const d=[];b.forEach(g=>{g.server&&g.tokenServiceUrl&&d.push(g.declaredClass?g:new da(g))});d.length&&this.registerServers(d)}if(c){const d=[];c.forEach(g=>{g.appId&&d.push(g.declaredClass?g:new ka(g))});d.length&&this.registerOAuthInfos(d)}a&&a.forEach(d=>{d.server&&d.token&&
d.expires&&d.expires>Date.now()&&(d=d.declaredClass?d:new A.Credential(d),d.emitTokenChange(),this.credentials.push(d))})}};r.findServerInfo=function(a){let b;a=this._sanitizeUrl(a);for(const c of this.serverInfos)if(this._hasSameServerInstance(c.server,a)){b=c;break}return b};r.findOAuthInfo=function(a){let b;a=this._sanitizeUrl(a);for(const c of this.oAuthInfos)if(this._hasSameServerInstance(c.portalUrl,a)){b=c;break}return b};r.findCredential=function(a,b){let c;a=this._sanitizeUrl(a);const d=
this._isServerRsrc(a)?"server":"portal";if(b)for(const g of this.credentials){if(this._hasSameServerInstance(g.server,a)&&b===g.userId&&g.scope===d){c=g;break}}else for(const g of this.credentials)if(this._hasSameServerInstance(g.server,a)&&-1!==this._getIdenticalSvcIdx(a,g)&&g.scope===d){c=g;break}return c};r.getCredential=function(a,b){let c=!0;if(b){var d=!!b.token;var g=b.error;c=!1!==b.prompt}b={...b};a=this._sanitizeUrl(a);const l=new AbortController,f=B.createResolver();if(b.signal)B.onAbort(b.signal,
()=>{l.abort()});B.onAbort(l,()=>{f.reject(new C("identity-manager:user-aborted","ABORTED"))});if(B.isAborted(l))return f.promise;b.signal=l.signal;const h=this._isAdminResource(a);if((d=d?this.findCredential(a):null)&&g&&g.details&&498===g.details.httpStatus)d.destroy();else if(d)return a=new C("identity-manager:not-authorized","You are currently signed in as: '"+d.userId+"'. You do not have access to this resource: "+a,{error:g}),f.reject(a),f.promise;if(g=this._findCredential(a,b))return f.resolve(g),
f.promise;let e=this.findServerInfo(a);if(e)!e.hasServer&&this._isServerRsrc(a)&&(e._restInfoPms=this._getTokenSvcUrl(a),e.hasServer=!0);else{g=this._getTokenSvcUrl(a);if(!g)return a=new C("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),f.reject(a),f.promise;e=new da;e.server=this._getServerInstanceRoot(a);"string"===typeof g?(e.tokenServiceUrl=g,e.hasPortal=!0):(e._restInfoPms=g,e.hasServer=!0);this.registerServers([e])}e.hasPortal&&void 0===e._selfReq&&
(c||y.hasSameOrigin(e.tokenServiceUrl,this._appOrigin)||this._gwDomains.some(k=>k.tokenServiceUrl===e.tokenServiceUrl))&&(e._selfReq={owningTenant:b&&b.owningTenant,selfDfd:this._getPortalSelf(e.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),a)});return this._enqueue(a,e,b,f,h)};r.getResourceName=function(a){return this._isRESTService(a)?a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&
a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""};r.generateToken=function(a,b,c){const d=this._rePortalTokenSvc.test(a.tokenServiceUrl),g=new y.Url(this._appOrigin);var l=a.shortLivedTokenValidity;let f,h,e,k,q,m,D;b&&(D=this.tokenValidity||l||this.defaultTokenValidity,D>l&&0<l&&(D=l));c&&(f=c.isAdmin,h=c.serverUrl,e=c.token,q=c.signal,m=c.ssl,a.customParameters=c.customParameters);f?l=a.adminTokenServiceUrl:(l=a.tokenServiceUrl,k=new y.Url(l.toLowerCase()),
a.webTierAuth&&null!=c&&c.serverUrl&&!m&&"http"===g.scheme&&(y.hasSameOrigin(g.uri,l,!0)||"https"===k.scheme&&g.host===k.host&&"7080"===g.port&&"7443"===k.port)&&(l=l.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));c={query:{request:"getToken",username:null==b?void 0:b.username,password:null==b?void 0:b.password,serverUrl:h,token:e,expiration:D,referer:f||d?this._appOrigin:null,client:f?"referer":null,f:"json",...a.customParameters},method:"post",authMode:"anonymous",useProxy:this._useProxy(a,
c),signal:q,...null==c?void 0:c.ioArgs};d||(c.withCredentials=!1);return I(l,c).then(z=>{z=z.data;if(!z||!z.token)return new C("identity-manager:authentication-failed","Unable to generate token");const v=a.server;S[v]||(S[v]={});b&&(S[v][b.username]=b.password);z.validity=D;return z})};r.isBusy=function(){return!!this._busy};r.checkSignInStatus=function(a){return this.checkAppAccess(a,"").then(b=>b.credential)};r.checkAppAccess=function(a,b,c){let d=!1;return this.getCredential(a,{prompt:!1}).then(g=>
{let l;const f={f:"json"};if("portal"===g.scope)if(b&&(this._doPortalSignIn(a)||c&&c.force))l=g.server+"/sharing/rest/oauth2/validateAppAccess",f.client_id=b;else if(g.token)l=g.server+"/sharing/rest";else return{credential:g};else if(g.token)l=g.server+"/rest/services";else return{credential:g};g.token&&(f.token=g.token);return I(l,{query:f,authMode:"anonymous"}).then(h=>{if(!1===h.data.valid)throw new C("identity-manager:not-authorized",`You are currently signed in as: '${g.userId}'.`,h.data);d=
!!h.data.viewOnlyUserTypeApp;return{credential:g}}).catch(h=>{if("identity-manager:not-authorized"===h.name)throw h;h=h.details&&h.details.httpStatus;if(498===h)throw g.destroy(),new C("identity-manager:not-authenticated","User is not signed in.");if(400===h)throw new C("identity-manager:invalid-request");return{credential:g}})}).then(g=>({credential:g.credential,viewOnly:d}))};r.setOAuthResponseHash=function(a){a&&("#"===a.charAt(0)&&(a=a.substring(1)),this._processOAuthPopupParams(y.queryToObject(a)))};
r.setOAuthRedirectionHandler=function(a){this._oAuthRedirectFunc=a};r.setProtocolErrorHandler=function(a){this._protocolFunc=a};r.signIn=function(a,b,c={}){const d=B.createResolver(),g=()=>{var q,m,D,z,v;null==(q=h)?void 0:q.remove();null==(m=e)?void 0:m.remove();null==(D=k)?void 0:D.remove();null==(z=f)?void 0:z.destroy();null==(v=this.dialog)?void 0:v.destroy();this.dialog=f=h=e=k=null},l=()=>{g();this._oAuthDfd=null;d.reject(new C("identity-manager:user-aborted","ABORTED"))};if(c.signal)B.onAbort(c.signal,
()=>{l()});let f=new this.formConstructor;f.resource=this.getResourceName(a);f.server=b.server;this.dialog=new ba;this.dialog.content=f;this.dialog.open=!0;this.emit("dialog-create");let h=f.on("cancel",l),e=this.dialog.watch("open",l),k=f.on("submit",q=>{this.generateToken(b,q,{isAdmin:c.isAdmin,signal:c.signal}).then(m=>{g();m=new A.Credential({userId:q.username,server:b.server,token:m.token,expires:null!=m.expires?Number(m.expires):null,ssl:!!m.ssl,isAdmin:c.isAdmin,validity:m.validity});d.resolve(m)}).catch(m=>
{f.error=m;f.signingIn=!1})});return d.promise};r.oAuthSignIn=function(a,b,c,d){const g=this._oAuthDfd=B.createResolver();if(null!=d&&d.signal)B.onAbort(d.signal,()=>{const z=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;z&&!z.closed?z.close():this.dialog&&m()});g.resUrl_=a;g.sinfo_=b;g.oinfo_=c;let l;const f=c._oAuthCred;if(f.storage&&("authorization-code"===c.flowType||"auto"===c.flowType&&!c.popup&&8.4<=b.currentVersion)){let z=crypto.getRandomValues(new Uint8Array(32));l=y.base64UrlEncode(z);f.codeVerifier=
l;z=crypto.getRandomValues(new Uint8Array(32));f.stateUID=y.base64UrlEncode(z);f.save()||(f.codeVerifier=l=null)}else f.codeVerifier=null;this._getCodeChallenge(l).then(z=>{const v=!d||!1!==d.oAuthPopupConfirmation;c.popup&&v?(h=new this.formConstructor,h.oAuthPrompt=!0,h.server=b.server,this.dialog=new ba,this.dialog.content=h,this.dialog.open=!0,this.emit("dialog-create"),e=h.on("cancel",m),k=this.dialog.watch("open",m),q=h.on("submit",()=>{D();this._doOAuthSignIn(a,b,c,z)})):this._doOAuthSignIn(a,
b,c,z)});let h,e,k,q;const m=()=>{D();this._oAuthDfd=null;g.reject(new C("identity-manager:user-aborted","ABORTED"))},D=()=>{var z,v,E,O,M;null==(z=e)?void 0:z.remove();null==(v=k)?void 0:v.remove();null==(E=q)?void 0:E.remove();null==(O=h)?void 0:O.destroy();null==(M=this.dialog)?void 0:M.destroy();this.dialog=null};return g.promise};r.destroyCredentials=function(){this.credentials&&this.credentials.slice().forEach(a=>{a.destroy()});this.emit("credentials-destroy")};r.enablePostMessageAuth=function(a=
"https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=K.on(window,"message",b=>{var c;if((b.origin===this._appOrigin||b.origin.endsWith(".arcgis.com"))&&"arcgis:auth:requestCredential"===(null==(c=b.data)?void 0:c.type)){const d=b.source;this.getCredential(a).then(g=>{d.postMessage({type:"arcgis:auth:credential",credential:{expires:g.expires,server:g.server,ssl:g.ssl,token:g.token,userId:g.userId}},b.origin)}).catch(g=>
{d.postMessage({type:"arcgis:auth:error",error:{name:g.name,message:g.message}},b.origin)})}})};r.disablePostMessageAuth=function(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)};r._getOAuthLocationParams=function(){var a=window.location.hash;if(a){"#"===a.charAt(0)&&(a=a.substring(1));a=y.queryToObject(a);let d=!1;if(a.access_token&&a.expires_in&&a.state&&a.hasOwnProperty("username"))try{a.state=JSON.parse(a.state),a.state.portalUrl&&(this._oAuthLocationParams=
a,d=!0)}catch{}else if(a.error&&a.error_description&&(console.log("IdentityManager OAuth Error: ",a.error," - ",a.error_description),"access_denied"===a.error&&(d=!0,a.state)))try{a.state=JSON.parse(a.state)}catch{}if(d){var b;window.location.hash=(null==(b=a.state)?void 0:b.hash)||""}}if(b=window.location.search){"?"===b.charAt(0)&&(b=b.substring(1));b=y.queryToObject(b);a=!1;if(b.code&&b.state)try{b.state=JSON.parse(b.state),b.state.portalUrl&&b.state.uid&&(this._oAuthLocationParams=b,a=!0)}catch{}else if(b.error&&
b.error_description&&(console.log("IdentityManager OAuth Error: ",b.error," - ",b.error_description),"access_denied"===b.error&&(a=!0,b.state)))try{b.state=JSON.parse(b.state)}catch{}if(a){var c;const d={...b};"code error error_description message_code persist state".split(" ").forEach(g=>{delete d[g]});a=y.objectToQuery(d);b=window.location.pathname+(a?`?${a}`:"")+((null==(c=b.state)?void 0:c.hash)||"");window.history.replaceState(window.history.state,"",b)}}};r._getOAuthToken=function(a,b,c,d,g){a=
a.replace(/^http:/i,"https:");return I(`${a}/sharing/rest/oauth2/token`,{authMode:"anonymous",method:"post",query:d&&g?{grant_type:"authorization_code",code:b,redirect_uri:d,client_id:c,code_verifier:g}:{grant_type:"refresh_token",refresh_token:b,client_id:c}}).then(l=>l.data)};r._getCodeChallenge=function(a){return a&&globalThis.isSecureContext?(a=(new TextEncoder).encode(a),crypto.subtle.digest("SHA-256",a).then(b=>y.base64UrlEncode(new Uint8Array(b)))):Promise.resolve(null)};r._pageShowHandler=
function(a){a.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(a=new C("identity-manager:user-aborted","ABORTED"),this._errbackFunc(a))};r._findCredential=function(a,b){let c=-1,d,g,l;const f=b&&b.token;b=b&&b.resource;const h=this._isServerRsrc(a)?"server":"portal",e=this.credentials.filter(k=>this._hasSameServerInstance(k.server,a)&&k.scope===h);a=b||a;if(e.length)if(1===e.length)if(b=e[0],g=(d=(l=this.findServerInfo(b.server))&&l.owningSystemUrl)&&this.findCredential(d,b.userId),c=this._getIdenticalSvcIdx(a,
b),f)-1!==c&&(b.resources.splice(c,1),this._removeResource(a,g));else return-1===c&&b.resources.push(a),this._addResource(a,g),b;else{let k,q;e.some(m=>{q=this._getIdenticalSvcIdx(a,m);return-1!==q?(k=m,g=(d=(l=this.findServerInfo(k.server))&&l.owningSystemUrl)&&this.findCredential(d,k.userId),c=q,!0):!1});if(f)k&&(k.resources.splice(c,1),this._removeResource(a,g));else if(k)return this._addResource(a,g),k}};r._findOAuthInfo=function(a){let b=this.findOAuthInfo(a);if(!b)for(const c of this.oAuthInfos)if(this._isIdProvider(c.portalUrl,
a)){b=c;break}return b};r._addResource=function(a,b){b&&-1===this._getIdenticalSvcIdx(a,b)&&b.resources.push(a)};r._removeResource=function(a,b){let c=-1;b&&(c=this._getIdenticalSvcIdx(a,b),-1<c&&b.resources.splice(c,1))};r._useProxy=function(a,b){return b&&b.isAdmin&&!y.hasSameOrigin(a.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(a.tokenServiceUrl)&&"10.1"===String(a.currentVersion)&&!y.hasSameOrigin(a.tokenServiceUrl,this._appOrigin)};r._getOrigin=function(a){a=new y.Url(a);return a.scheme+
"://"+a.host+(null!=a.port?":"+a.port:"")};r._getServerInstanceRoot=function(a){const b=a.toLowerCase();let c=b.indexOf(this._agsRest);-1===c&&this._isAdminResource(a)&&(c=this._agsAdmin.test(a)?a.replace(this._agsAdmin,"$1").length:a.search(this._adminSvcs));-1===c&&(c=b.indexOf("/sharing"));-1===c&&"/"===b.substr(-1)&&(c=b.length-1);return-1<c?a.substring(0,c):a};r._hasSameServerInstance=function(a,b){"/"===a.substr(-1)&&(a=a.slice(0,-1));a=a.toLowerCase();b=this._getServerInstanceRoot(b).toLowerCase();
a=this._normalizeAGOLorgDomain(a);b=this._normalizeAGOLorgDomain(b);a=a.substr(a.indexOf(":"));b=b.substr(b.indexOf(":"));return a===b};r._normalizeAGOLorgDomain=function(a){const b=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,c=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,d=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;b.test(a)?a=a.replace(b,"https://www.arcgis.com"):c.test(a)?a=a.replace(c,"https://devext.arcgis.com"):d.test(a)&&(a=a.replace(d,"https://qaext.arcgis.com"));
return a};r._sanitizeUrl=function(a){const b=(p.request.proxyUrl||"").toLowerCase(),c=b?a.toLowerCase().indexOf(b+"?"):-1;-1!==c&&(a=a.substring(c+b.length+1));a=y.normalize(a);return y.urlToObject(a).path};r._isRESTService=function(a){return-1<a.indexOf(this._agsRest)};r._isAdminResource=function(a){return this._agsAdmin.test(a)||this._adminSvcs.test(a)};r._isServerRsrc=function(a){return this._isRESTService(a)||this._isAdminResource(a)};r._isIdenticalService=function(a,b){if(this._isRESTService(a)&&
this._isRESTService(b)){a=this._getSuffix(a).toLowerCase();b=this._getSuffix(b).toLowerCase();var c=a===b;c||(c=/(.*)\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi,c=a.replace(c,"$1")===b.replace(c,"$1"))}else this._isAdminResource(a)&&this._isAdminResource(b)?c=!0:this._isServerRsrc(a)||this._isServerRsrc(b)||!this._isPortalDomain(a)||(c=!0);return c};r._isPortalDomain=function(a){const b=new y.Url(a.toLowerCase());a=this._portalConfig;let c=this._gwDomains.some(d=>d.regex.test(b.uri));!c&&
a&&(c=this._hasSameServerInstance(this._getServerInstanceRoot(a.restBaseUrl),b.uri));c||p.portalUrl&&(c=y.hasSameOrigin(b,p.portalUrl,!0));c||(c=this._portals.some(d=>this._hasSameServerInstance(d,b.uri)));return c=c||this._agsPortal.test(b.path)};r._isIdProvider=function(a,b){let c=-1,d=-1;this._gwDomains.forEach((l,f)=>{-1===c&&l.regex.test(a)&&(c=f);-1===d&&l.regex.test(b)&&(d=f)});let g=!1;if(-1<c&&-1<d)if(0===c||4===c){if(0===d||4===d)g=!0}else if(1===c){if(1===d||2===d)g=!0}else 2===c?2===d&&
(g=!0):3===c&&3===d&&(g=!0);if(!g){const l=this.findServerInfo(b),f=l&&l.owningSystemUrl;f&&ma(l)&&this._isPortalDomain(f)&&this._isIdProvider(a,f)&&(g=!0)}return g};r._getIdenticalSvcIdx=function(a,b){let c=-1;for(let d=0;d<b.resources.length;d++)if(this._isIdenticalService(a,b.resources[d])){c=d;break}return c};r._getSuffix=function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")};r._getTokenSvcUrl=function(a){if(this._isRESTService(a)||this._isAdminResource(a)){var b=
this._getServerInstanceRoot(a);var c=b+"/admin/generateToken";a=b+"/rest/info";b=I(a,{query:{f:"json"}}).then(d=>d.data);return{adminUrl:c,promise:b}}if(this._isPortalDomain(a)){let d="";this._gwDomains.some(g=>{g.regex.test(a)&&(d=g.tokenServiceUrl);return!!d});d||this._portals.some(g=>{this._hasSameServerInstance(g,a)&&(d=g+this._gwTokenUrl);return!!d});d||(c=a.toLowerCase().indexOf("/sharing"),-1!==c&&(d=a.substring(0,c)+this._gwTokenUrl));d||(d=this._getOrigin(a)+this._gwTokenUrl);d&&(c=(new y.Url(a)).port,
/^http:\/\//i.test(a)&&"7080"===c&&(d=d.replace(/:7080/i,":7443")),d=d.replace(/http:/i,"https:"));return d}if(-1!==a.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"};r._processOAuthResponseParams=function(a,b,c){const d=b._oAuthCred;if(a.code){var g=d.codeVerifier;d.codeVerifier=null;d.stateUID=null;d.save();return this._getOAuthToken(c.server,a.code,b.appId,this._getRedirectURI(b,!0),g).then(l=>{const f=new A.Credential({userId:l.username,
server:c.server,token:l.access_token,expires:Date.now()+1E3*l.expires_in,ssl:l.ssl,oAuthState:a.state,_oAuthCred:d});b.userId=f.userId;d.storage=l.persist?fa:ha;d.refreshToken=l.refresh_token;d.token=null;d.expires=l.refresh_token_expires_in?Date.now()+1E3*l.refresh_token_expires_in:null;d.userId=f.userId;d.ssl=f.ssl;d.save();return f})}g=new A.Credential({userId:a.username,server:c.server,token:a.access_token,expires:Date.now()+1E3*Number(a.expires_in),ssl:"true"===a.ssl,oAuthState:a.state,_oAuthCred:d});
b.userId=g.userId;d.storage=a.persist?fa:ha;d.refreshToken=null;d.token=g.token;d.expires=g.expires;d.userId=g.userId;d.ssl=g.ssl;d.save();return Promise.resolve(g)};r._processOAuthPopupParams=function(a){var b;const c=this._oAuthDfd;this._oAuthDfd=null;c&&(clearInterval(this._oAuthIntervalId),null==(b=this._oAuthOnPopupHandle)?void 0:b.remove(),a.error?(b="access_denied"===a.error,a=new C(b?"identity-manager:user-aborted":"identity-manager:authentication-failed",b?"ABORTED":"OAuth: "+a.error+" - "+
a.error_description),c.reject(a)):this._processOAuthResponseParams(a,c.oinfo_,c.sinfo_).then(d=>{c.resolve(d)}).catch(d=>{c.reject(d)}))};r._setOAuthResponseQueryString=function(a){a&&("?"===a.charAt(0)&&(a=a.substring(1)),this._processOAuthPopupParams(y.queryToObject(a)))};r._exchangeToken=function(a,b,c){return I(`${a}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:b,token:c}}).then(d=>d.data.token)};r._getPlatformSelf=function(a,b){a=a.replace(/^http:/i,
"https:");return I(`${a}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":b,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json",expiration:30},withCredentials:!0}).then(c=>c.data)};r._getPortalSelf=function(a,b){let c;this._gwDomains.some(d=>{d.regex.test(a)&&(c=d.customBaseUrl);return!!c});if(c)return Promise.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:c,portalMode:"multitenant",supportsOAuth:!0});this._appOrigin.startsWith("https:")?
a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(b)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return I(a,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then(d=>d.data)};r._doPortalSignIn=function(a){const b=this._portalConfig,c=window.location.href,d=this.findServerInfo(a);return(b||this._isPortalDomain(c))&&(d?d.hasPortal||d.owningSystemUrl&&this._isPortalDomain(d.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(c,a)||b&&(this._hasSameServerInstance(this._getServerInstanceRoot(b.restBaseUrl),
a)||this._isIdProvider(b.restBaseUrl,a))||y.hasSameOrigin(c,a,!0))?!0:!1};r._checkProtocol=function(a,b,c,d){let g=!0;d=d?b.adminTokenServiceUrl:b.tokenServiceUrl;d.trim().toLowerCase().startsWith("https:")&&!this._appOrigin.startsWith("https:")&&y.getProxyRule(d)&&(g=this._protocolFunc?!!this._protocolFunc({resourceUrl:a,serverInfo:b}):!1,g||(a=new C("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection."),c(a)));return g};r._enqueue=function(a,
b,c,d,g,l){d||(d=B.createResolver());d.resUrl_=a;d.sinfo_=b;d.options_=c;d.admin_=g;d.refresh_=l;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(d)):this._xoReqs.push(d):this._doSignIn(d);return d.promise};r._doSignIn=function(a){this._busy=a;this._rejectOnPersistedPageShow=!1;const b=e=>{var k=a.options_&&a.options_.resource;const q=a.resUrl_,m=a.refresh_;let D=
!1;-1===this.credentials.indexOf(e)&&(m&&-1!==this.credentials.indexOf(m)?(m.userId=e.userId,m.token=e.token,m.expires=e.expires,m.validity=e.validity,m.ssl=e.ssl,m.creationTime=e.creationTime,D=!0,e=m):this.credentials.push(e));e.resources||(e.resources=[]);e.resources.includes(k||q)||e.resources.push(k||q);e.scope=this._isServerRsrc(q)?"server":"portal";e.emitTokenChange();k=this._soReqs;const z={};this._soReqs=[];k.forEach(v=>{if(!this._isIdenticalService(q,v.resUrl_)){const E=this._getSuffix(v.resUrl_);
z[E]||(z[E]=!0,e.resources.push(v.resUrl_))}});a.resolve(e);k.forEach(v=>{this._hasSameServerInstance(this._getServerInstanceRoot(q),v.resUrl_)?v.resolve(e):this._soReqs.push(v)});this._busy=a.resUrl_=a.sinfo_=a.refresh_=null;D||this.emit("credential-create",{credential:e});this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},c=e=>{a.reject(e);this._busy=a.resUrl_=a.sinfo_=a.refresh_=null;this._soReqs.length?this._doSignIn(this._soReqs.shift()):
this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},d=(e,k,q,m)=>{var D,z;const v=a.sinfo_,E=!a.options_||!1!==a.options_.prompt,O=v.hasPortal&&this._findOAuthInfo(a.resUrl_);let M,aa;if(e)b(new A.Credential({userId:e,server:v.server,token:q||null,expires:null!=m?Number(m):null,ssl:!!k}));else if(window!==window.parent&&null!=(D=this._appUrlObj.query)&&D["arcgis-auth-origin"]&&null!=(z=this._appUrlObj.query)&&z["arcgis-auth-portal"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),
a.resUrl_)){var ia;window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const F=K.on(window,"message",J=>{J.source===window.parent&&J.data&&("arcgis:auth:credential"===J.data.type?(F.remove(),J.data.credential.expires<Date.now()?c(new C("identity-manager:credential-request-failed","Parent application's token has expired.")):b(new A.Credential(J.data.credential))):"arcgis:auth:error"===J.data.type&&(F.remove(),"tokenExpiredError"===J.data.error.name?
c(new C("identity-manager:credential-request-failed","Parent application's token has expired.")):c(C.fromJSON(J.data.error))))});B.onAbort(null==(ia=a.options_)?void 0:ia.signal,()=>{F.remove()})}else if(O){let F=O._oAuthCred;F||(e=new la(O,fa),k=new la(O,ha),e.isValid()&&k.isValid()?e.expires>k.expires?(F=e,k.destroy()):(F=k,e.destroy()):F=e.isValid()?e:k,O._oAuthCred=F);if(F.isValid()){M=new A.Credential({userId:F.userId,server:v.server,token:F.token,expires:F.expires,ssl:F.ssl,_oAuthCred:F});const J=
O.appId!==F.appId&&this._doPortalSignIn(a.resUrl_);J||F.refreshToken?(a._pendingDfd=F.refreshToken?this._getOAuthToken(v.server,F.refreshToken,F.appId).then(N=>{M.expires=Date.now()+1E3*N.expires_in;M.token=N.access_token;return M}):Promise.resolve(M),a._pendingDfd.then(N=>J?this._exchangeToken(N.server,O.appId,N.token).then(oa=>{N.token=oa;return N}).catch(()=>N):N).then(N=>{b(N)}).catch(()=>{F.destroy();d()})):b(M)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(O.portalUrl,this._oAuthLocationParams.state.portalUrl)&&
(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===F.stateUID&&F.codeVerifier))e=this._oAuthLocationParams,this._oAuthLocationParams=null,a._pendingDfd=this._processOAuthResponseParams(e,O,v).then(J=>{b(J)}).catch(c);else{const J=()=>{E?a._pendingDfd=this.oAuthSignIn(a.resUrl_,v,O,a.options_).then(b,c):(aa=new C("identity-manager:not-authenticated","User is not signed in."),c(aa))};this._doPortalSignIn(a.resUrl_)?a._pendingDfd=this._getPlatformSelf(v.server,
O.appId).then(N=>{y.hasSameOrigin(N.portalUrl,this._appOrigin,!0)?(M=new A.Credential({userId:N.username,server:v.server,expires:Date.now()+1E3*N.expires_in,token:N.token}),b(M)):J()}).catch(J):J()}}else E?this._checkProtocol(a.resUrl_,v,c,a.admin_)&&(e=a.options_,a.admin_&&(e=e||{},e.isAdmin=!0),a._pendingDfd=this.signIn(a.resUrl_,v,e).then(b,c)):(aa=new C("identity-manager:not-authenticated","User is not signed in."),c(aa))},g=()=>{const e=a.sinfo_;var k=e.owningSystemUrl;const q=a.options_;let m,
D,z,v;q&&(m=q.token,D=q.error,z=q.prompt);v=this._findCredential(k,{token:m,resource:a.resUrl_});if(!v)for(const E of this.credentials)if(this._isIdProvider(k,E.server)){v=E;break}v?(k=this.findCredential(a.resUrl_,v.userId))?b(k):ea(e,this._legacyFed)?(k=v.toJSON(),k.server=e.server,k.resources=null,b(new A.Credential(k))):(a._pendingDfd=this.generateToken(this.findServerInfo(v.server),null,{serverUrl:a.resUrl_,token:v.token,signal:a.options_.signal,ssl:v.ssl})).then(E=>{b(new A.Credential({userId:v.userId,
server:e.server,token:E.token,expires:null!=E.expires?Number(E.expires):null,ssl:!!E.ssl,isAdmin:a.admin_,validity:E.validity}))},c):(this._busy=null,m&&(a.options_.token=null),(a._pendingDfd=this.getCredential(k.replace(/\/?$/,"/sharing"),{resource:a.resUrl_,owningTenant:e.owningTenant,signal:a.options_.signal,token:m,error:D,prompt:z})).then(()=>{this._enqueue(a.resUrl_,a.sinfo_,a.options_,a,a.admin_)},E=>{a.resUrl_=a.sinfo_=a.refresh_=null;a.reject(E)}))};this._errbackFunc=c;const l=a.sinfo_.owningSystemUrl,
f=this._isServerRsrc(a.resUrl_),h=a.sinfo_._restInfoPms;h?h.promise.then(e=>{const k=a.sinfo_;k._restInfoPms&&(k.adminTokenServiceUrl=k._restInfoPms.adminUrl,k._restInfoPms=null,k.tokenServiceUrl=G.getDeepValue("authInfo.tokenServicesUrl",e)||G.getDeepValue("authInfo.tokenServiceUrl",e)||G.getDeepValue("tokenServiceUrl",e),k.shortLivedTokenValidity=G.getDeepValue("authInfo.shortLivedTokenValidity",e),k.currentVersion=e.currentVersion,k.owningTenant=e.owningTenant,(e=k.owningSystemUrl=e.owningSystemUrl)&&
this._portals.push(e));f&&k.owningSystemUrl?g():d()},()=>{a.sinfo_._restInfoPms=null;const e=new C("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");c(e)}):f&&l?g():a.sinfo_._selfReq?a.sinfo_._selfReq.selfDfd.then(e=>{const k={};let q,m,D,z;e&&(q=e.user&&e.user.username,k.username=q,k.allSSL=e.allSSL,m=e.supportsOAuth,D=parseFloat(e.currentVersion),"multitenant"===e.portalMode&&(z=e.customBaseUrl),a.sinfo_.currentVersion=D);a.sinfo_.webTierAuth=
!!q;return q&&this.normalizeWebTierAuth?this.generateToken(a.sinfo_,null,{ssl:k.allSSL}).catch(()=>null).then(v=>{k.portalToken=v&&v.token;k.tokenExpiration=v&&v.expires;return k}):!q&&m&&4.4<=D&&!this._findOAuthInfo(a.resUrl_)?this._generateOAuthInfo({portalUrl:a.sinfo_.server,customBaseUrl:z,owningTenant:a.sinfo_._selfReq.owningTenant}).catch(()=>null).then(()=>k):k}).catch(()=>null).then(e=>{a.sinfo_._selfReq=null;e?d(e.username,e.allSSL,e.portalToken,e.tokenExpiration):d()}):d()};r._generateOAuthInfo=
function(a){let b,c=a.portalUrl;const d=a.customBaseUrl,g=a.owningTenant;if(a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){b=window.location.href;let l=b.indexOf("?");-1<l&&(b=b.slice(0,l));l=b.search(/\/(apps|home)\//);b=-1<l?b.slice(0,l):null}a&&b?(this._hasTestedIfAppIsOnPortal=!0,a=I(b+"/sharing/rest",{query:{f:"json"}}).then(()=>{this.defaultOAuthInfo=new ka({appId:"arcgisonline",popupCallbackUrl:b+"/home/oauth-callback.html"})})):a=Promise.resolve();
return a.then(()=>{if(this.defaultOAuthInfo)return c=c.replace(/^http:/i,"https:"),I(c+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:g,client_id:this.defaultOAuthInfo.appId,redirect_uri:y.makeAbsolute(this.defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then(l=>{if(l.data.valid){const f=this.defaultOAuthInfo.clone();f.portalUrl=l.data.urlKey&&d?"https://"+l.data.urlKey.toLowerCase()+"."+d:c;f.popup=window!==window.top||!(y.hasSameOrigin(c,this._appOrigin)||this._gwDomains.some(h=>h.regex.test(c)&&
h.regex.test(this._appOrigin)));this.oAuthInfos.push(f)}})})};r._doOAuthSignIn=function(a,b,c,d){var g=c._oAuthCred,l={portalUrl:c.portalUrl};!c.popup&&c.preserveUrlHash&&window.location.hash&&(l.hash=window.location.hash);g.stateUID&&(l.uid=g.stateUID);l={client_id:c.appId,response_type:g.codeVerifier?"code":"token",state:JSON.stringify(l),expiration:c.expiration,locale:c.locale,redirect_uri:this._getRedirectURI(c,!!g.codeVerifier)};c.forceLogin&&(l.force_login=!0);c.forceUserId&&c.userId&&(l.prepopulatedusername=
c.userId);!c.popup&&this._doPortalSignIn(a)&&(l.redirectToUserOrgUrl=!0);g.codeVerifier&&(l.code_challenge=d||g.codeVerifier,l.code_challenge_method=d?"S256":"plain");d=c.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize";g=d+"?"+y.objectToQuery(l);if(c.popup){const f=window.open(g,"esriJSAPIOAuth",c.popupWindowFeatures);f?(f.focus(),this._oAuthDfd.oAuthWin_=f,this._oAuthIntervalId=setInterval(()=>{if(f.closed){clearInterval(this._oAuthIntervalId);this._oAuthOnPopupHandle.remove();
const h=this._oAuthDfd;if(h){const e=new C("identity-manager:user-aborted","ABORTED");h.reject(e)}}},500),this._oAuthOnPopupHandle=K.on(window,["arcgis:auth:hash","arcgis:auth:location:search"],h=>{"arcgis:auth:hash"===h.type?this.setOAuthResponseHash(h.detail):this._setOAuthResponseQueryString(h.detail)})):(a=new C("identity-manager:popup-blocked","ABORTED"),this._oAuthDfd.reject(a))}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:l,authorizeUrl:d,
resourceUrl:a,serverInfo:b,oAuthInfo:c}):window.location.href=g};r._getRedirectURI=function(a,b){const c=window.location.href.replace(/#.*$/,"");if(a.popup)return y.makeAbsolute(a.popupCallbackUrl);if(b){const d=y.urlToObject(c);d.query&&"code error error_description message_code persist state".split(" ").forEach(g=>{delete d.query[g]});return y.addQueryParameters(d.path,d.query)}return c};return U}(W);Y.prototype.declaredClass="esri.identity.IdentityManagerBase";A.Credential=function(T){function U(a){var b=
T.call(this,a)||this;b._oAuthCred=null;b.tokenRefreshBuffer=2;a&&a._oAuthCred&&(b._oAuthCred=a._oAuthCred);return b}w._inheritsLoose(U,T);var r=U.prototype;r.initialize=function(){this.resources=this.resources||[];null==this.creationTime&&(this.creationTime=Date.now())};r.refreshToken=function(){const a=u.id.findServerInfo(this.server),b=a&&a.owningSystemUrl,c=!!b&&"server"===this.scope,d=c&&ea(a,u.id._legacyFed);var g=a.webTierAuth;const l=g&&u.id.normalizeWebTierAuth;var f=S[this.server];f=f&&f[this.userId];
let h=this.resources&&this.resources[0],e=c&&u.id.findServerInfo(b),k={username:this.userId,password:f},q;if(!g||l)if(c&&!e&&u.id.serverInfos.some(m=>{u.id._isIdProvider(b,m.server)&&(e=m);return!!e}),g=e&&u.id.findCredential(e.server,this.userId),!c||g)if(d)g.refreshToken();else{if(c)q={serverUrl:h,token:g&&g.token,ssl:g&&g.ssl};else if(l)k=null,q={ssl:this.ssl};else if(f)this.isAdmin&&(q={isAdmin:!0});else{let m;h&&(h=u.id._sanitizeUrl(h),this._enqueued=1,m=u.id._enqueue(h,a,null,null,this.isAdmin,
this),m.then(()=>{this._enqueued=0;this.refreshServerTokens()}).catch(()=>{this._enqueued=0}));return m}return u.id.generateToken(c?e:a,c?null:k,q).then(m=>{this.token=m.token;this.expires=null!=m.expires?Number(m.expires):null;this.creationTime=Date.now();this.validity=m.validity;this.emitTokenChange();this.refreshServerTokens()}).catch(()=>{})}};r.refreshServerTokens=function(){"portal"===this.scope&&u.id.credentials.forEach(a=>{const b=u.id.findServerInfo(a.server),c=b&&b.owningSystemUrl;a!==this&&
a.userId===this.userId&&c&&"server"===a.scope&&(u.id._hasSameServerInstance(this.server,c)||u.id._isIdProvider(c,this.server))&&(ea(b,u.id._legacyFed)?(a.token=this.token,a.expires=this.expires,a.creationTime=this.creationTime,a.validity=this.validity,a.emitTokenChange()):a.refreshToken())})};r.emitTokenChange=function(a){clearTimeout(this._refreshTimer);var b=this.server&&u.id.findServerInfo(this.server);const c=(b=b&&b.owningSystemUrl)&&u.id.findServerInfo(b);!1===a||b&&"portal"!==this.scope&&(!c||
!c.webTierAuth||u.id.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer();this.emit("token-change")};r.destroy=function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const a=u.id.credentials.indexOf(this);-1<a&&u.id.credentials.splice(a,1);this.emitTokenChange();this.emit("destroy")};r.toJSON=function(){const a=X.fixJson({userId:this.userId,
server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),b=this.resources;b&&0<b.length&&(a.resources=b.slice());return a};r._startRefreshTimer=function(){clearTimeout(this._refreshTimer);const a=6E4*this.tokenRefreshBuffer,b=2**31-1;let c=(this.validity?this.creationTime+6E4*this.validity:this.expires)-Date.now();0>c?c=0:c>b&&(c=b);this._refreshTimer=setTimeout(this.refreshToken.bind(this),
c>a?c-a:c)};return U}(W.EventedAccessor);t.__decorate([R.property()],A.Credential.prototype,"creationTime",void 0);t.__decorate([R.property()],A.Credential.prototype,"expires",void 0);t.__decorate([R.property()],A.Credential.prototype,"isAdmin",void 0);t.__decorate([R.property()],A.Credential.prototype,"oAuthState",void 0);t.__decorate([R.property()],A.Credential.prototype,"resources",void 0);t.__decorate([R.property()],A.Credential.prototype,"scope",void 0);t.__decorate([R.property()],A.Credential.prototype,
"server",void 0);t.__decorate([R.property()],A.Credential.prototype,"ssl",void 0);t.__decorate([R.property()],A.Credential.prototype,"token",void 0);t.__decorate([R.property()],A.Credential.prototype,"tokenRefreshBuffer",void 0);t.__decorate([R.property()],A.Credential.prototype,"userId",void 0);t.__decorate([R.property()],A.Credential.prototype,"validity",void 0);A.Credential=t.__decorate([Z.subclass("esri.identity.Credential")],A.Credential);A.IdentityManagerBase=Y;Object.defineProperty(A,"__esModule",
{value:!0})})},"esri/identity/IdentityForm":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../intl/substitute ../widgets/Widget ../widgets/support/widgetUtils ../widgets/support/decorators/messageBundle ../core/Logger ../widgets/support/jsxFactory".split(" "),function(A,w,t,p,u,I,C,W,K,X,G,B,y){p=function(R){function Y(L,
ba){L=R.call(this,L,ba)||this;L._usernameInputNode=null;L._passwordInputNode=null;L.messages=null;L.signingIn=!1;L.server=null;L.resource=null;L.error=null;L.oAuthPrompt=!1;return L}A._inheritsLoose(Y,R);var Z=Y.prototype;Z.render=function(){const {error:L,server:ba,resource:la,signingIn:ka,oAuthPrompt:da,messages:S}=this,ma=y.tsx("div",{class:"esri-identity-form__group"},W.substitute(da?S.oAuthInfo:S.info,{server:/\.arcgis\.com/i.test(ba)?"ArcGIS Online":ba,resource:`(${la||S.lblItem})`})),ea=da?
null:y.tsx("div",{class:"esri-identity-form__group",key:"username"},y.tsx("label",{class:"esri-identity-form__label"},S.lblUser,y.tsx("input",{value:"",required:!0,autocomplete:"off",spellcheck:!1,type:"text",bind:this,afterCreate:X.storeNode,"data-node-ref":"_usernameInputNode",class:"esri-input"}))),fa=da?null:y.tsx("div",{class:"esri-identity-form__group",key:"password"},y.tsx("label",{class:"esri-identity-form__label"},S.lblPwd,y.tsx("input",{value:"",required:!0,type:"password",bind:this,afterCreate:X.storeNode,
"data-node-ref":"_passwordInputNode",class:"esri-input"}))),ha=y.tsx("div",{class:this.classes("esri-identity-form__group","esri-identity-form__footer")},y.tsx("input",{type:"submit",disabled:!!ka,value:ka?S.lblSigning:S.lblOk,class:"esri-button"}),y.tsx("input",{type:"button",value:S.lblCancel,bind:this,onclick:this._cancel,class:this.classes("esri-button","esri-button--secondary")})),T=L?y.tsx("div",null,L.details&&L.details.httpStatus?S.invalidUser:S.noAuthService):null;return y.tsx("form",{class:"esri-identity-form",
bind:this,onsubmit:this._submit},ma,T,ea,fa,ha)};Z._cancel=function(){this._set("signingIn",!1);this._usernameInputNode&&(this._usernameInputNode.value="");this._passwordInputNode&&(this._passwordInputNode.value="");this.emit("cancel")};Z._submit=function(L){L.preventDefault();this._set("signingIn",!0);this.emit("submit",this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value})};return Y}(K);w.__decorate([t.property(),
G.messageBundle("esri/identity/t9n/identity")],p.prototype,"messages",void 0);w.__decorate([t.property()],p.prototype,"signingIn",void 0);w.__decorate([t.property()],p.prototype,"server",void 0);w.__decorate([t.property()],p.prototype,"resource",void 0);w.__decorate([t.property()],p.prototype,"error",void 0);w.__decorate([t.property()],p.prototype,"oAuthPrompt",void 0);return p=w.__decorate([C.subclass("esri.identity.IdentityForm")],p)})},"esri/identity/IdentityModal":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/handleUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../widgets/Widget ../widgets/support/widget ../widgets/support/decorators/messageBundle ../widgets/support/jsxFactory".split(" "),
function(A,w,t,p,u,I,C,W,K,X,G,B){function y(f,h){var e=Object.keys(f);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(f);h&&(k=k.filter(function(q){return Object.getOwnPropertyDescriptor(f,q).enumerable}));e.push.apply(e,k)}return e}function R(f){for(var h=1;h<arguments.length;h++){var e=null!=arguments[h]?arguments[h]:{};h%2?y(Object(e),!0).forEach(function(k){var q=e[k];k in f?Object.defineProperty(f,k,{value:q,enumerable:!0,configurable:!0,writable:!0}):f[k]=q}):Object.getOwnPropertyDescriptors?
Object.defineProperties(f,Object.getOwnPropertyDescriptors(e)):y(Object(e)).forEach(function(k){Object.defineProperty(f,k,Object.getOwnPropertyDescriptor(e,k))})}return f}u='input select textarea a[href] button [tabindex] audio[controls] video[controls] [contenteditable]:not([contenteditable\x3d"false"]) details\x3esummary:first-of-type details'.split(" ");var Y=u.join(","),Z="undefined"===typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,
L=function(f,h,e){var k=Array.prototype.slice.apply(f.querySelectorAll(Y));h&&Z.call(f,Y)&&k.unshift(f);return k=k.filter(e)},ba=function(f){var h=parseInt(f.getAttribute("tabindex"),10);return isNaN(h)?"true"===f.contentEditable||("AUDIO"===f.nodeName||"VIDEO"===f.nodeName||"DETAILS"===f.nodeName)&&null===f.getAttribute("tabindex")?0:f.tabIndex:h},la=function(f,h){return f.tabIndex===h.tabIndex?f.documentOrder-h.documentOrder:f.tabIndex-h.tabIndex},ka=function(f){return"DETAILS"===f.tagName&&Array.prototype.slice.apply(f.children).some(function(h){return"SUMMARY"===
h.tagName})},da=function(f,h){for(var e=0;e<f.length;e++)if(f[e].checked&&f[e].form===h)return f[e]},S=function(f){if(!f.name)return!0;var h=f.form||f.ownerDocument,e=function(q){return h.querySelectorAll('input[type\x3d"radio"][name\x3d"'+q+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)var k=e(window.CSS.escape(f.name));else try{k=e(f.name)}catch(q){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",
q.message),!1}e=da(k,f.form);return!e||e===f},ma=function(f,h){if("hidden"===getComputedStyle(f).visibility)return!0;var e=Z.call(f,"details\x3esummary:first-of-type")?f.parentElement:f;if(Z.call(e,"details:not([open]) *"))return!0;if(!h||"full"===h)for(;f;){if("none"===getComputedStyle(f).display)return!0;f=f.parentElement}else if("non-zero-area"===h)return f=f.getBoundingClientRect(),h=f.height,0===f.width&&0===h;return!1},ea=function(f,h){var e;(e=h.disabled)||(e="INPUT"===h.tagName&&"hidden"===
h.type);if(!(f=e||ma(h,f.displayCheck)||ka(h)))a:{if("INPUT"===h.tagName||"SELECT"===h.tagName||"TEXTAREA"===h.tagName||"BUTTON"===h.tagName)for(f=h.parentElement;f;){if("FIELDSET"===f.tagName&&f.disabled){for(e=0;e<f.children.length;e++){var k=f.children.item(e);if("LEGEND"===k.tagName){if(k.contains(h)){f=!1;break a}break}}f=!0;break a}f=f.parentElement}f=!1}return f?!1:!0},fa=function(f,h){(f=!ea(f,h))||(f="INPUT"===h.tagName&&"radio"===h.type&&!S(h));return f||0>ba(h)?!1:!0},ha=function(f,h){h=
h||{};var e=[],k=[];L(f,h.includeContainer,fa.bind(null,h)).forEach(function(q,m){var D=ba(q);0===D?e.push(q):k.push({documentOrder:m,tabIndex:D,node:q})});return k.sort(la).map(function(q){return q.node}).concat(e)},T=function(f,h){h=h||{};return L(f,h.includeContainer,ea.bind(null,h))},U=function(f,h){h=h||{};if(!f)throw Error("No node provided");return!1===Z.call(f,Y)?!1:fa(h,f)},r=u.concat("iframe").join(","),a=function(f,h){h=h||{};if(!f)throw Error("No node provided");return!1===Z.call(f,r)?
!1:ea(h,f)},b=function(){var f=[];return{activateTrap:function(h){if(0<f.length){var e=f[f.length-1];e!==h&&e.pause()}e=f.indexOf(h);-1!==e&&f.splice(e,1);f.push(h)},deactivateTrap:function(h){h=f.indexOf(h);-1!==h&&f.splice(h,1);0<f.length&&f[f.length-1].unpause()}}}(),c=function(f,h){var e=-1;f.every(function(k,q){return h(k)?(e=q,!1):!0});return e},d=function(f){for(var h=arguments.length,e=Array(1<h?h-1:0),k=1;k<h;k++)e[k-1]=arguments[k];return"function"===typeof f?f.apply(void 0,e):f},g=function(f){return f.target.shadowRoot&&
"function"===typeof f.composedPath?f.composedPath()[0]:f.target},l=function(f,h){var e=(null===h||void 0===h?void 0:h.document)||document,k=R({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},h),q=[],m=[],D=null,z=null,v=!1,E=!1,O=void 0,M=function(H,n,x){return H&&void 0!==H[n]?H[n]:k[x||n]},aa=function(H){return!(!H||!q.some(function(n){return n.contains(H)}))},ia=function(H){var n=k[H];if("function"===typeof n){for(var x=arguments.length,P=Array(1<x?x-1:0),Q=1;Q<x;Q++)P[Q-
1]=arguments[Q];n=n.apply(void 0,P)}if(!n){if(void 0===n||!1===n)return n;throw Error("`".concat(H,"` was specified but was not a node, or did not return a node"));}x=n;if("string"===typeof n&&(x=e.querySelector(n),!x))throw Error("`".concat(H,"` as selector refers to no known node"));return x},F=function(){var H=ia("initialFocus");if(!1===H)return!1;void 0===H&&(H=aa(e.activeElement)?e.activeElement:(H=m[0])&&H.firstTabbableNode||ia("fallbackFocus"));if(!H)throw Error("Your focus-trap needs to have at least one focusable element");
return H},J=function(){m=q.map(function(H){var n=ha(H),x=T(H);if(0<n.length)return{container:H,firstTabbableNode:n[0],lastTabbableNode:n[n.length-1],nextTabbableNode:function(P){var Q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,ca=x.findIndex(function(V){return V===P});return Q?x.slice(ca+1).find(function(V){return U(V)}):x.slice(0,ca).reverse().find(function(V){return U(V)})}}}).filter(function(H){return!!H});if(0>=m.length&&!ia("fallbackFocus"))throw Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");
},N=function x(n){!1!==n&&n!==e.activeElement&&(n&&n.focus?(n.focus({preventScroll:!!k.preventScroll}),z=n,n.tagName&&"input"===n.tagName.toLowerCase()&&"function"===typeof n.select&&n.select()):x(F()))},oa=function(n){var x=ia("setReturnFocus",n);return x?x:!1===x?!1:n},pa=function(n){var x=g(n);aa(x)||(d(k.clickOutsideDeactivates,n)?ja.deactivate({returnFocus:k.returnFocusOnDeactivate&&!a(x)}):d(k.allowOutsideClick,n)||n.preventDefault())},qa=function(n){var x=g(n),P=aa(x);P||x instanceof Document?
P&&(z=x):(n.stopImmediatePropagation(),N(z||F()))},va=function(n){var x=g(n);J();var P=null;if(0<m.length){var Q=c(m,function(na){return na.container.contains(x)}),ca=0<=Q?m[Q]:void 0;if(0>Q)P=n.shiftKey?m[m.length-1].lastTabbableNode:m[0].firstTabbableNode;else if(n.shiftKey){var V=c(m,function(na){return x===na.firstTabbableNode});0>V&&(ca.container===x||a(x)&&!U(x)&&!ca.nextTabbableNode(x,!1))&&(V=Q);0<=V&&(P=m[0===V?m.length-1:V-1].lastTabbableNode)}else V=c(m,function(na){return x===na.lastTabbableNode}),
0>V&&(ca.container===x||a(x)&&!U(x)&&!ca.nextTabbableNode(x))&&(V=Q),0<=V&&(P=m[V===m.length-1?0:V+1].firstTabbableNode)}else P=ia("fallbackFocus");P&&(n.preventDefault(),N(P))},ra=function(n){"Escape"!==n.key&&"Esc"!==n.key&&27!==n.keyCode||!1===d(k.escapeDeactivates,n)?"Tab"!==n.key&&9!==n.keyCode||va(n):(n.preventDefault(),ja.deactivate())},sa=function(n){if(!d(k.clickOutsideDeactivates,n)){var x=g(n);aa(x)||d(k.allowOutsideClick,n)||(n.preventDefault(),n.stopImmediatePropagation())}},ta=function(){if(v)return b.activateTrap(ja),
O=k.delayInitialFocus?setTimeout(function(){N(F())},0):N(F()),e.addEventListener("focusin",qa,!0),e.addEventListener("mousedown",pa,{capture:!0,passive:!1}),e.addEventListener("touchstart",pa,{capture:!0,passive:!1}),e.addEventListener("click",sa,{capture:!0,passive:!1}),e.addEventListener("keydown",ra,{capture:!0,passive:!1}),ja},ua=function(){if(v)return e.removeEventListener("focusin",qa,!0),e.removeEventListener("mousedown",pa,!0),e.removeEventListener("touchstart",pa,!0),e.removeEventListener("click",
sa,!0),e.removeEventListener("keydown",ra,!0),ja};var ja={activate:function(n){if(v)return this;var x=M(n,"onActivate"),P=M(n,"onPostActivate"),Q=M(n,"checkCanFocusTrap");Q||J();v=!0;E=!1;D=e.activeElement;x&&x();n=function(){Q&&J();ta();P&&P()};if(Q)return Q(q.concat()).then(n,n),this;n();return this},deactivate:function(n){if(!v)return this;clearTimeout(O);O=void 0;ua();E=v=!1;b.deactivateTrap(ja);var x=M(n,"onDeactivate"),P=M(n,"onPostDeactivate"),Q=M(n,"checkCanReturnFocus");x&&x();var ca=M(n,
"returnFocus","returnFocusOnDeactivate");n=function(){setTimeout(function(){ca&&N(oa(D));P&&P()},0)};if(ca&&Q)return Q(oa(D)).then(n,n),this;n();return this},pause:function(){if(E||!v)return this;E=!0;ua();return this},unpause:function(){if(!E||!v)return this;E=!1;J();ta();return this},updateContainerElements:function(n){q=[].concat(n).filter(Boolean).map(function(x){return"string"===typeof x?e.querySelector(x):x});v&&J();return this}};ja.updateContainerElements(f);return ja};K=function(f){function h(k,
q){var m=f.call(this,k,q)||this;m.container=document.createElement("div");m.content=null;m.open=!1;m._close=()=>{m.open=!1};document.body.appendChild(m.container);m.own(m.watch("open",()=>m._toggleFocusTrap()));return m}A._inheritsLoose(h,f);var e=h.prototype;e.destroy=function(){this._destroyFocusTrap()};e.render=function(){var k=this.id;const {open:q,content:m,title:D,messages:z}=this;var v=q&&!!m;const E={["esri-identity-modal--open"]:v,["esri-identity-modal--closed"]:!v},O=B.tsx("button",{class:"esri-identity-modal__close-button",
"aria-label":z.close,title:z.close,bind:this,onclick:this._close},B.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})),M=`${k}_title`;k=`${k}_content`;const aa=D?B.tsx("h1",{id:M,class:"esri-identity-modal__title"},D):null;v=v?B.tsx("div",{bind:this,class:"esri-identity-modal__dialog",role:"dialog","aria-labelledby":M,"aria-describedby":k,afterCreate:this._createFocusTrap},O,aa,this._renderContent(k)):null;return B.tsx("div",{tabIndex:-1,class:this.classes("esri-identity-modal",E)},v)};e._destroyFocusTrap=
function(){var k;null==(k=this._focusTrap)?void 0:k.deactivate({onDeactivate:null});this._focusTrap=null};e._toggleFocusTrap=function(){const {_focusTrap:k,open:q}=this;k&&(q?k.activate():k.deactivate())};e._createFocusTrap=function(k){this._destroyFocusTrap();const q=requestAnimationFrame(()=>{this._focusTrap=l(k,{initialFocus:"input",onDeactivate:this._close});this._toggleFocusTrap()});this.own(t.makeHandle(()=>cancelAnimationFrame(q)))};e._renderContent=function(k){const q=this.content;return"string"===
typeof q?B.tsx("div",{class:"esri-identity-modal__content",id:k,innerHTML:q}):X.isWidget(q)?B.tsx("div",{class:"esri-identity-modal__content",id:k},q.render()):q instanceof HTMLElement?B.tsx("div",{class:"esri-identity-modal__content",id:k,bind:q,afterCreate:this._attachToNode}):null};e._attachToNode=function(k){k.appendChild(this)};return h}(K);w.__decorate([p.property({readOnly:!0})],K.prototype,"container",void 0);w.__decorate([p.property()],K.prototype,"content",void 0);w.__decorate([p.property()],
K.prototype,"open",void 0);w.__decorate([p.property(),G.messageBundle("esri/t9n/common")],K.prototype,"messages",void 0);w.__decorate([p.property({aliasOf:"messages.auth.signIn"})],K.prototype,"title",void 0);return K=w.__decorate([W.subclass("esri.identity.IdentityModal")],K)})},"esri/identity/OAuthCredential":function(){define(function(){let A=function(){function w(p,u){this.userId=this.token=this.stateUID=this.ssl=this.refreshToken=this.expires=this.codeVerifier=this.appId=this.storage=this.oAuthInfo=
null;this.oAuthInfo=p;this.storage=u;this._init()}var t=w.prototype;t.isValid=function(){let p=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)p=!0;else{const u=Date.now();this.expires>u&&(this.expires-u)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(p=!0)}return p};t.save=function(){if(!this.storage)return!1;const p=this._load(),u=this.oAuthInfo;if(u&&u.authNamespace&&u.portalUrl){let I=p[u.authNamespace];I||(I=p[u.authNamespace]={});this.appId||
(this.appId=u.appId);I[u.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(p))}catch(C){return console.warn(C),!1}return!0}return!1};t.destroy=function(){const p=this._load(),u=this.oAuthInfo;if(u&&u.appId&&u.portalUrl&&(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){var I=u.portalUrl.replace(/^http:/i,
"https:")+"/sharing/rest/oauth2/revokeToken";const C=new FormData;C.append("f","json");C.append("auth_token",this.refreshToken||this.token);C.append("client_id",u.appId);C.append("token_type_hint",this.refreshToken?"refresh_token":"access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(I,C);else{const W=new XMLHttpRequest;W.open("POST",I);W.send(C)}}if(u&&u.authNamespace&&u.portalUrl&&this.storage&&(I=p[u.authNamespace])){delete I[u.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",
JSON.stringify(p))}catch(C){console.log(C)}}u&&(this.oAuthInfo=u._oAuthCred=null)};t._init=function(){var p=this._load();const u=this.oAuthInfo;u&&u.authNamespace&&u.portalUrl&&(p=p[u.authNamespace])&&(p=p[u.portalUrl])&&(this.appId=p.appId,this.codeVerifier=p.codeVerifier,this.expires=p.expires,this.refreshToken=p.refreshToken,this.ssl=p.ssl,this.stateUID=p.stateUID,this.token=p.token,this.userId=p.userId)};t._load=function(){let p={};if(this.storage){const u=this.storage.getItem("esriJSAPIOAuth");
if(u)try{p=JSON.parse(u)}catch(I){console.warn(I)}}return p};return w}();A.prototype.declaredClass="esri.identity.OAuthCredential";return A})},"esri/identity/OAuthInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),function(A,w,t,p,u,I,C,W){var K;t=K=function(X){function G(B){B=X.call(this,
B)||this;B._oAuthCred=null;B.appId=null;B.authNamespace="/";B.expiration=20160;B.flowType="auto";B.forceLogin=!1;B.forceUserId=!1;B.locale=null;B.minTimeUntilExpiration=30;B.popup=!1;B.popupCallbackUrl="oauth-callback.html";B.popupWindowFeatures="height\x3d490,width\x3d800,resizable,scrollbars,status";B.portalUrl="https://www.arcgis.com";B.preserveUrlHash=!1;B.userId=null;return B}A._inheritsLoose(G,X);G.prototype.clone=function(){return K.fromJSON(this.toJSON())};return G}(t.JSONSupport);w.__decorate([p.property({json:{write:!0}})],
t.prototype,"appId",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"authNamespace",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"expiration",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"flowType",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"forceLogin",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"forceUserId",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"locale",void 0);w.__decorate([p.property({json:{write:!0}})],
t.prototype,"minTimeUntilExpiration",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"popup",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"popupCallbackUrl",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"popupWindowFeatures",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"portalUrl",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"preserveUrlHash",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,
"userId",void 0);return t=K=w.__decorate([W.subclass("esri.identity.OAuthInfo")],t)})},"esri/identity/ServerInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),function(A,w,t,p,u,I,C,W){t=function(K){function X(G){G=K.call(this,G)||this;G.adminTokenServiceUrl=null;G.currentVersion=null;
G.hasPortal=null;G.hasServer=null;G.owningSystemUrl=null;G.owningTenant=null;G.server=null;G.shortLivedTokenValidity=null;G.tokenServiceUrl=null;G.webTierAuth=null;return G}A._inheritsLoose(X,K);return X}(t.JSONSupport);w.__decorate([p.property({json:{write:!0}})],t.prototype,"adminTokenServiceUrl",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"currentVersion",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"hasPortal",void 0);w.__decorate([p.property({json:{write:!0}})],
t.prototype,"hasServer",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"owningSystemUrl",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"owningTenant",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"server",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"shortLivedTokenValidity",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"tokenServiceUrl",void 0);w.__decorate([p.property({json:{write:!0}})],t.prototype,"webTierAuth",
void 0);return t=w.__decorate([W.subclass("esri.identity.ServerInfo")],t)})},"*noref":1}});define(["../chunks/_rollupPluginBabelHelpers","../kernel","./IdentityManagerBase"],function(A,w,t){t=function(p){function u(){return p.apply(this,arguments)||this}A._inheritsLoose(u,p);return u}(t.IdentityManagerBase);t.prototype.declaredClass="esri.identity.IdentityManager";t=new t;w.setId(t);return t});