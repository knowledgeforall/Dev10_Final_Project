// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/iteratorUtils":function(){define(["exports"],function(e){e.cache=function(l){const k=[];return function*(){yield*k;for(const g of l)k.push(g),yield g}};e.find=function(l,k){for(const g of l)if(null!=g&&k(g))return g};e.isIterable=function(l){return null!=l&&"function"===typeof l[Symbol.iterator]};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n,t,r){var u;k=new k.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});g=u=function(C){function I(f){f=C.call(this,f)||this;f.dpi=96;f.format=null;f.origin=null;f.minScale=0;f.maxScale=0;f.size=null;f.spatialReference=null;return f}e._inheritsLoose(I,C);I.create=function(f=
{}){const {resolutionFactor:B=1,scales:K,size:P=256,spatialReference:T=h.WebMercator,numLODs:X=24}=f;if(!n.isValid(T)){f=[];if(K)for(var W=0;W<K.length;W++){var L=K[W];f.push({level:W,scale:L,resolution:L})}else for(W=5E-4,L=X-1;0<=L;L--)f.unshift({level:L,scale:W,resolution:W}),W*=2;return new u({dpi:96,lods:f,origin:new m(0,0,T),size:[P,P],spatialReference:T})}W=n.getInfo(T);f=f.origin?new m({x:f.origin.x,y:f.origin.y,spatialReference:T}):W?new m({x:W.origin[0],y:W.origin[1],spatialReference:T}):
new m({x:0,y:0,spatialReference:T});W=1/(39.37*x.getMetersPerUnitForSR(T)*96);L=[];if(K)for(var R=0;R<K.length;R++){var aa=K[R];L.push({level:R,scale:aa,resolution:aa*W})}else{var H=n.isGeographic(T)?512/P*5.916575275917094E8:256/P*5.91657527591555E8;R=Math.ceil(X/B);L.push({level:0,scale:H,resolution:H*W});for(aa=1;aa<R;aa++)H/=2**B,L.push({level:aa,scale:H,resolution:H*W})}return new u({dpi:96,lods:L,origin:f,size:[P,P],spatialReference:T})};var w=I.prototype;w.readOrigin=function(f,B){return m.fromJSON({spatialReference:B.spatialReference,
...f})};w.readSize=function(f,B){return[B.cols,B.rows]};w.writeSize=function(f,B){B.cols=f[0];B.rows=f[1]};w.zoomToScale=function(f){const B=this.scales;if(0>=f)return B[0];if(f>=B.length-1)return B[B.length-1];{const K=Math.floor(f);return B[K]/(B[K]/B[K+1])**(f-K)}};w.scaleToZoom=function(f){const B=this.scales,K=B.length-1;let P=0;for(;P<K;P++){const T=B[P],X=B[P+1];if(T<=f)break;if(X===f)return P+1;if(T>f&&X<f)return P+Math.log(T/f)/Math.log(T/X)}return P};w.snapScale=function(f,B=.95){f=this.scaleToZoom(f);
return f%Math.floor(f)>=B?this.zoomToScale(Math.ceil(f)):this.zoomToScale(Math.floor(f))};w.tileAt=function(f,B,K,P){var T=this.lodAt(f);if(!T)return null;let X;if("number"===typeof B)X=B,B=K;else{if(n.equals(B.spatialReference,this.spatialReference))X=B.x,B=B.y;else{P=t.project(B,this.spatialReference);if(q.isNone(P))return null;X=P.x;B=P.y}P=K}K=T.resolution*this.size[0];T=T.resolution*this.size[1];P||(P={id:null,level:0,row:0,col:0,extent:b.create()});P.level=f;P.row=Math.floor((this.origin.y-
B)/T+.001);P.col=Math.floor((X-this.origin.x)/K+.001);this.updateTileInfo(P);return P};w.updateTileInfo=function(f,B=u.ExtrapolateOptions.NONE){var K=this.lodAt(f.level);K||B!==u.ExtrapolateOptions.POWER_OF_TWO||(B=this.lods[this.lods.length-1],B.level<f.level&&(K=B));if(K){var P=f.level-K.level;B=K.resolution*this.size[0]/2**P;K=K.resolution*this.size[1]/2**P;f.id=`${f.level}/${f.row}/${f.col}`;f.extent||(f.extent=b.create());f.extent[0]=this.origin.x+f.col*B;f.extent[1]=this.origin.y-(f.row+1)*
K;f.extent[2]=f.extent[0]+B;f.extent[3]=f.extent[1]+K}};w.upsampleTile=function(f){const B=this._upsampleLevels[f.level];if(!B||-1===B.parentLevel)return!1;f.level=B.parentLevel;f.row=Math.floor(f.row/B.factor+.001);f.col=Math.floor(f.col/B.factor+.001);this.updateTileInfo(f);return!0};w.getTileBounds=function(f,B){var {resolution:K}=this.lodAt(B.level);const P=K*this.size[0];K*=this.size[1];f[0]=this.origin.x+B.col*P;f[1]=this.origin.y-(B.row+1)*K;f[2]=f[0]+P;f[3]=f[1]+K;return f};w.lodAt=function(f){return this._levelToLOD&&
this._levelToLOD[f]||null};w.clone=function(){return u.fromJSON(this.write({}))};w.getOrCreateCompatible=function(f,B){if(256===this.size[0]&&256===this.size[1])return 256===f?this:null;const K=[],P=this.lods.length;for(let T=0;T<P;T++){const X=this.lods[T];K.push(new r({level:X.level,scale:X.scale,resolution:X.resolution*B}))}return new u({size:[f,f],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:K})};w._initializeUpsampleLevels=
function(){const f=this.lods;this._upsampleLevels=[];let B=null;for(let K=0;K<f.length;K++){const P=f[K];this._upsampleLevels[P.level]={parentLevel:B?B.level:-1,factor:B?B.resolution/P.resolution:0};B=P}};e._createClass(I,[{key:"isWrappable",get:function(){const {spatialReference:f,origin:B}=this;if(f&&B){const K=n.getInfo(f);return f.isWrappable&&Math.abs(K.origin[0]-B.x)<=K.dx}return!1}},{key:"lods",set:function(f){let B=0,K=0;const P=[];this._levelToLOD={};f&&(B=-Infinity,K=Infinity,f.forEach(T=>
{P.push(T.scale);B=T.scale>B?T.scale:B;K=T.scale<K?T.scale:K;this._levelToLOD[T.level]=T}));this._set("scales",P);this._set("minScale",B);this._set("maxScale",K);this._set("lods",f);this._initializeUpsampleLevels()}}]);return I}(g.JSONSupport);l.__decorate([y.property({type:Number,json:{write:!0}})],g.prototype,"compressionQuality",void 0);l.__decorate([y.property({type:Number,json:{write:!0}})],g.prototype,"dpi",void 0);l.__decorate([y.property({type:String,json:{read:k.read,write:k.write,origins:{"web-scene":{read:!1,
write:!1}}}})],g.prototype,"format",void 0);l.__decorate([y.property({readOnly:!0})],g.prototype,"isWrappable",null);l.__decorate([y.property({type:m,json:{write:!0}})],g.prototype,"origin",void 0);l.__decorate([p.reader("origin")],g.prototype,"readOrigin",null);l.__decorate([y.property({type:[r],value:null,json:{write:!0}})],g.prototype,"lods",null);l.__decorate([y.property({readOnly:!0})],g.prototype,"minScale",void 0);l.__decorate([y.property({readOnly:!0})],g.prototype,"maxScale",void 0);l.__decorate([y.property({readOnly:!0})],
g.prototype,"scales",void 0);l.__decorate([y.property({cast:C=>Array.isArray(C)?C:"number"===typeof C?[C,C]:[256,256]})],g.prototype,"size",void 0);l.__decorate([p.reader("size",["rows","cols"])],g.prototype,"readSize",null);l.__decorate([c.writer("size",{cols:{type:z.Integer},rows:{type:z.Integer}})],g.prototype,"writeSize",null);l.__decorate([y.property({type:h,json:{write:!0}})],g.prototype,"spatialReference",void 0);g=u=l.__decorate([d.subclass("esri.layers.support.TileInfo")],g);(function(C){C=
C.ExtrapolateOptions||(C.ExtrapolateOptions={});C[C.NONE=0]="NONE";C[C.POWER_OF_TWO=1]="POWER_OF_TWO"})(g||(g={}));return g})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(e,l,k,g,q,x,y,D){var F;k=F=function(z){function p(d){d=
z.call(this,d)||this;d.cols=null;d.level=0;d.levelValue=null;d.origin=null;d.resolution=0;d.rows=null;d.scale=0;return d}e._inheritsLoose(p,z);p.prototype.clone=function(){return new F({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return p}(k.JSONSupport);l.__decorate([g.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],k.prototype,"cols",void 0);l.__decorate([g.property({type:y.Integer,
json:{write:!0}})],k.prototype,"level",void 0);l.__decorate([g.property({type:String,json:{write:!0}})],k.prototype,"levelValue",void 0);l.__decorate([g.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],k.prototype,"origin",void 0);l.__decorate([g.property({type:Number,json:{write:!0}})],k.prototype,"resolution",void 0);l.__decorate([g.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],k.prototype,
"rows",void 0);l.__decorate([g.property({type:Number,json:{write:!0}})],k.prototype,"scale",void 0);return k=F=l.__decorate([D.subclass("esri.layers.support.LOD")],k)})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/ArrayPool ../core/Handles ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d){function c(b,n){return n?m[b].valueToClassName[n].split(" "):[]}const m={widthBreakpoint:{getValue(b){const n=b.viewSize[0];b=b.breakpoints;const t=this.values;return n<=b.xsmall?t.xsmall:n<=b.small?t.small:n<=b.medium?t.medium:n<=b.large?t.large:t.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(b){const n=b.viewSize[1];b=b.breakpoints;const t=this.values;return n<=b.xsmall?t.xsmall:n<=b.small?t.small:n<=b.medium?t.medium:n<=b.large?t.large:t.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(b){b=b.viewSize;const n=this.values;return b[1]>=b[0]?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},h={xsmall:544,small:768,medium:992,large:1200};e.BreakpointsOwner=
b=>{b=function(n){function t(...u){u=n.call(this,...u)||this;u._breakpointsHandles=new q;u.orientation=null;u.widthBreakpoint=null;u.heightBreakpoint=null;u.breakpoints=h;return u}l._inheritsLoose(t,n);var r=t.prototype;r.initialize=function(){this._breakpointsHandles.add(y.watch(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),y.initial))};r.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=x.destroyMaybe(this._breakpointsHandles))};r._updateClassNames=
function(){if(this.container){var u=g.acquire(),C=g.acquire(),I=!1,w;for(w in m){const f=this[w],B=m[w].getValue({viewSize:this.size,breakpoints:this.breakpoints});f!==B&&(I=!0,this[w]=B,c(w,f).forEach(K=>C.push(K)),c(w,B).forEach(K=>u.push(K)))}I&&(this._applyClassNameChanges(u,C),g.release(u),g.release(C))}};r._applyClassNameChanges=function(u,C){const I=this.container;I&&(C.forEach(w=>I.classList.remove(w)),u.forEach(w=>I.classList.add(w)))};r._removeActiveClassNames=function(){const u=this.container;
if(u)for(var C in m)c(C,this[C]).forEach(I=>u.classList.remove(I))};l._createClass(t,[{key:"breakpoints",set:function(u){var C=this._get("breakpoints");if(u!==C){C=(C=u)&&C.xsmall<C.small&&C.small<C.medium&&C.medium<C.large;if(!C){const I=JSON.stringify(h,null,2);console.warn("provided breakpoints are not valid, using defaults:"+I)}u=C?u:h;this._set("breakpoints",{...u})}}}]);return t}(b);k.__decorate([D.property()],b.prototype,"breakpoints",null);k.__decorate([D.property()],b.prototype,"orientation",
void 0);k.__decorate([D.property()],b.prototype,"widthBreakpoint",void 0);k.__decorate([D.property()],b.prototype,"heightBreakpoint",void 0);return b=k.__decorate([d.subclass("esri.views.BreakpointsOwner")],b)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c){function m(b){b&&(g.empty(b),b.parentNode&&b.parentNode.removeChild(b))}const h=[0,0];e.DOMContainer=b=>{b=function(n){function t(...u){var C=n.call(this,...u)||this;C._freqInfo={freq:16,time:750};C._overlayRenderTaskHandle=null;C.height=0;C.position=null;C.resizing=!1;C.root=null;C.surface=null;C.suspended=!0;C.ui=null;C.userContent=null;C.width=0;C.widthBreakpoint=null;C.handles.add([C.watch("cursor",I=>{const w=C.surface;w&&w.setAttribute("data-cursor",I)}),
C.watch("interacting",I=>{const w=C.surface;w&&w.setAttribute("data-interacting",I.toString())})]);return C}l._inheritsLoose(t,n);var r=t.prototype;r.initialize=function(){this.handles.add(this.watch("ui",(u,C)=>this._handleUIChange(u,C)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};r.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),
this.container=null)};r.blur=function(){this.surface&&this.surface.blur()};r.focus=function(){this.surface&&this.surface.focus()};r.pageToContainer=function(u,C,I){const w=this.position;u-=w[0];C-=w[1];I?(I[0]=u,I[1]=C):I=[u,C];return I};r.containerToPage=function(u,C,I){const w=this.position;u+=w[0];C+=w[1];I?(I[0]=u,I[1]=C):I=[u,C];return I};r._handleUIChange=function(u,C){C&&(this.handles.remove("ui"),C.destroy());u&&this._wireUI(u);this._set("ui",u)};r._wireUI=function(u){this.handles.remove("ui");
u&&(u.view=this,this.handles.add([q.watch(()=>this.root,C=>{if(C){{const I=document.createElement("div");C.appendChild(I);C=I}}else C=null;u.container=C},q.initial),q.watch(()=>this.popup,(C,I)=>{I&&u.remove(I,"popup");C&&(C.view=u.view,u.add(C,{key:"popup",position:"manual"}))},q.initial)],"ui"))};r._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};r._startMeasuring=function(){const u=this._freqInfo;u.freq=16;u.time=750;this.handles.add([(()=>
{const C=()=>{u.freq=16;u.time=750};window.addEventListener("resize",C);return{remove(){window.removeEventListener("resize",C)}}})(),x.addFrameTask({prepare:C=>{const I=this._measure(),w=this._freqInfo;w.time+=C.deltaTime;I&&(w.freq=16,this._get("resizing")||this._set("resizing",!0));w.time<w.freq||(w.time=0,this._position()||I?w.freq=16:w.freq=Math.min(750,2*w.freq),!I&&512<=w.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()};r._measure=function(){var u=
this.container;const C=u?u.clientWidth:0;u=u?u.clientHeight:0;if(0===C||0===u)return this.suspended||this._set("suspended",!0),!1;const I=this.width,w=this.height;if(C===I&&u===w)return this.suspended&&this._set("suspended",!1),!1;this._set("width",C);this._set("height",u);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:I,oldHeight:w,width:C,height:u});return!0};r._position=function(){var u=this.container;const C=this.position;{const I=(u.ownerDocument||window.document).defaultView;
u=u.getBoundingClientRect();h[0]=u.left+I.pageXOffset;h[1]=u.top+I.pageYOffset}return C&&h[0]===C[0]&&h[1]===C[1]?!1:(this._set("position",[h[0],h[1]]),!0)};r.forceDOMReadyCycle=function(){};l._createClass(t,[{key:"container",set:function(u){var C=this._get("container");if(C!==u)if(this.handles.remove("dom-size"),this._stopMeasuring(),C&&(C.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),
this._set("overlay",null),m(this.root),this._set("root",null),g.reparent(this.userContent,C),m(this.userContent),this._set("userContent",null)),u){u.classList.add("esri-view");C=document.createElement("div");C.className="esri-view-user-storage";g.reparent(u,C);u.appendChild(C);this._set("userContent",C);C=document.createElement("div");C.className="esri-view-root";u.insertBefore(C,u.firstChild);this._set("root",C);const I=document.createElement("div");I.className="esri-view-surface";I.setAttribute("role",
"application");I.tabIndex=0;C.appendChild(I);this._set("surface",I);const w=new d;C.appendChild(w.surface);this._set("overlay",w);w.watch("needsRender",f=>{f&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=x.addFrameTask({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(q.watch(()=>this.size,f=>{const [B,K]=f;B>=document.body.clientWidth||K>=document.body.clientHeight?
I.classList.add("esri-view-surface--inset-outline"):I.classList.remove("esri-view-surface--inset-outline")},q.initial),"dom-size");this._set("container",u);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const u=document.activeElement===this.surface;return document.hasFocus()&&u}},{key:"popup",get:function(){return this._get("popup")||new c({view:this})},
set:function(u){const C=this._get("popup");C&&C!==u&&C.destroy();this._set("popup",u)}},{key:"size",get:function(){return[this.width,this.height]}}]);return t}(b);k.__decorate([y.property({value:null,cast:n=>g.byId(n)})],b.prototype,"container",null);k.__decorate([y.property({readOnly:!0})],b.prototype,"focused",null);k.__decorate([y.property({readOnly:!0})],b.prototype,"height",void 0);k.__decorate([y.property({type:c})],b.prototype,"popup",null);k.__decorate([y.property({type:d})],b.prototype,"overlay",
void 0);k.__decorate([y.property({readOnly:!0})],b.prototype,"position",void 0);k.__decorate([y.property({readOnly:!0})],b.prototype,"resizing",void 0);k.__decorate([y.property({readOnly:!0})],b.prototype,"root",void 0);k.__decorate([y.property({value:null,readOnly:!0})],b.prototype,"size",null);k.__decorate([y.property({readOnly:!0})],b.prototype,"surface",void 0);k.__decorate([y.property({readOnly:!0})],b.prototype,"suspended",void 0);k.__decorate([y.property()],b.prototype,"ui",void 0);k.__decorate([y.property({readOnly:!0})],
b.prototype,"userContent",void 0);k.__decorate([y.property({readOnly:!0})],b.prototype,"width",void 0);k.__decorate([y.property()],b.prototype,"widthBreakpoint",void 0);return b=k.__decorate([p.subclass("esri.views.DOMContainer")],b)};e.isDOMContainer=function(b){return b&&"focus"in b};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../libs/maquette/projection ../../libs/maquette/projector ../support/WatchUpdatingTracking".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d){k=function(c){function m(){var b=c.apply(this,arguments)||this;b.items=new g;b._watchUpdatingTracking=new d.WatchUpdatingTracking;b._callbacks=new Map;b._projector=p.createProjector();b._hiddenProjector=p.createProjector();return b}e._inheritsLoose(m,c);var h=m.prototype;h.initialize=function(){const b=document.createElement("div");b.className="esri-overlay-surface";this._set("surface",b);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");b.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,n=>{for(const t of n.added){const r=()=>t.render();this._callbacks.set(t,r);this._projector.append(this.surface,r)}for(const t of n.removed)n=this._projector.detach(this._callbacks.get(t)),this.surface.removeChild(n.domNode),this._callbacks.delete(t)})};h.addItem=function(b){this.items.add(b)};h.removeItem=function(b){this.items.remove(b)};h.destroy=function(){this.items.removeAll();
this._callbacks.forEach(b=>this._projector.detach(b));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};h.render=function(){this._projector.renderNow()};h.computeBoundingRect=function(b){const n=this._hiddenSurface,t=this._hiddenProjector;let r=null;const u=()=>r=b.render();t.append(n,u);t.renderNow();const C={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const I=r.domNode.getBoundingClientRect();C.left=I.left;C.top=I.top;C.right=I.right;C.bottom=I.bottom}for(t.detach(u);n.firstChild;)n.removeChild(n.firstChild);
return C};h.overlaps=function(b,n){b=this.computeBoundingRect(b);n=this.computeBoundingRect(n);return Math.max(b.left,n.left)<=Math.min(b.right,n.right)&&Math.max(b.top,n.top)<=Math.min(b.bottom,n.bottom)};h.renderCanvas=function(b){if(this.items.some(t=>t.visible)){var n=b.getContext("2d");n.save();n.font=`10px ${getComputedStyle(this.surface).fontFamily}`;this.items.forEach(t=>{n.save();t.renderCanvas(n);n.restore()});n.restore()}};e._createClass(m,[{key:"needsRender",get:function(){return 0<this.items.length}},
{key:"hasVisibleItems",get:function(){return this.items.some(b=>b.visible)}}]);return m}(k);l.__decorate([q.property({readOnly:!0})],k.prototype,"surface",void 0);l.__decorate([q.property({readOnly:!0})],k.prototype,"items",void 0);l.__decorate([q.property({readOnly:!0})],k.prototype,"needsRender",null);l.__decorate([q.property({readOnly:!0})],k.prototype,"_watchUpdatingTracking",void 0);l.__decorate([q.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],k.prototype,"updating",void 0);
return k=l.__decorate([F.subclass("esri.views.overlay.ViewOverlay")],k)})},"esri/widgets/Popup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/reactiveUtils ../core/throttle ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n,t,r,u,C,I,w,f,B,K,P,T,X){function W(H,N){return void 0===N?`${"esri-popup"}__${H}`:`${"esri-popup"}__${H}-${N}`}const L={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},R=y.getLogger("esri.widgets.Popup"),aa={closeButton:!0,featureNavigation:!0};k=function(H){function N(v,E){var G=H.call(this,v,E)||this;G._blurClose=!1;G._blurContainer=!1;G._containerNode=null;G._mainContainerNode=null;G._featureMenuNode=null;G._actionsMenuNode=null;G._focusClose=
!1;G._focusContainer=!1;G._focusDockButton=!1;G._focusFeatureMenuButton=!1;G._focusActionsMenuButton=!1;G._focusFirstFeature=!1;G._focusFirstAction=!1;G._handles=new x;G._pointerOffsetInPx=16;G._spinner=null;G._feature=null;G._featureMenuIntersectionObserverCallback=([S])=>{null!=S&&S.isIntersecting&&G.viewModel.featurePage++};G._featureMenuIntersectionObserver=new IntersectionObserver(G._featureMenuIntersectionObserverCallback,{root:window.document});G._displaySpinnerThrottled=z.throttle(()=>G._displaySpinner(),
0);G.actions=null;G.alignment="auto";G.autoCloseEnabled=null;G.autoOpenEnabled=null;G.defaultPopupTemplateEnabled=null;G.content=null;G.collapsed=!1;G.collapseEnabled=!0;G.dockEnabled=!1;G.featureCount=null;G.featureMenuOpen=!1;G.features=null;G.goToOverride=null;G.headingLevel=2;G.highlightEnabled=null;G.location=null;G.label=void 0;G.maxInlineActions=3;G.messages=null;G.messagesCommon=null;G.promises=null;G.selectedFeature=null;G.selectedFeatureIndex=null;G.spinnerEnabled=!0;G.title=null;G.updateLocationEnabled=
null;G.view=null;G.viewModel=new I;G.visible=null;G.visibleElements={...aa};G._addSelectedFeatureIndexHandle();G.own([p.watch(e._assertThisInitialized(G),"viewModel.screenLocation",()=>G._positionContainer()),p.watch(e._assertThisInitialized(G),["viewModel.active","dockEnabled"],()=>G._toggleScreenLocationEnabled()),p.watch(e._assertThisInitialized(G),"viewModel.screenLocation",(S,da)=>{!!S!==!!da&&G.reposition()}),p.watch(e._assertThisInitialized(G),["viewModel.view.padding","viewModel.view.size",
"viewModel.active","viewModel.location","alignment"],()=>G.reposition()),p.watch(e._assertThisInitialized(G),"spinnerEnabled",S=>G._spinnerEnabledChange(S)),p.watch(e._assertThisInitialized(G),"viewModel.view.size",(S,da)=>G._updateDockEnabledForViewSize(S,da)),p.watch(e._assertThisInitialized(G),"viewModel.view",(S,da)=>G._viewChange(S,da)),p.watch(e._assertThisInitialized(G),"viewModel.view.ready",(S,da)=>G._viewReadyChange(S,da)),p.watch(e._assertThisInitialized(G),["viewModel.waitingForResult",
"viewModel.location"],()=>{G._hideSpinner();G._displaySpinnerThrottled()}),p.watch(e._assertThisInitialized(G),["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],()=>G._setTitleFromFeatureWidget()),p.watch(e._assertThisInitialized(G),["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],()=>G._setContentFromFeatureWidget()),p.whenFalse(e._assertThisInitialized(G),"collapsed",()=>{var S,da;"xsmall"===(null==(S=G.viewModel)?void 0:null==(da=
S.view)?void 0:da.widthBreakpoint)&&G.viewModel.active&&G.collapseEnabled&&G.viewModel.centerAtLocation()}),p.on(e._assertThisInitialized(G),"viewModel.allActions","change",()=>G._watchActions()),p.init(e._assertThisInitialized(G),"viewModel.allActions",()=>G._watchActions()),p.watch(e._assertThisInitialized(G),"viewModel.featureViewModels",()=>G._featureMenuViewportScrollTop())]);return G}e._inheritsLoose(N,H);var Q=N.prototype;Q.destroy=function(){var v,E;this._destroySelectedFeatureWidget();this._destroySpinner();
null==(v=this._handles)?void 0:v.destroy();this._unobserveFeatureMenuObserver();null==(E=this._featureMenuIntersectionObserver)?void 0:E.disconnect();this._handles=null};Q.castVisibleElements=function(v){return{...aa,...v}};Q.blur=function(){const {active:v}=this.viewModel;v||R.warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};Q.clear=function(){this.viewModel.clear()};Q.close=function(){this.visible=
!1};Q.fetchFeatures=function(v,E){return this.viewModel.fetchFeatures(v,E)};Q.focus=function(){const {active:v}=this.viewModel;v||R.warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};Q.next=function(){return this.viewModel.next()};Q.open=function(v){var E,G;this._handles.remove("selected-index");const S={collapsed:v?!!v.collapsed:!1,actionsMenuOpen:v?!!v.actionsMenuOpen:!1,featureMenuOpen:v?!!v.featureMenuOpen:
!1};"xsmall"===(null==(E=this.viewModel)?void 0:null==(G=E.view)?void 0:G.widthBreakpoint)&&(S.collapsed=!0);this.set(S);this.viewModel.open(v);this._shouldFocus(v);this._addSelectedFeatureIndexHandle()};Q.previous=function(){return this.viewModel.previous()};Q.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};Q.triggerAction=function(v){this.viewModel.triggerAction(v)};Q.render=function(){var v,E,G,S;const {actionsMenuOpen:da,dockEnabled:fa,featureMenuVisible:la,
dividedActions:na,currentAlignment:oa,currentDockPosition:sa}=this,{active:ta}=this.viewModel;var {menuActions:M}=na;M=ta&&1<M.length&&da;const V=null==(v=this.selectedFeature)?void 0:null==(E=v.layer)?void 0:E.title;v=null==(G=this.selectedFeature)?void 0:null==(S=G.layer)?void 0:S.id;return P.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===oa,["esri-popup--aligned-bottom-center"]:"bottom-center"===oa,["esri-popup--aligned-top-left"]:"top-left"===oa,
["esri-popup--aligned-bottom-left"]:"bottom-left"===oa,["esri-popup--aligned-top-right"]:"top-right"===oa,["esri-popup--aligned-bottom-right"]:"bottom-right"===oa,["esri-popup--is-docked"]:ta&&fa,["esri-popup--shadow"]:ta&&!fa,["esri-popup--is-docked-top-left"]:"top-left"===sa,["esri-popup--is-docked-top-center"]:"top-center"===sa,["esri-popup--is-docked-top-right"]:"top-right"===sa,["esri-popup--is-docked-bottom-left"]:"bottom-left"===sa,["esri-popup--is-docked-bottom-center"]:"bottom-center"===
sa,["esri-popup--is-docked-bottom-right"]:"bottom-right"===sa,["esri-popup--feature-menu-open"]:la,["esri-popup--actions-menu-open"]:M}),role:"presentation","data-layer-title":V,"data-layer-id":v,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},ta?[this.renderMainContainer(),this.renderPointer()]:null)};Q.renderLoadingIcon=function(){return P.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};Q.renderNavigationLoading=
function(){const {messagesCommon:v}=this;return this.viewModel.pendingPromisesCount?P.tsx("div",{key:W("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":v.loading,title:v.loading},this.renderLoadingIcon()):null};Q.renderPreviousIcon=function(){const v=T.isRTL(this.container);return P.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:v,["esri-popup__pagination-previous-icon--rtl"]:v,["esri-icon-left-triangle-arrow"]:!v,
["esri-popup__pagination-previous-icon"]:!v})})};Q.renderPreviousButton=function(){const {messages:v}=this;return P.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":v.previous,title:v.previous},this.renderPreviousIcon())};Q.renderNextIcon=function(){const v=T.isRTL(this.container);return P.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-left-triangle-arrow"]:v,
["esri-popup__pagination-next-icon--rtl"]:v,["esri-icon-right-triangle-arrow"]:!v,["esri-popup__pagination-next-icon"]:!v})})};Q.renderNextButton=function(){const {messages:v}=this;return P.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":v.next,title:v.next},this.renderNextIcon())};Q.renderFeatureMenuButton=function(){const {featureMenuOpen:v,featureMenuId:E,messagesCommon:G}=
this,{featureCount:S,selectedFeatureIndex:da}=this.viewModel;return P.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":E,"aria-expanded":v.toString(),"aria-label":G.menu,title:G.menu},this._getPageText(S,da))};Q.renderNavigationButtons=
function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null};Q.renderDockIcon=function(){const {dockEnabled:v}=this,E=this._wouldDockTo();return P.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:v,["esri-popup__icon--dock-icon"]:!v,["esri-icon-dock-right"]:!v&&("top-right"===E||"bottom-right"===E),["esri-icon-dock-left"]:!v&&("top-left"===E||"bottom-left"===E),
["esri-icon-maximize"]:!v&&"top-center"===E,["esri-icon-dock-bottom"]:!v&&"bottom-center"===E},"esri-popup__icon")})};Q.renderDockButton=function(){var v,E,G;const {dockEnabled:S,messages:da}=this,fa=null==(v=this.viewModel)?void 0:null==(E=v.view)?void 0:E.widthBreakpoint;v=S?da.undock:da.dock;return"xsmall"!==fa&&null!=(G=this.dockOptions)&&G.buttonEnabled?P.tsx("div",{role:"button","aria-label":v,title:v,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,
afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},this.renderDockIcon()):null};Q.renderTitle=function(){const {title:v}=this.viewModel,{titleId:E,collapsible:G,contentCollapsed:S,messagesCommon:da}=this;var fa={["esri-popup__header-container--button"]:G};const la=P.tsx(w.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:v});fa=G?P.tsx("button",{key:`${v}--collapsible`,id:E,title:S?da.expand:da.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),
class:this.classes("esri-popup__header-container",fa),"aria-expanded":S?"false":"true",onclick:this._toggleCollapsed,type:"button"},la):P.tsx("div",{key:v,id:E,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",fa)},la);return v?fa:null};Q.renderCloseIcon=function(){return P.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};Q.renderCloseButton=function(){const {visibleElements:v,messagesCommon:E}=
this;return v.closeButton?P.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":E.close,title:E.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};Q.renderHeader=function(){return P.tsx("header",{class:"esri-popup__header"},this.renderTitle(),P.tsx("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))};Q.renderContentContainer=
function(){const {contentId:v,hasContent:E,contentCollapsed:G}=this,{content:S}=this.viewModel;return E&&!G?P.tsx("article",{key:S,enterAnimation:this._createFeatureUpdatedAnimation(),id:v,class:"esri-popup__content"},this.renderContent()):null};Q.renderActionsMenuButton=function(){const {actionsMenuId:v,actionsMenuButtonId:E,actionsMenuOpen:G,dividedActions:S,messagesCommon:da}=this,fa=G?da.close:da.open,{menuActions:la}=S;return la.length?P.tsx("div",{key:W("actions-menu-button"),class:this.classes("esri-popup__button",
"esri-popup__actions-menu-button"),role:"button",id:E,"aria-haspopup":"true","aria-controls":G?v:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":fa,title:fa},P.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};Q.renderMenuActions=function(){const {actionsMenuId:v,actionsMenuButtonId:E,actionsMenuOpen:G,dividedActions:S}=this,
{menuActions:da}=S;return da.length&&G?P.tsx("ul",{id:v,role:"menu","aria-labelledby":E,key:W("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},da.toArray().map(fa=>this.renderAction({action:fa,type:"menu-item"}))):null};Q.renderInlineActions=function(){const {inlineActions:v}=this.dividedActions;return!!v.length&&v.toArray().map(E=>this.renderAction({action:E,type:"inline"}))};Q.renderInlineActionsContainer=
function(){const {inlineActions:v,menuActions:E}=this.dividedActions,G=!!v.length,S=!!E.length;return G||S?P.tsx("div",{key:"inline-actions-container","data-inline-actions":G.toString(),"data-menu-actions":S.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};Q.renderNavigation=function(){return this.featureNavigationVisible?P.tsx("section",{key:W("navigation"),class:this.classes("esri-popup__navigation")},
this.renderNavigationButtons()):null};Q.renderFooter=function(){const {featureNavigationVisible:v,dividedActions:E}=this,{inlineActions:G,menuActions:S}=E,da=!!G.length,fa={["esri-popup__footer--has-pagination"]:v,["esri-popup__footer--has-actions"]:da,["esri-popup__footer--has-actions-menu"]:!!S.length};return v||da?P.tsx("div",{key:W("feature-buttons"),class:this.classes("esri-popup__footer",fa)},this.renderInlineActionsContainer(),this.renderNavigation()):null};Q.renderFeatureMenuContainer=function(){var {messages:v}=
this;const {featureViewModels:E,isLoadingFeature:G}=this.viewModel;v=X.substitute(v.selectedFeatures,{total:E.length});return P.tsx("section",{key:W("menu"),class:"esri-popup__feature-menu"},P.tsx("strong",{class:"esri-popup__feature-menu-header"},v),P.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:T.storeNode},this.renderFeatureMenu(),P.tsx("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),
G?P.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))};Q.renderPointer=function(){return this.dockEnabled?null:P.tsx("div",{key:W("pointer"),class:"esri-popup__pointer",role:"presentation"},P.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};Q.renderMainContainer=function(){const {dockEnabled:v,currentAlignment:E,currentDockPosition:G,titleId:S,contentId:da,collapsible:fa,hasContent:la,contentCollapsed:na,visibleElements:oa}=
this,{title:sa}=this.viewModel,ta="bottom-left"===E||"bottom-center"===E||"bottom-right"===E||"top-left"===G||"top-center"===G||"top-right"===G,M="top-left"===E||"top-center"===E||"top-right"===E||"bottom-left"===G||"bottom-center"===G||"bottom-right"===G;return P.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:v,["esri-popup--is-collapsible"]:fa,["esri-popup--is-collapsed"]:na}),tabIndex:oa.closeButton?null:-1,role:"dialog","aria-labelledby":sa?S:
"","aria-describedby":la&&!na?da:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},ta?this.renderFooter():null,ta?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),M?this.renderFooter():null,M?this.renderFeatureMenuContainer():null)};Q.renderContent=function(){var v;const E=null==(v=this.viewModel)?void 0:v.content;return E?"string"===typeof E?P.tsx("div",{key:E,innerHTML:E}):this.renderNodeContent(E):
null};Q.renderActionText=function(v){return P.tsx("span",{key:"text",class:"esri-popup__action-text"},v)};Q.renderActionIcon=function(v){const E=this._getActionClass(v),G=this._getActionImage(v),S={["esri-icon-loading-indicator"]:v.active,["esri-rotating"]:v.active,["esri-popup__icon"]:!!E,["esri-popup__action-image"]:!v.active&&!!G};E&&(S[E]=!v.active);return P.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",S),styles:this._getIconStyles(G)})};Q.renderAction=function(v){const {action:E,
type:G}=v;v=this._getActionTitle(E);const S={["esri-popup__action"]:"toggle"!==E.type,["esri-popup__action-toggle"]:"toggle"===E.type,["esri-popup__action-toggle--on"]:"toggle"===E.type&&E.value,["esri-popup__button--disabled"]:E.disabled},da=[this.renderActionIcon(E),this.renderActionText(v)];v="menu-item"===G?P.tsx("li",{key:E.uid,role:"menuitem",tabIndex:0,title:v,"aria-label":v,class:this.classes("esri-popup__button",S),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":E.uid,
onclick:this._triggerAction,onkeydown:this._triggerAction},da):P.tsx("div",{key:E.uid,role:"button",tabIndex:0,title:v,"aria-label":v,class:this.classes("esri-popup__button",S),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":E.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},da);return E.visible?v:null};Q.renderFeatureMenuItem=function(v,E){const {messages:G,messagesCommon:S}=this,{selectedFeatureIndex:da,selectedFeatureViewModel:fa}=this.viewModel;var la=v===fa;
const na={["esri-popup__feature-menu-item--selected"]:la};la=la?P.tsx("span",{key:W(`feature-menu-selected-feature-${da}`),title:G.selectedFeature,"aria-label":G.selectedFeature,class:"esri-icon-check-mark"}):null;v=P.tsx("span",{innerHTML:v.title||S.untitled});return P.tsx("li",{role:"menuitem",tabIndex:-1,key:W(`feature-menu-feature-${da}`),class:this.classes(na,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":E,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,
onkeydown:this._selectFeature},P.tsx("span",{class:"esri-popup__feature-menu-title"},v,la))};Q.renderFeatureMenu=function(){const {featureMenuId:v}=this,{featureViewModels:E}=this.viewModel;return 1<E.length?P.tsx("ol",{class:"esri-popup__feature-menu-list",id:v,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},E.filter(G=>!!G.graphic).map((G,S)=>this.renderFeatureMenuItem(G,S))):null};Q._getActionTitle=function(v){const {messages:E,
selectedFeature:G,messagesCommon:S}=this,{id:da}=v,fa=null==G?void 0:G.attributes;return(v="zoom-to-feature"===da?X.substitute(v.title,{messages:E}):"remove-selected-feature"===da?X.substitute(v.title,{messages:S}):"zoom-to-clustered-features"===da?X.substitute(v.title,{messages:E}):"browse-clustered-features"===da?X.substitute(v.title,{messages:E}):v.title)&&fa?X.substitute(v,fa):v};Q._getActionClass=function(v){var {selectedFeature:E}=this;E=null==E?void 0:E.attributes;const {className:G,image:S}=
v;return(v=S||G?G:"esri-icon-default-action")&&E?X.substitute(v,E):v};Q._getActionImage=function(v){var {selectedFeature:E}=this;E=null==E?void 0:E.attributes;({image:v}=v);return v&&E?X.substitute(v,E):v};Q._createFeatureUpdatedAnimation=function(){return T.cssTransition("enter","esri-popup--feature-updated")};Q._getInlineActionCount=function(){const {maxInlineActions:v,featureNavigationVisible:E}=this;if("number"!==typeof v)return null;const G=Math.round(v);return Math.max(E?G-1:G,0)};Q._watchActions=
function(){const {allActions:v}=this.viewModel;this.notifyChange("dividedActions");this._handles.remove("actions");v&&v.forEach(E=>{this._handles.add(p.watch(E,"uid active className disabled id title image visible".split(" "),()=>this.scheduleRender()),"actions")})};Q._divideActions=function(){var {allActions:v}=this.viewModel;v=v.filter(da=>da.visible);const E=this._getInlineActionCount(),G=null===E,S=0===E;return{inlineActions:G?v.slice(0):S?new g:v.slice(0,E),menuActions:G?new g:S?v.slice(0):v.slice(E)}};
Q._featureMenuOpenChanged=function(v){v?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};Q._actionsMenuOpenChanged=function(v){v?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};Q._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:v,messagesCommon:E}=this;if(v){var G,S;this.viewModel.title="error"===(null==(G=v.viewModel)?void 0:G.state)?E.errorMessage:(null==(S=v.viewModel)?void 0:S.title)||""}};Q._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:v}=
this;v&&(this.viewModel.content=v)};Q._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};Q._featureMenuIntersectionObserverCreated=function(v){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(v);this._featureMenuIntersectionObserverNode=v};Q._handleFeatureMenuKeyup=function(v){"Escape"===q.eventKey(v)&&(v.stopPropagation(),this._focusFeatureMenuButton=
!0,this.featureMenuOpen=!1,this.scheduleRender())};Q._handleActionMenuKeyup=function(v){"Escape"===q.eventKey(v)&&(v.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};Q._handleFeatureMenuItemKeyup=function(v){const E=q.eventKey(v);var {_featureMenuNode:G}=this;const S=v.currentTarget["data-feature-index"];if(G){G=G.querySelectorAll("li");var da=G.length;"ArrowUp"===E?(v.stopPropagation(),G[(S-1+da)%da].focus()):"ArrowDown"===E?(v.stopPropagation(),G[(S+
1+da)%da].focus()):"Home"===E?(v.stopPropagation(),G[0].focus()):"End"===E&&(v.stopPropagation(),G[G.length-1].focus())}};Q._handleActionMenuItemKeyup=function(v){const E=q.eventKey(v);var {_actionsMenuNode:G}=this;const S=v.currentTarget.dataset.actionUid;var {menuActions:da}=this.dividedActions;da=da.findIndex(la=>la.uid===S);if(G){G=G.querySelectorAll("li");var fa=G.length;"ArrowUp"===E?(v.stopPropagation(),G[(da-1+fa)%fa].focus()):"ArrowDown"===E?(v.stopPropagation(),G[(da+1+fa)%fa].focus()):
"Home"===E?(v.stopPropagation(),G[0].focus()):"End"===E&&(v.stopPropagation(),G[G.length-1].focus())}};Q._handleMainKeyup=function(v){const E=q.eventKey(v);"ArrowLeft"===E&&(v.stopPropagation(),this.previous());"ArrowRight"===E&&(v.stopPropagation(),this.next())};Q._spinnerEnabledChange=function(v){this._destroySpinner();v&&(v=this.get("viewModel.view"),this._createSpinner(v))};Q._hideSpinner=function(){const {_spinner:v}=this;v&&(v.location=null,v.hide())};Q._displaySpinner=function(){const {_spinner:v}=
this;if(v){var {location:E,waitingForResult:G}=this.viewModel;G?v.show({location:E}):v.hide()}};Q._getIconStyles=function(v){return{"background-image":v?`url(${v})`:""}};Q._shouldFocus=function(){var v=e._asyncToGenerator(function*(E){E.shouldFocus&&(yield F.whenOnce(()=>{var G;return!0===(null==(G=this.viewModel)?void 0:G.active)}),this.focus())});return function(E){return v.apply(this,arguments)}}();Q._addSelectedFeatureIndexHandle=function(){const v=p.watch(this,"viewModel.selectedFeatureIndex",
(E,G)=>this._selectedFeatureIndexUpdated(E,G));this._handles.add(v,"selected-index")};Q._selectedFeatureIndexUpdated=function(v,E){const {featureCount:G}=this;G&&v!==E&&-1!==v&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};Q._destroySelectedFeatureWidget=function(){const {_feature:v}=this;v&&(v.viewModel=null,v&&!v.destroyed&&v.destroy());this._feature=null};Q._isScreenLocationWithinView=function(v,E){return-1<v.x&&-1<v.y&&v.x<=E.width&&v.y<=E.height};Q._isOutsideView=function(v){const {popupHeight:E,
popupWidth:G,screenLocation:S,side:da,view:fa}=v;if(isNaN(G)||isNaN(E)||!fa||!S)return!1;v=fa.padding;return"right"===da&&S.x+G/2>fa.width-v.right||"left"===da&&S.x-G/2<v.left||"top"===da&&S.y-E<v.top||"bottom"===da&&S.y+E>fa.height-v.bottom?!0:!1};Q._calculateAutoAlignment=function(v){if("auto"!==v)return v;const {_pointerOffsetInPx:E,_containerNode:G,_mainContainerNode:S,viewModel:da}=this,{screenLocation:fa,view:la}=da;if(D.isNone(fa)||!la||!G)return"top-center";if(!this._isScreenLocationWithinView(fa,
la))return this._get("currentAlignment")||"top-center";var na=(v=S?window.getComputedStyle(S,null):null)?parseInt(v.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,oa=v?parseInt(v.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:sa,width:ta}=G.getBoundingClientRect();v=ta+E;const M=Math.max(sa,na,oa)+E;na=this._isOutsideView({popupHeight:M,popupWidth:v,screenLocation:fa,side:"right",view:la});oa=this._isOutsideView({popupHeight:M,popupWidth:v,screenLocation:fa,side:"left",
view:la});const V=this._isOutsideView({popupHeight:M,popupWidth:v,screenLocation:fa,side:"top",view:la});v=this._isOutsideView({popupHeight:M,popupWidth:v,screenLocation:fa,side:"bottom",view:la});return oa?V?"bottom-right":"top-right":na?V?"bottom-left":"top-left":V?v?"top-center":"bottom-center":"top-center"};Q._callCurrentAlignment=function(v){return"function"===typeof v?v.call(this):v};Q._getCurrentAlignment=function(){const {alignment:v,dockEnabled:E}=this;return E||!this.viewModel.active?null:
this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(v)))};Q._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};Q._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};Q._calculatePositionResult=function(v){const E=["left","right"];T.isRTL(this.container)&&E.reverse();return v.replace(/leading/gi,E[0]).replace(/trailing/gi,E[1])};Q._callDockPosition=function(v){return"function"===
typeof v?v.call(this):v};Q._getDockPosition=function(){var v;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(v=this.dockOptions)?void 0:v.position)))};Q._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null};Q._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};Q._calculateAutoDockPosition=function(v){var E;if("auto"!==v)return v;v=null==(E=this.viewModel)?void 0:E.view;
E=T.isRTL(this.container)?"top-left":"top-right";if(!v)return E;var G=v.padding||{left:0,right:0,top:0,bottom:0};G=v.width-G.left-G.right;({breakpoints:v}=v);return v&&G<=v.xsmall?"bottom-center":E};Q._positionContainer=function(v=this._containerNode){v&&(this._containerNode=v);if(v){var {screenLocation:E}=this.viewModel,{width:G}=v.getBoundingClientRect();if(E=this._calculatePositionStyle(E,G))v.style.top=E.top,v.style.left=E.left,v.style.bottom=E.bottom,v.style.right=E.right}};Q._calculateFullWidth=
function(v){const {currentAlignment:E,_pointerOffsetInPx:G}=this;return"top-left"===E||"bottom-left"===E||"top-right"===E||"bottom-right"===E?v+G:v};Q._calculateAlignmentPosition=function(v,E,G,S){const {currentAlignment:da,_pointerOffsetInPx:fa}=this;S/=2;const la=G.height-E;G=G.width-v;const {padding:na}=this.view;if("bottom-center"===da)return{top:E+fa-na.top,left:v-S-na.left};if("top-left"===da)return{bottom:la+fa-na.bottom,right:G+fa-na.right};if("bottom-left"===da)return{top:E+fa-na.top,right:G+
fa-na.right};if("top-right"===da)return{bottom:la+fa-na.bottom,left:v+fa-na.left};if("bottom-right"===da)return{top:E+fa-na.top,left:v+fa-na.left};if("top-center"===da)return{bottom:la+fa-na.bottom,left:v-S-na.left}};Q._calculatePositionStyle=function(v,E){const {dockEnabled:G,view:S}=this;if(S){if(G)return{left:"",top:"",right:"",bottom:""};if(!D.isNone(v)&&E&&(E=this._calculateFullWidth(E),v=this._calculateAlignmentPosition(v.x,v.y,S,E)))return{top:void 0!==v.top?`${v.top}px`:"auto",left:void 0!==
v.left?`${v.left}px`:"auto",bottom:void 0!==v.bottom?`${v.bottom}px`:"auto",right:void 0!==v.right?`${v.right}px`:"auto"}}};Q._viewChange=function(v,E){v&&E&&(this.close(),this.clear())};Q._viewReadyChange=function(v,E){v?(v=this.get("viewModel.view"),this._wireUpView(v)):E&&(this.close(),this.clear())};Q._wireUpView=function(v){this._destroySpinner();if(v){var {spinnerEnabled:E}=this;E&&this._createSpinner(v);this._setDockEnabledForViewSize(this.dockOptions)}};Q._dockingThresholdCrossed=function(v,
E,G){const [S,da]=v,[fa,la]=E,{width:na,height:oa}=G;return S<=na&&fa>na||S>na&&fa<=na||da<=oa&&la>oa||da>oa&&la<=oa};Q._updateDockEnabledForViewSize=function(v,E){if(v&&E){var G=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},S=G.left+G.right,da=G.top+G.bottom;G=[];var fa=[];G[0]=v[0]-S;G[1]=v[1]-da;fa[0]=E[0]-S;fa[1]=E[1]-da;({dockOptions:v}=this);this._dockingThresholdCrossed(G,fa,v.breakpoint)&&this._setDockEnabledForViewSize(v);this._setCurrentDockPosition()}};Q._focusDockButtonNode=
function(v){this._focusDockButton&&(this._focusDockButton=!1,v.focus())};Q._closeButtonNodeUpdated=function(v){this._focusClose?(this._focusClose=!1,v.focus()):this._blurClose&&(this._blurClose=!1,v.blur())};Q._mainContainerNodeUpdated=function(v){this._mainContainerNode=v;this._focusContainer?(this._focusContainer=!1,v.focus()):this._blurContainer&&(this._blurContainer=!1,v.blur())};Q._featureMenuNodeUpdated=function(v){(this._featureMenuNode=v)&&this._focusFirstFeature&&(this._focusFirstFeature=
!1,v=v.querySelectorAll("li"),v.length&&v[0].focus())};Q._actionsMenuNodeUpdated=function(v){(this._actionsMenuNode=v)&&this._focusFirstAction&&(this._focusFirstAction=!1,v=v.querySelectorAll("li"),v.length&&v[0].focus())};Q._focusFeatureMenuButtonNode=function(v){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,v.focus())};Q._focusActionsMenuButtonNode=function(v){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,v.focus())};Q._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&
(this._featureMenuViewportNode.scrollTop=0)};Q._toggleScreenLocationEnabled=function(){const {dockEnabled:v,viewModel:E}=this;E&&(E.screenLocationEnabled=E.active&&!v)};Q._shouldDockAtCurrentViewSize=function(v){var E,G;v=v.breakpoint;const S=null==(E=this.viewModel)?void 0:null==(G=E.view)?void 0:G.ui;if(!S)return!1;const {width:da,height:fa}=S;if(isNaN(da)||isNaN(fa))return!1;E=v.hasOwnProperty("width")&&da<=v.width;G=v.hasOwnProperty("height")&&fa<=v.height;return E||G};Q._setDockEnabledForViewSize=
function(v){v.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(v))};Q._getPageText=function(v,E){return this.featureNavigationVisible?X.substitute(this.messages.pageText,{index:E+1,total:v}):null};Q._destroySpinner=function(){const {_spinner:v,view:E}=this;v&&(E&&E.ui&&E.ui.remove(this._spinner,"popup-spinner"),v.destroy(),this._spinner=null)};Q._createSpinner=function(v){v&&(this._spinner=new r({view:v}),v.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};Q._toggleCollapsed=
function(){this.collapsed=!this.collapsed};Q._close=function(){this.close();this.view&&this.view.focus()};Q._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};Q._toggleFeatureMenu=function(){const v=!this.featureMenuOpen;this._featureMenuOpenChanged(v);this.actionsMenuOpen=!1;this.featureMenuOpen=v};Q._toggleActionsMenu=function(){const v=!this.actionsMenuOpen;this._actionsMenuOpenChanged(v);this.featureMenuOpen=!1;this.actionsMenuOpen=
v};Q._triggerAction=function(v){const E=v.currentTarget.dataset.actionUid;var {allActions:G}=this.viewModel;v=G.findIndex(S=>S.uid===E);(G=G.getItemAt(v))&&"toggle"===G.type&&(G.value=!G.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(v)};Q._selectFeature=function(v){v=v.currentTarget["data-feature-index"];isNaN(v)||(this.viewModel.selectedFeatureIndex=v);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};Q._next=function(){this.next()};Q._previous=function(){this.previous()};
e._createClass(N,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){var v,E,G,S,da,fa,la;return!!(this.selectedFeatureWidget?(null==(v=this.selectedFeatureWidget)?0:
null==(E=v.viewModel)?0:E.waitingForContent)||"error"===(null==(G=this.selectedFeatureWidget)?void 0:null==(S=G.viewModel)?void 0:S.state)||(null==(da=this.selectedFeatureWidget)?0:null==(fa=da.viewModel)?0:fa.content):null==(la=this.viewModel)?0:la.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},
{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?this._get("actionsMenuOpen"):!1},set:function(v){this._set("actionsMenuOpen",!!v)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},
{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||L},set:function(v){var E={...L};const G=this.get("viewModel.view.breakpoints");var S={};G&&(S.width=G.xsmall,S.height=G.xsmall);v={...E,...v};E={...E.breakpoint,...S};({breakpoint:S}=v);!0===S?v.breakpoint=E:"object"===typeof S&&(v.breakpoint={...E,...S});this._set("dockOptions",v);this._setCurrentDockPosition();this.reposition()}},{key:"selectedFeatureWidget",
get:function(){const {_feature:v,visibleElements:E,headingLevel:G}=this,{selectedFeatureViewModel:S}=this.viewModel,da={...E,title:!1};if(!S)return null;v?(v.viewModel=S,v.visibleElements=da):this._feature=new t({headingLevel:G+1,viewModel:S,visibleElements:da});return this._feature}}]);return N}(C.FeatureContentMixin(u));l.__decorate([b.property({readOnly:!0})],k.prototype,"actionsMenuId",null);l.__decorate([b.property({readOnly:!0})],k.prototype,"actionsMenuButtonId",null);l.__decorate([b.property({readOnly:!0})],
k.prototype,"featureMenuId",null);l.__decorate([b.property({readOnly:!0})],k.prototype,"titleId",null);l.__decorate([b.property({readOnly:!0})],k.prototype,"contentId",null);l.__decorate([b.property({readOnly:!0})],k.prototype,"hasContent",null);l.__decorate([b.property({readOnly:!0})],k.prototype,"featureNavigationVisible",null);l.__decorate([b.property({readOnly:!0})],k.prototype,"collapsible",null);l.__decorate([b.property({readOnly:!0})],k.prototype,"featureMenuVisible",null);l.__decorate([b.property({readOnly:!0})],
k.prototype,"contentCollapsed",null);l.__decorate([b.property({readOnly:!0})],k.prototype,"dividedActions",null);l.__decorate([d.aliasOf("viewModel.actions")],k.prototype,"actions",void 0);l.__decorate([b.property()],k.prototype,"actionsMenuOpen",null);l.__decorate([b.property()],k.prototype,"alignment",void 0);l.__decorate([d.aliasOf("viewModel.autoCloseEnabled")],k.prototype,"autoCloseEnabled",void 0);l.__decorate([d.aliasOf("viewModel.autoOpenEnabled")],k.prototype,"autoOpenEnabled",void 0);l.__decorate([d.aliasOf("viewModel.defaultPopupTemplateEnabled")],
k.prototype,"defaultPopupTemplateEnabled",void 0);l.__decorate([d.aliasOf("viewModel.content")],k.prototype,"content",void 0);l.__decorate([b.property()],k.prototype,"collapsed",void 0);l.__decorate([b.property()],k.prototype,"collapseEnabled",void 0);l.__decorate([b.property({readOnly:!0})],k.prototype,"currentAlignment",null);l.__decorate([b.property({readOnly:!0})],k.prototype,"currentDockPosition",null);l.__decorate([b.property()],k.prototype,"dockOptions",null);l.__decorate([b.property()],k.prototype,
"dockEnabled",void 0);l.__decorate([d.aliasOf("viewModel.featureCount")],k.prototype,"featureCount",void 0);l.__decorate([b.property()],k.prototype,"featureMenuOpen",void 0);l.__decorate([d.aliasOf("viewModel.features")],k.prototype,"features",void 0);l.__decorate([d.aliasOf("viewModel.goToOverride")],k.prototype,"goToOverride",void 0);l.__decorate([b.property()],k.prototype,"headingLevel",void 0);l.__decorate([d.aliasOf("viewModel.highlightEnabled")],k.prototype,"highlightEnabled",void 0);l.__decorate([d.aliasOf("viewModel.location")],
k.prototype,"location",void 0);l.__decorate([b.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);l.__decorate([b.property()],k.prototype,"maxInlineActions",void 0);l.__decorate([b.property(),B.messageBundle("esri/widgets/Popup/t9n/Popup")],k.prototype,"messages",void 0);l.__decorate([b.property(),B.messageBundle("esri/t9n/common")],k.prototype,"messagesCommon",void 0);l.__decorate([d.aliasOf("viewModel.promises")],k.prototype,"promises",void 0);l.__decorate([d.aliasOf("viewModel.selectedFeature")],
k.prototype,"selectedFeature",void 0);l.__decorate([d.aliasOf("viewModel.selectedFeatureIndex")],k.prototype,"selectedFeatureIndex",void 0);l.__decorate([b.property({readOnly:!0})],k.prototype,"selectedFeatureWidget",null);l.__decorate([b.property()],k.prototype,"spinnerEnabled",void 0);l.__decorate([d.aliasOf("viewModel.title")],k.prototype,"title",void 0);l.__decorate([d.aliasOf("viewModel.updateLocationEnabled")],k.prototype,"updateLocationEnabled",void 0);l.__decorate([d.aliasOf("viewModel.view")],
k.prototype,"view",void 0);l.__decorate([b.property({type:I}),K.vmEvent(["triggerAction","trigger-action"])],k.prototype,"viewModel",void 0);l.__decorate([d.aliasOf("viewModel.visible")],k.prototype,"visible",void 0);l.__decorate([b.property()],k.prototype,"visibleElements",void 0);l.__decorate([h.cast("visibleElements")],k.prototype,"castVisibleElements",null);l.__decorate([f.accessibleHandler()],k.prototype,"_close",null);l.__decorate([f.accessibleHandler()],k.prototype,"_toggleDockEnabled",null);
l.__decorate([f.accessibleHandler()],k.prototype,"_toggleFeatureMenu",null);l.__decorate([f.accessibleHandler()],k.prototype,"_toggleActionsMenu",null);l.__decorate([f.accessibleHandler()],k.prototype,"_triggerAction",null);l.__decorate([f.accessibleHandler()],k.prototype,"_selectFeature",null);l.__decorate([f.accessibleHandler()],k.prototype,"_next",null);l.__decorate([f.accessibleHandler()],k.prototype,"_previous",null);return k=l.__decorate([n.subclass("esri.widgets.Popup")],k)})},"esri/core/throttle":function(){define(["exports"],
function(e){e.throttle=function(l,k,g,q){let x=null,y=1E3;"number"===typeof k?(y=k,q=g):(x=null!=k?k:null,y=g);let D=0,F;const z=()=>{D=0;l.apply(q,F)};k=(...p)=>{x&&x.apply(q,p);F=p;y?D||(D=setTimeout(z,y)):z()};k.remove=()=>{D&&(clearTimeout(D),D=0)};k.forceUpdate=()=>{D&&(clearTimeout(D),z())};k.hasPendingUpdates=()=>!!D;return k};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ../intl/substitute".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n,t,r,u,C,I,w,f,B){const K={title:!0,content:!0,lastEditedInfo:!0};g=function(P){function T(W,L){W=P.call(this,W,L)||this;W._contentWidgets=[];W.graphic=null;W.defaultPopupTemplateEnabled=!1;W.headingLevel=2;W.label=void 0;W.messages=null;W.messagesCommon=null;W.messagesURIUtils=null;W.spatialReference=null;W.title=null;W.visibleElements={...K};W.map=null;W.view=null;W.viewModel=new t;return W}l._inheritsLoose(T,P);var X=T.prototype;X.initialize=function(){this.own(q.init(this,
"viewModel.contentViewModels",()=>this._setupContentWidgets()))};X.loadDependencies=function(){return new Promise((W,L)=>e(["../chunks/calcite-notice"],W,L))};X.destroy=function(){this._destroyContentWidgets()};X.castVisibleElements=function(W){return{...K,...W}};X.render=function(){var {state:W}=this.viewModel;W=f.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===W?this.renderError():"loading"===W?this.renderLoading():this.renderContentContainer());return f.tsx("div",
{class:this.classes("esri-feature","esri-widget")},W)};X.setActiveMedia=function(W,L){this.viewModel.setActiveMedia(W,L)};X.nextMedia=function(W){this.viewModel.nextMedia(W)};X.previousMedia=function(W){this.viewModel.previousMedia(W)};X.renderError=function(){const {messagesCommon:W,messages:L,visibleElements:R}=this;return f.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},R.title?f.tsx("div",{key:"error-title",slot:"title"},W.errorMessage):null,f.tsx("div",
{key:"error-message",slot:"message"},L.loadingError))};X.renderLoading=function(){return f.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},f.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};X.renderContentContainer=function(){const {visibleElements:W}=this;return W.content?f.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null};X.renderTitle=function(){const {visibleElements:W,
title:L}=this;return W.title?f.tsx(u.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:L}):null};X.renderContent=function(){var W=this.viewModel.content;return W?Array.isArray(W)?W.length?f.tsx("div",{key:"content-content-elements"},W.map(this.renderContentElement,this)):null:"string"===typeof W?(W=this._contentWidgets[0],!W||W.destroyed?null:f.tsx("div",{key:"content-content"},W.render())):this.renderNodeContent(W):null};X.renderContentElement=function(W,L){const {visibleElements:R}=
this;if("boolean"!==typeof R.content&&!R.content[W.type])return null;switch(W.type){case "attachments":return this.renderAttachments(L);case "custom":return this.renderCustom(W,L);case "fields":return this.renderFields(L);case "media":return this.renderMedia(L);case "text":return this.renderText(W,L);case "expression":return this.renderExpression(L);default:return null}};X.renderAttachments=function(W){const L=this._contentWidgets[W];if(!L||L.destroyed)return null;const {state:R,attachmentInfos:aa}=
L.viewModel;return"loading"===R||0<aa.length?f.tsx("div",{key:this._buildKey("attachments-element",W),class:this.classes("esri-feature__content-element")},L.render()):null};X.renderExpression=function(W){const L=this._contentWidgets[W];return!L||L.destroyed?null:f.tsx("div",{key:this._buildKey("expression-element",W),class:"esri-feature__content-element"},L.render())};X.renderCustom=function(W,L){({creator:W}=W);const R=this._contentWidgets[L];return!R||R.destroyed?null:W?f.tsx("div",{key:this._buildKey("custom-element",
L),class:"esri-feature__content-element"},R.render()):null};X.renderFields=function(W){const L=this._contentWidgets[W];return!L||L.destroyed?null:f.tsx("div",{key:this._buildKey("fields-element",W),class:"esri-feature__content-element"},L.render())};X.renderMedia=function(W){const L=this._contentWidgets[W];return!L||L.destroyed?null:f.tsx("div",{key:this._buildKey("media-element",W),class:"esri-feature__content-element"},L.render())};X.renderLastEditInfo=function(){const {visibleElements:W,messages:L}=
this;var {lastEditInfo:R}=this.viewModel;if(!R||!W.lastEditedInfo)return null;const {date:aa,user:H}=R;R=B.substitute("edit"===R.type?H?L.lastEditedByUser:L.lastEdited:H?L.lastCreatedByUser:L.lastCreated,{date:aa,user:H});return f.tsx("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},R)};X.renderText=function(W,L){const R=this._contentWidgets[L];return!R||R.destroyed?null:W.text?f.tsx("div",{key:this._buildKey("text-element",L),class:this.classes("esri-feature__content-element",
"esri-feature__text")},R.render()):null};X._buildKey=function(W,...L){const R=this.get("viewModel.graphic.uid")||"0";L=L.join("-");return`${W}__${R}-${L}`};X._destroyContentWidget=function(W){W&&(W.viewModel=null,!W.destroyed&&W.destroy())};X._destroyContentWidgets=function(){this._contentWidgets.forEach(W=>this._destroyContentWidget(W));this._contentWidgets=[]};X._setupContentWidgets=function(){this._destroyContentWidgets();const {headingLevel:W,visibleElements:L}=this;var R=this.get("viewModel.content");
const {contentViewModels:aa}=this.viewModel;Array.isArray(R)?R.forEach((H,N)=>{"attachments"===H.type&&(this._contentWidgets[N]=new c({displayType:H.displayType,headingLevel:L.title?W+1:W,viewModel:aa[N]}));"fields"===H.type&&(this._contentWidgets[N]=new b({viewModel:aa[N]}));"media"===H.type&&(this._contentWidgets[N]=new n({viewModel:aa[N]}));"text"===H.type&&(this._contentWidgets[N]=new m({viewModel:aa[N]}));"custom"===H.type&&(this._contentWidgets[N]=new m({viewModel:aa[N]}));"expression"===H.type&&
(this._contentWidgets[N]=new h({viewModel:aa[N]}))},this):(R=aa[0])&&!R.destroyed&&(this._contentWidgets[0]=new m({viewModel:R}));this.scheduleRender()};return T}(r.FeatureContentMixin(d));k.__decorate([x.aliasOf("viewModel.graphic")],g.prototype,"graphic",void 0);k.__decorate([x.aliasOf("viewModel.defaultPopupTemplateEnabled")],g.prototype,"defaultPopupTemplateEnabled",void 0);k.__decorate([z.property()],g.prototype,"headingLevel",void 0);k.__decorate([z.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],g.prototype,"label",void 0);k.__decorate([z.property(),I.messageBundle("esri/widgets/Feature/t9n/Feature")],g.prototype,"messages",void 0);k.__decorate([z.property(),I.messageBundle("esri/t9n/common")],g.prototype,"messagesCommon",void 0);k.__decorate([z.property(),I.messageBundle("esri/widgets/support/t9n/uriUtils")],g.prototype,"messagesURIUtils",void 0);k.__decorate([x.aliasOf("viewModel.spatialReference")],g.prototype,"spatialReference",void 0);k.__decorate([x.aliasOf("viewModel.title")],
g.prototype,"title",void 0);k.__decorate([z.property()],g.prototype,"visibleElements",void 0);k.__decorate([F.cast("visibleElements")],g.prototype,"castVisibleElements",null);k.__decorate([x.aliasOf("viewModel.map")],g.prototype,"map",void 0);k.__decorate([x.aliasOf("viewModel.view")],g.prototype,"view",void 0);k.__decorate([z.property({type:t})],g.prototype,"viewModel",void 0);return g=k.__decorate([p.subclass("esri.widgets.Feature")],g)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b){q=function(n){function t(u,C){u=n.call(this,u,C)||this;u._featureElementInfo=null;u.attachmentsWidget=new z;u.description=null;u.displayType=null;u.graphic=null;u.headingLevel=2;u.title=null;u.viewModel=new d;return u}e._inheritsLoose(t,n);var r=t.prototype;r.initialize=function(){this._featureElementInfo=new c;k.init(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo());k.init(this,"viewModel.graphic",u=>this.attachmentsWidget.graphic=
u)};r.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};r.render=function(){var u;const {attachmentsWidget:C}=this;return b.tsx("div",{class:"esri-feature-attachments"},null==(u=this._featureElementInfo)?void 0:u.render(),null==C?void 0:C.render())};r._setupFeatureElementInfo=function(){const {description:u,title:C,headingLevel:I}=this;this._featureElementInfo.set({description:u,title:C,headingLevel:I})};return t}(p);l.__decorate([D.property({readOnly:!0})],q.prototype,
"attachmentsWidget",void 0);l.__decorate([g.aliasOf("viewModel.description")],q.prototype,"description",void 0);l.__decorate([g.aliasOf("attachmentsWidget.displayType")],q.prototype,"displayType",void 0);l.__decorate([g.aliasOf("viewModel.graphic")],q.prototype,"graphic",void 0);l.__decorate([D.property()],q.prototype,"headingLevel",void 0);l.__decorate([g.aliasOf("viewModel.title")],q.prototype,"title",void 0);l.__decorate([D.property({type:d})],q.prototype,"viewModel",void 0);return q=l.__decorate([F.subclass("esri.widgets.Feature.FeatureAttachments")],
q)})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/unitFormatUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n,t){const r={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},u=window.CSS;y=function(C){function I(f,B){f=C.call(this,f,B)||this;f.abilities=null;f.displayType="auto";f.graphic=null;f.label=void 0;f.messages=null;f.messagesUnits=null;f.selectedFile=null;f.submitting=!1;f.viewModel=new c;f.visibleElements={...r};f._supportsImageOrientation=u&&u.supports&&u.supports("image-orientation",
"from-image");f._addAttachmentForm=null;f._updateAttachmentForm=null;return f}e._inheritsLoose(I,C);var w=I.prototype;w.initialize=function(){this.own(q.on(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),q.init(this,"viewModel.mode",()=>this._modeChanged()))};w.castVisibleElements=function(f){return{...r,...f}};w.addAttachment=function(){const {_addAttachmentForm:f,viewModel:B}=this;this._set("submitting",!0);this._set("error",null);return B.addAttachment(f).then(K=>{this._set("submitting",
!1);this._set("error",null);B.mode="view";return K}).catch(K=>{this._set("submitting",!1);this._set("error",new k("attachments:add-attachment",this.messages.addErrorMessage,K));throw K;})};w.deleteAttachment=function(f){const {viewModel:B}=this;this._set("submitting",!0);this._set("error",null);return B.deleteAttachment(f).then(K=>{this._set("submitting",!1);this._set("error",null);B.mode="view";return K}).catch(K=>{this._set("submitting",!1);this._set("error",new k("attachments:delete-attachment",
this.messages.deleteErrorMessage,K));throw K;})};w.updateAttachment=function(){const {viewModel:f}=this,{_updateAttachmentForm:B}=this;this._set("submitting",!0);this._set("error",null);return f.updateAttachment(B).then(K=>{this._set("submitting",!1);this._set("error",null);f.mode="view";return K}).catch(K=>{this._set("submitting",!1);this._set("error",new k("attachments:update-attachment",this.messages.updateErrorMessage,K));throw K;})};w.render=function(){const {submitting:f,viewModel:B}=this,{state:K}=
B;return t.tsx("div",{class:this.classes("esri-attachments","esri-widget")},f?this.renderProgressBar():null,"loading"===K?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};w.renderErrorMessage=function(){const {error:f,visibleElements:B}=this;return f&&B.errorMessage?t.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},f.message):null};w.renderAttachments=function(){const {mode:f,activeAttachmentInfo:B}=this.viewModel;return"add"===f?this.renderAddForm():
"edit"===f?this.renderDetailsForm(B):this.renderAttachmentContainer()};w.renderLoading=function(){return t.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},t.tsx("div",{class:"esri-attachments__loader"}))};w.renderProgressBar=function(){return this.visibleElements.progressBar?t.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};w.renderAddForm=function(){const {submitting:f,selectedFile:B}=this;var K=f||!B,P=this.visibleElements.cancelAddButton?t.tsx("button",
{type:"button",bind:this,disabled:f,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",f&&"esri-button--disabled")},this.messages.cancel):null;K=this.visibleElements.addSubmitButton?t.tsx("button",{type:"submit",disabled:K,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:K})},this.messages.add):null;const T=B?t.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},
B.name):null;P=t.tsx("form",{bind:this,afterCreate:h.storeNode,afterRemoved:h.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},t.tsx("fieldset",{class:"esri-attachments__file-fieldset"},T,t.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},B?this.messages.changeFile:this.messages.selectFile,t.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),
K,P);return t.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},P)};w.renderDetailsForm=function(f){const {visibleElements:B,viewModel:K,selectedFile:P,submitting:T}=this,{contentType:X,size:W,url:L}=f;var {abilities:R}=K,aa=T||!P,H=R.editing&&R.operations.delete&&B.deleteButton?t.tsx("button",{key:"delete-button",type:"button",disabled:T,bind:this,onclick:E=>this._submitDeleteAttachment(E,f),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",
{["esri-button--disabled"]:T})},this.messages.delete):null;aa=R.editing&&R.operations.update&&B.updateButton?t.tsx("button",{disabled:aa,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:aa})},this.messages.update):null;const N=this.visibleElements.cancelUpdateButton?t.tsx("button",{disabled:T,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small",
"esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:T})},this.messages.cancel):null;var Q=P?t.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},P.name):null;R=R.editing&&R.operations.update?t.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},Q,t.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,t.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",
bind:this,onchange:this._handleFileInputChange}))):null;Q=t.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},t.tsx("label",null,g.formatFileSize(this.messagesUnits,W)));const v=t.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},t.tsx("label",null,X));H=t.tsx("form",{bind:this,afterCreate:h.storeNode,afterRemoved:h.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},t.tsx("div",{class:"esri-attachments__metadata"},
Q,v),R,t.tsx("div",{class:"esri-attachments__actions"},H,N,aa));return t.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},t.tsx("a",{class:"esri-attachments__item-link",href:L,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:f,size:400}),t.tsx("div",{class:"esri-attachments__item-link-overlay"},t.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},t.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},t.tsx("path",
{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),t.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),H)};w.renderImageMask=function({attachmentInfo:f,size:B}){var {supportsResizeAttachments:K}=this.viewModel;const {contentType:P,name:T,url:X}=f,W=K&&m.isSupportedImage(P);f=(f=this._getCSSTransform(f,W))?{transform:f,"image-orientation":"none"}:{};const L=-1===X.indexOf("?")?"?":"\x26";B=W?`${X}${L}w=${B}`:m.getIconPath(P);K={["esri-attachments__image--resizable"]:K};
return t.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!W},"esri-attachments__item-mask")},t.tsx("img",{styles:f,alt:T,src:B,class:this.classes(K,"esri-attachments__image")}))};w.renderAttachmentInfo=function({attachmentInfo:f,displayType:B}){var {viewModel:K}=this;({abilities:K}=K);const {name:P,url:T}=f;B=this.renderImageMask({attachmentInfo:f,size:"list"===B?48:400});var X=K.editing?t.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",
h.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;X=t.tsx("label",{class:"esri-attachments__label"},t.tsx("span",{class:"esri-attachments__filename"},P||this.messages.noTitle),X);B=[B,X];K=K.editing?t.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":f.id,onclick:()=>this._startEditAttachment(f),type:"button"},B):t.tsx("a",{key:"details-link",
class:"esri-attachments__item-button",href:T,target:"_blank"},B);return t.tsx("li",{class:"esri-attachments__item",key:f},K)};w.renderAttachmentContainer=function(){const {effectiveDisplayType:f,viewModel:B,visibleElements:K}=this,{attachmentInfos:P,abilities:T}=B;var X=P&&P.length;const W={["esri-attachments__container--list"]:"preview"!==f,["esri-attachments__container--preview"]:"preview"===f},L=T.editing&&T.operations.add&&K.addButton?t.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),
class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},t.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;X=X?t.tsx("ul",{class:"esri-attachments__items"},P.toArray().map(R=>this.renderAttachmentInfo({attachmentInfo:R,displayType:f}))):t.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return t.tsx("div",{key:"attachments-container",
class:this.classes("esri-attachments__container",W)},X,L)};w._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};w._handleFileInputChange=function(f){f=(f=f.target)&&f.files&&f.files.item(0);this._set("selectedFile",f)};w._submitDeleteAttachment=function(f,B){f.preventDefault();this.deleteAttachment(B)};w._submitAddAttachment=function(f){f.preventDefault();this.addAttachment()};w._submitUpdateAttachment=function(f){f.preventDefault();this.updateAttachment()};w._startEditAttachment=
function(f){const {viewModel:B}=this;B.activeAttachmentInfo=f;B.mode="edit"};w._startAddAttachment=function(){this.viewModel.mode="add"};w._cancelForm=function(f){f.preventDefault();this.viewModel.mode="view"};w._getCSSTransform=function(f,B){({orientationInfo:f}=f);return!this._supportsImageOrientation&&B&&f?[f.rotation?`rotate(${f.rotation}deg)`:"",f.mirrored?"scaleX(-1)":""].join(" "):""};e._createClass(I,[{key:"effectiveDisplayType",get:function(){const {displayType:f}=this;return f&&"auto"!==
f?f:this.viewModel.supportsResizeAttachments?"preview":"list"}}]);return I}(d);l.__decorate([x.aliasOf("viewModel.abilities")],y.prototype,"abilities",void 0);l.__decorate([z.property()],y.prototype,"displayType",void 0);l.__decorate([z.property({readOnly:!0})],y.prototype,"effectiveDisplayType",null);l.__decorate([x.aliasOf("viewModel.graphic")],y.prototype,"graphic",void 0);l.__decorate([z.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],y.prototype,"label",void 0);l.__decorate([z.property(),
b.messageBundle("esri/widgets/Attachments/t9n/Attachments")],y.prototype,"messages",void 0);l.__decorate([z.property(),b.messageBundle("esri/core/t9n/Units")],y.prototype,"messagesUnits",void 0);l.__decorate([z.property({readOnly:!0})],y.prototype,"selectedFile",void 0);l.__decorate([z.property({readOnly:!0})],y.prototype,"submitting",void 0);l.__decorate([z.property({readOnly:!0})],y.prototype,"error",void 0);l.__decorate([z.property({type:c})],y.prototype,"viewModel",void 0);l.__decorate([z.property()],
y.prototype,"visibleElements",void 0);l.__decorate([F.cast("visibleElements")],y.prototype,"castVisibleElements",null);return y=l.__decorate([p.subclass("esri.widgets.Attachments")],y)})},"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./mathUtils ./string ./unitUtils ../intl/number".split(" "),function(e,l,k,g,q,x){function y(z,p,d){return z.units[p][d]}function D(z,p,d,c=2,m="abbr"){return`${x.formatNumber(p,{minimumFractionDigits:c,maximumFractionDigits:c})} ${y(z,
d,m)}`}const F=["B","kB","MB","GB","TB"];e.formatAngleDegrees=function(z,p,d=2){z=q.convertUnit(z,p,"degrees");return x.formatNumber(z,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:d,minimumFractionDigits:d})};e.formatDMS=function(z,p,d=2){z=q.convertUnit(z,p,"degrees");p=z-Math.floor(z);z-=p;p*=60;let c=p-Math.floor(p);p-=c;c*=60;return`${z.toFixed()}\u00b0 ${p.toFixed()}' ${c.toFixed(d)}"`};e.formatDecimal=D;e.formatFileSize=function(z,p){let d=0===p?0:Math.floor(Math.log(p)/
Math.log(l.ByteSizeUnit.KILOBYTES));d=k.clamp(d,0,F.length-1);p=x.formatNumber(p/l.ByteSizeUnit.KILOBYTES**d,{maximumFractionDigits:2});return g.replace(z.units.bytes[F[d]],{fileSize:p})};e.formatImperialArea=function(z,p,d,c=2,m="abbr"){const h=q.preferredImperialAreaUnit(p,d);return D(z,q.convertUnit(p,d,h),h,c,m)};e.formatImperialLength=function(z,p,d,c=2,m="abbr"){const h=q.preferredImperialLengthUnit(p,d);return D(z,q.convertUnit(p,d,h),h,c,m)};e.formatImperialVerticalLength=function(z,p,d,c=
2,m="abbr"){const h=q.preferredImperialVerticalLengthUnit(p,d);return D(z,q.convertUnit(p,d,h),h,c,m)};e.formatMetricArea=function(z,p,d,c=2,m="abbr"){const h=q.preferredMetricAreaUnit(p,d);return D(z,q.convertUnit(p,d,h),h,c,m)};e.formatMetricLength=function(z,p,d,c=2,m="abbr"){const h=q.preferredMetricLengthUnit(p,d);return D(z,q.convertUnit(p,d,h),h,c,m)};e.formatMetricVerticalLength=function(z,p,d,c=2,m="abbr"){const h=q.preferredMetricVerticalLengthUnit(p,d);return D(z,q.convertUnit(p,d,h),h,
c,m)};e.unitName=y;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(e){function l(k){return 32+k.length}e.ByteSizeUnit=void 0;(function(k){k[k.KILOBYTES=1024]="KILOBYTES";k[k.MEGABYTES=1048576]="MEGABYTES";k[k.GIGABYTES=1073741824]="GIGABYTES"})(e.ByteSizeUnit||(e.ByteSizeUnit={}));e.estimateAttributesObjectSize=function(k){if(!k)return 0;let g=32;for(const q in k)if(k.hasOwnProperty(q)){const x=k[q];switch(typeof x){case "string":g+=
l(x);break;case "number":g+=16;break;case "boolean":g+=4}}return g};e.estimateFixedArraySize=function(k,g){return 32+k.length*g};e.estimateNumberByteSize=function(){return 16};e.estimateStringByteSize=l;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b){const n={editing:!1,operations:{add:!0,update:!0,delete:!0}},t=g.ofType(m);g=function(r){function u(I){var w=r.call(this,I)||this;w._getAttachmentsPromise=null;w._attachmentLayer=null;w.abilities={...n};w.activeAttachmentInfo=null;w.attachmentInfos=new t;w.graphic=null;w.mode="view";w.handles.add([D.init(e._assertThisInitialized(w),"graphic",()=>w._graphicChanged())]);return w}e._inheritsLoose(u,r);var C=u.prototype;C.destroy=function(){this.graphic=this._attachmentLayer=
null};C.castAbilities=function(I){return{...n,...I}};C.getAttachments=function(){var I=e._asyncToGenerator(function*(){const {_attachmentLayer:w,attachmentInfos:f}=this;if(!w||"function"!==typeof w.queryAttachments)throw new q("invalid-layer","getAttachments(): A valid layer is required.");const B=this._getFeatureId();var K=new h({objectIds:[B],returnMetadata:!0});const P=[];this._getAttachmentsPromise=K=w.queryAttachments(K).then(T=>T[B]||P).catch(()=>P);this.notifyChange("state");K=yield K;f.removeAll();
K.length&&f.addMany(K);this._getAttachmentsPromise=null;this.notifyChange("state");return K});return function(){return I.apply(this,arguments)}}();C.addAttachment=function(){var I=e._asyncToGenerator(function*(w){const {_attachmentLayer:f,attachmentInfos:B,graphic:K,abilities:P}=this;if(!w)throw new q("invalid-attachment","addAttachment(): An attachment is required.",{attachment:w});if(!P.operations.add)throw new q("invalid-abilities","addAttachment(): add abilities are required.");if(!f||"function"!==
typeof f.addAttachment)throw new q("invalid-layer","addAttachment(): A valid layer is required.");w=yield f.addAttachment(K,w).then(T=>this._queryAttachment(T.objectId));B.add(w);return w});return function(w){return I.apply(this,arguments)}}();C.deleteAttachment=function(){var I=e._asyncToGenerator(function*(w){const {_attachmentLayer:f,attachmentInfos:B,graphic:K,abilities:P}=this;if(!w)throw new q("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:w});
if(!P.operations.delete)throw new q("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!f||"function"!==typeof f.deleteAttachments)throw new q("invalid-layer","deleteAttachment(): A valid layer is required.");const T=yield f.deleteAttachments(K,[w.id]).then(()=>w);B.remove(T);return T});return function(w){return I.apply(this,arguments)}}();C.updateAttachment=function(){var I=e._asyncToGenerator(function*(w,f=this.activeAttachmentInfo){const {_attachmentLayer:B,attachmentInfos:K,
graphic:P,abilities:T}=this;if(!w)throw new q("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:w});if(!f)throw new q("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:f});if(!T.operations.update)throw new q("invalid-abilities","updateAttachment(): Update abilities are required.");const X=K.findIndex(W=>W===f);if(!B||"function"!==typeof B.updateAttachment)throw new q("invalid-layer","updateAttachment(): A valid layer is required.");
w=yield B.updateAttachment(P,f.id,w).then(W=>this._queryAttachment(W.objectId));K.splice(X,1,w);return w});return function(w){return I.apply(this,arguments)}}();C._queryAttachment=function(){var I=e._asyncToGenerator(function*(w){if(!w)throw new q("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:f}=this,B=this._getFeatureId();w=new h({objectIds:[B],attachmentsWhere:`AttachmentId=${w}`,returnMetadata:!0});return f.queryAttachments(w).then(K=>K[B][0])});return function(w){return I.apply(this,
arguments)}}();C._getFeatureId=function(){const {_attachmentLayer:I,graphic:w}=this;if(!I||!w)return null;const {objectIdField:f}=I,{attributes:B}=w;return B&&B[f]};C._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};C._setAttachmentLayer=function(){var {graphic:I}=this;this._attachmentLayer=(I=b.getSourceLayer(I))?"scene"===I.type&&y.isSome(I.associatedLayer)?I.associatedLayer:I:null};e._createClass(u,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return u}(x.HandleOwner);l.__decorate([F.property()],g.prototype,"abilities",void 0);l.__decorate([d.cast("abilities")],g.prototype,"castAbilities",null);l.__decorate([F.property()],g.prototype,"activeAttachmentInfo",void 0);l.__decorate([F.property({readOnly:!0,type:t})],g.prototype,"attachmentInfos",void 0);l.__decorate([F.property({type:k})],
g.prototype,"graphic",void 0);l.__decorate([F.property()],g.prototype,"mode",void 0);l.__decorate([F.property({readOnly:!0})],g.prototype,"state",null);l.__decorate([F.property({readOnly:!0})],g.prototype,"supportsResizeAttachments",null);return g=l.__decorate([c.subclass("esri.widgets.Attachments.AttachmentsViewModel")],g)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p){function d(){d=l._asyncToGenerator(function*(M,V){return"function"===typeof M?M.call(null,V):M});return d.apply(this,arguments)}function c(M){return M?S.test(M):!1}function m(M,V){if(!c(V)||!M)return null;const ca=V.replace(S,"").toLowerCase();let ha;M.some(ka=>ka.name.toLowerCase()===ca?(ha=ka,!0):!1);return ha}function h(M,V){return(V=b(V,M))?V.name:M}function b(M,V){return M&&"function"===typeof M.getField?M.getField(V):null}function n({formattedAttributes:M,template:V,
fieldInfoMap:ca}){return`${x.replace(x.replace(V,ha=>{{const ka=ca.get(ha.toLowerCase());ha=`{${ka&&ka.fieldName||ha}}`}return ha}),M).replace(v,"")}`.trim()}function t(M,V,ca=!1){const ha=V[M];"string"===typeof ha&&(ca=(ca?encodeURIComponent(ha):ha).replace(G,"%27"),V[M]=ca)}function r(M,V=!1){const ca={...M};Object.keys(ca).forEach(ha=>t(ha,ca,V));return ca}function u(M,V){return M.replace(E,(ca,ha,ka)=>(ca=b(V,ka))?`{${ca.name}}`:ha)}function C(M,V,ca){return(M=u(M,ca))?M.replace(la,(ha,ka,pa)=>
{ka=`${ka||pa}`.trim();return x.replace(ha,r(V,ka&&"{"!==ka[0]))}):M}function I(M,V){var ca=V.fieldName,ha=w(V.fieldInfos,ca),ka=null==ha?void 0:ha.clone();ha=V.preventPlacesFormatting;V=V.layer;ca=b(V,ca);if(ka&&"date"===(null==ca?void 0:ca.type)){ca=ka.format||new z;ca.dateFormat=ca.dateFormat||"short-date-short-time";var pa;if(!(pa="feature"===(null==V?void 0:V.type)&&V.datesInUnknownTimezone)){if(pa=!(null==V||!V.layer))pa=V.layer,pa="map-image"===(null==pa?void 0:pa.type);pa=pa&&V.layer.datesInUnknownTimezone}ca.dateTimeFormatOptions=
pa?{timeZone:"UTC"}:null;ka.format=ca}ka=ka&&ka.format;"string"!==typeof M||!ka||null!=ka.dateFormat||null==ka.places&&null==ka.digitSeparator||(V=Number(M),isNaN(V)||(M=V));return"string"===typeof M||null==M||null==ka?K(M):ha?D.formatNumber(M,{...D.convertNumberFormatToIntlOptions(ka),minimumFractionDigits:0,maximumFractionDigits:20}):ka.format(M)}function w(M,V){if(M&&M.length&&V){var ca=V.toLowerCase(),ha=void 0;M.some(ka=>ka.fieldName&&ka.fieldName.toLowerCase()===ca?(ha=ka,!0):!1);return ha}}
function f({fieldName:M,graphic:V,layer:ca}){if(aa(M)||!ca||"function"!==typeof ca.getFeatureType)return null;const {typeIdField:ha}=ca;return ha&&M===ha?(M=ca.getFeatureType(V))?M.name:null:null}function B({fieldName:M,value:V,graphic:ca,layer:ha}){return aa(M)||!ha||"function"!==typeof ha.getFieldDomain?null:(M=ha.getFieldDomain(M,{feature:ca}))&&"coded-value"===M.type?M.getName(V):null}function K(M){return"string"===typeof M?M.replace(da,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):M}function P(M){const {value:V,
fieldName:ca,fieldInfos:ha,fieldInfoMap:ka,layer:pa,graphic:za}=M;return null==V?"":(M=B({fieldName:ca,value:V,graphic:za,layer:pa}))||(M=f({fieldName:ca,graphic:za,layer:pa}))?M:ka.get(ca.toLowerCase())?I(V,{fieldInfos:ha,fieldName:ca,layer:pa}):(M=pa&&pa.fieldsIndex)&&M.isDateField(ca)?y.formatDate(V,oa):K(V)}function T(M,V){return X.apply(this,arguments)}function X(){X=l._asyncToGenerator(function*(M,V){var ca,ha;const {layer:ka,graphic:pa,outFields:za,objectIds:Da,returnGeometry:Ba,spatialReference:Ga}=
M;M=Da[0];if("number"!==typeof M&&"string"!==typeof M)return Q.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:ka,graphic:pa,objectId:M,requiredFields:za}),null;if(null==(ca=ka.capabilities)||null==(ha=ca.operations)||!ha.supportsQuery)return Q.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:ka,graphic:pa,requiredFields:za,returnGeometry:Ba}),null;ca=ka.createQuery();ca.objectIds=Da;ca.outFields=
null!=za&&za.length?za:[ka.objectIdField];ca.returnGeometry=!!Ba;ca.returnZ=!!Ba;ca.returnM=!!Ba;ca.outSpatialReference=Ga;return(yield ka.queryFeatures(ca,V)).features[0]});return X.apply(this,arguments)}function W(M){return L.apply(this,arguments)}function L(){L=l._asyncToGenerator(function*(M){var V;if(null==(V=M.expressionInfos)||!V.length)return!1;V=yield p.loadArcade();({arcadeUtils:{hasGeometryFunctions:V}}=V);return V(M)});return L.apply(this,arguments)}function R(){R=l._asyncToGenerator(function*({graphic:M,
popupTemplate:V,layer:ca,spatialReference:ha},ka){if(ca&&V&&("function"===typeof ca.load&&(yield ca.load(ka)),M.attributes)){var pa=M.attributes[ca.objectIdField];if(null!=pa){pa=[pa];var za=yield V.getRequiredFields(ca.fieldsIndex),Da=F.featureHasFields(za,M);za=Da?[]:za;V=V.returnGeometry||(yield W(V));if(!Da||V)if(ca=yield T({layer:ca,graphic:M,outFields:za,objectIds:pa,returnGeometry:V,spatialReference:ha},ka))ca.geometry&&(M.geometry=ca.geometry),ca.attributes&&(M.attributes={...M.attributes,
...ca.attributes})}}});return R.apply(this,arguments)}function aa(M=""){return M?-1!==M.indexOf("relationships/"):!1}function H({attributes:M,graphic:V,relatedInfo:ca}){M&&V&&ca&&Object.keys(V.attributes).forEach(ha=>{var ka={layerId:ca.relation.id.toString(),fieldName:ha};M[ka?`${"relationships/"}${ka.layerId}/${ka.fieldName}`:""]=V.attributes[ha]})}function N(M,V){M&&V&&(V.relatedFeatures&&V.relatedFeatures&&V.relatedFeatures.forEach(ca=>H({attributes:M,graphic:ca,relatedInfo:V})),V.relatedStatsFeatures&&
V.relatedStatsFeatures&&V.relatedStatsFeatures.forEach(ca=>H({attributes:M,graphic:ca,relatedInfo:V})))}const Q=g.getLogger("esri.widgets.Feature.support.featureUtils"),v=/href=(""|'')/gi,E=/(\{([^\{\r\n]+)\})/g,G=/'/g,S=/^\s*expression\//i,da=/(\n)/gi,fa=/[\u00A0-\u9999<>&]/gim,la=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,na=/^(?:mailto:|tel:)/,oa=y.convertDateFormatToIntlOptions("short-date-short-time"),sa=M=>{if(!M)return!1;M=M.toUpperCase();return-1<M.indexOf("CURRENT_TIMESTAMP")||-1<M.indexOf("CURRENT_DATE")||
-1<M.indexOf("CURRENT_TIME")},ta=({layer:M,method:V,query:ca,definitionExpression:ha})=>{var ka,pa;null!=(ka=M.capabilities)&&null!=(pa=ka.query)&&pa.supportsCacheHint&&"attachments"!==V&&(M=q.isSome(ca.where)&&ca.where,V=q.isSome(ca.geometry)&&ca.geometry,sa(ha)||sa(M)||"extent"===(null==V?void 0:V.type)||"tile"===ca.resultType||(ca.cacheHint=!0))};e.applyTextFormattingHTML=K;e.createfieldInfoMap=function(M,V){const ca=new Map;M&&M.forEach(ha=>{const ka=h(ha.fieldName,V);ha.fieldName=ka;ca.set(ka.toLowerCase(),
ha)});return ca};e.fixTokens=u;e.formatAttributes=function({fieldInfos:M,attributes:V,layer:ca,graphic:ha,fieldInfoMap:ka,relatedInfos:pa}){const za={};null==pa?void 0:pa.forEach(Da=>N(za,Da));Object.keys(V).forEach(Da=>{za[Da]=P({fieldName:Da,fieldInfos:M,fieldInfoMap:ka,layer:ca,value:V[Da],graphic:ha})});return za};e.formatEditInfo=function(M,V){const {creatorField:ca,creationDateField:ha,editorField:ka,editDateField:pa}=M;if(V){M=V[pa];if("number"===typeof M)return V=V[ka],{type:"edit",date:y.formatDate(M,
oa),user:V};M=V[ha];return"number"===typeof M?(V=V[ca],{type:"create",date:y.formatDate(M,oa),user:V}):null}};e.formatValueToFieldInfo=I;e.getAllFieldInfos=function(M){const V=[];if(!M)return V;const {fieldInfos:ca,content:ha}=M;ca&&V.push(...ca);if(!ha||!Array.isArray(ha))return V;ha.forEach(ka=>{"fields"===ka.type&&(ka=ka&&ka.fieldInfos)&&V.push(...ka)});return V};e.getFieldInfo=w;e.getFieldInfoLabel=function(M,V){return(V=m(V,null==M?void 0:M.fieldName))?V.title||null:M?M.label||M.fieldName:null};
e.getFixedFieldName=h;e.getFixedFieldNames=function(M,V){return M&&M.map(ca=>h(ca,V))};e.getSourceLayer=function(M){if(!q.isNone(M))return M.get("sourceLayer")||M.get("layer")};e.graphicCallback=function(M,V){return d.apply(this,arguments)};e.htmlEntities=function(M){return M.replace(fa,V=>`&#${V.charCodeAt(0)};`)};e.isExpressionField=c;e.isRelatedField=aa;e.preLayerQueryCallback=({query:M,layer:V,method:ca})=>{ta({layer:V,method:ca,query:M,definitionExpression:`${V.definitionExpression} ${V.serviceDefinitionExpression}`})};
e.preRequestCallback=({queryPayload:M,layer:V,method:ca})=>{ta({layer:V,method:ca,query:M,definitionExpression:`${V.definitionExpression} ${V.serviceDefinitionExpression}`})};e.queryUpdatedFeature=function(M,V){return R.apply(this,arguments)};e.shouldOpenInNewTab=function(M=""){if(M)return!na.test(M.trim().toLowerCase())};e.substituteAttributes=n;e.substituteFieldsInLinksAndAttributes=function({attributes:M,globalAttributes:V,layer:ca,text:ha,expressionAttributes:ka,fieldInfoMap:pa}){return ha?n({formattedAttributes:V,
template:C(ha,{...V,...ka,...M},ca),fieldInfoMap:pa}):""};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(e,l){e.getIconPath=function(k){const g=l.getAssetUrl("esri/themes/base/images/files/");return k?"text/plain"===k?`${g}text-32.svg`:"application/pdf"===k?`${g}pdf-32.svg`:"text/csv"===k?`${g}csv-32.svg`:"application/gpx+xml"===k?`${g}gpx-32.svg`:"application/x-dwf"===k?`${g}cad-32.svg`:
"application/postscript"===k||"application/json"===k||"text/xml"===k||"model/vrml"===k?`${g}code-32.svg`:"application/x-zip-compressed"===k||"application/x-7z-compressed"===k||"application/x-gzip"===k||"application/x-tar"===k||"application/x-gtar"===k||"application/x-bzip2"===k||"application/gzip"===k||"application/x-compress"===k||"application/x-apple-diskimage"===k||"application/x-rar-compressed"===k||"application/zip"===k?`${g}zip-32.svg`:-1!==k.indexOf("image/")?`${g}image-32.svg`:-1!==k.indexOf("audio/")?
`${g}sound-32.svg`:-1!==k.indexOf("video/")?`${g}video-32.svg`:-1!==k.indexOf("msexcel")||-1!==k.indexOf("ms-excel")||-1!==k.indexOf("spreadsheetml")?`${g}excel-32.svg`:-1!==k.indexOf("msword")||-1!==k.indexOf("ms-word")||-1!==k.indexOf("wordprocessingml")?`${g}word-32.svg`:-1!==k.indexOf("powerpoint")||-1!==k.indexOf("presentationml")?`${g}report-32.svg`:`${g}generic-32.svg`:`${g}generic-32.svg`};e.isSupportedImage=function(k){k=k.toLowerCase();return"image/bmp"===k||"image/emf"===k||"image/exif"===
k||"image/gif"===k||"image/x-icon"===k||"image/jpeg"===k||"image/png"===k||"image/tiff"===k||"image/x-wmf"===k};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(e,l,k,g,q,x,y,D){g=function(F){function z(p){p=F.call(this,p)||this;p.description=null;p.title=null;return p}e._inheritsLoose(z,F);return z}(D);l.__decorate([k.property()],g.prototype,"description",void 0);l.__decorate([k.property()],g.prototype,"title",void 0);return g=l.__decorate([y.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],g)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../../core/Logger ../../support/jsxFactory".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d){g=function(c){function m(b,n){b=c.call(this,b,n)||this;b.description=null;b.headingLevel=2;b.title=null;return b}e._inheritsLoose(m,c);var h=m.prototype;h.render=function(){return d.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};h.renderTitle=function(){const {title:b}=this;return b?d.tsx(F.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},b):null};h.renderDescription=function(){const {description:b}=
this;return b?d.tsx("div",{key:"description",class:"esri-feature-element-info__description"},b):null};return m}(D);l.__decorate([k.property()],g.prototype,"description",void 0);l.__decorate([k.property()],g.prototype,"headingLevel",void 0);l.__decorate([k.property()],g.prototype,"title",void 0);return g=l.__decorate([y.subclass("esri.widgets.Feature.support.FeatureElementInfo")],g)})},"esri/widgets/support/Heading":function(){define("exports ../../core/mathUtils ./widgetUtils ../../core/has ../../core/Logger ./jsxFactory".split(" "),
function(e,l,k,g,q,x){const y={heading:"esri-widget__heading"};e.CSS=y;e.Heading=function(D,F){const z=l.clamp(Math.ceil(D.level),1,6),p=`h${z}`;delete D.level;return x.tsx(p,{...D,class:k.classes(y.heading,D.class),role:"heading","aria-level":String(z)},F)};e.incrementHeadingLevel=function(D,F=1){return l.clamp(Math.ceil(D+F),1,6)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c){g=function(m){function h(n,t){n=m.call(this,n,t)||this;n.creator=null;n.graphic=null;n.viewModel=null;n._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(u=>{p.shouldOpenInNewTab(u.href)&&!u.hasAttribute("target")&&u.setAttribute("target","_blank")})};return n}e._inheritsLoose(h,m);var b=h.prototype;b.renderLoading=function(){return c.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},c.tsx("div",{class:"esri-feature-content__loader"}))};
b.renderCreated=function(){var n;const t=null==(n=this.viewModel)?void 0:n.created;return t?t instanceof HTMLElement?c.tsx("div",{key:t,bind:t,afterCreate:this._attachToNode}):d.isWidget(t)?c.tsx("div",{key:t},!t.destroyed&&t.render()):c.tsx("div",{key:t,innerHTML:t,afterCreate:this._addTargetToAnchors}):null};b.render=function(){var n;const t=null==(n=this.viewModel)?void 0:n.state;return c.tsx("div",{class:"esri-feature-content"},"loading"===t?this.renderLoading():this.renderCreated())};b._attachToNode=
function(n){n.appendChild(this)};return h}(F);l.__decorate([k.aliasOf("viewModel.creator")],g.prototype,"creator",void 0);l.__decorate([k.aliasOf("viewModel.graphic")],g.prototype,"graphic",void 0);l.__decorate([y.property({type:z})],g.prototype,"viewModel",void 0);return g=l.__decorate([D.subclass("esri.widgets.Feature.FeatureContent")],g)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d){g=function(c){function m(b){var n=c.call(this,b)||this;n._loadingPromise=null;n.created=null;n.creator=null;n.destroyer=null;n.graphic=null;n.handles.add(x.init(e._assertThisInitialized(n),"creator",t=>{n._destroyContent();n._createContent(t)}));return n}e._inheritsLoose(m,c);var h=m.prototype;h.destroy=function(){this._destroyContent()};h._destroyContent=function(){const {created:b,graphic:n,destroyer:t}=this;b&&(d.graphicCallback(t,{graphic:n}).catch(()=>null),
this._set("created",null))};h._createContent=function(){var b=e._asyncToGenerator(function*(n){var {graphic:t}=this;this._loadingPromise=n=d.graphicCallback(n,{graphic:t}).catch(()=>null);this.notifyChange("state");t=yield n;n===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",t))});return function(n){return b.apply(this,arguments)}}();e._createClass(m,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return m}(q.HandleOwnerMixin(g));
l.__decorate([y.property({readOnly:!0})],g.prototype,"created",void 0);l.__decorate([y.property()],g.prototype,"creator",void 0);l.__decorate([y.property()],g.prototype,"destroyer",void 0);l.__decorate([y.property({type:k})],g.prototype,"graphic",void 0);l.__decorate([y.property({readOnly:!0})],g.prototype,"state",null);return g=l.__decorate([p.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],g)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b){q=function(n){function t(u,C){u=n.call(this,u,C)||this;u.viewModel=new c;return u}e._inheritsLoose(t,n);var r=t.prototype;r.initialize=function(){k.init(this,"viewModel.contentElementViewModel",()=>this._setupExpressionWidget())};r.destroy=function(){this._destroyContentWidget()};r.renderLoading=function(){return b.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},b.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};r.render=function(){var u;const {state:C}=this.viewModel;return b.tsx("div",{class:"esri-feature-expression"},"loading"===C?this.renderLoading():"disabled"===C?null:null==(u=this._contentWidget)?void 0:u.render())};r._destroyContentWidget=function(){const {_contentWidget:u}=this;u&&(u.viewModel=null,u.destroy());this._contentWidget=null};r._setupExpressionWidget=function(){const {contentElementViewModel:u,contentElement:C}=this.viewModel,I=null==C?void 0:C.type;
this._destroyContentWidget();this._contentWidget=u?"fields"===I?new p({viewModel:u}):"media"===I?new d({viewModel:u}):"text"===I?new z({viewModel:u}):null:null;this.scheduleRender()};return t}(F);l.__decorate([g.property({type:c})],q.prototype,"viewModel",void 0);return q=l.__decorate([D.subclass("esri.widgets.Feature.FeatureExpression")],q)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n){q=function(t){function r(C,I){C=t.call(this,C,I)||this;C._featureElementInfo=null;C.attributes=null;C.description=null;C.expressionInfos=null;C.fieldInfos=null;C.title=null;C.viewModel=new p;C.messages=null;C.messagesURIUtils=null;return C}e._inheritsLoose(r,t);var u=r.prototype;u.initialize=function(){this._featureElementInfo=new d;k.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())};u.destroy=function(){this._featureElementInfo.destroy()};
u.renderFieldInfo=function(C,I){var {attributes:w}=this.viewModel;const f=C.fieldName,B=C.label||f;w=w?null==w[f]?"":w[f]:"";C=!(!C.format||!C.format.dateFormat);w="number"!==typeof w||C?c.autoLink(this.messagesURIUtils,w):this._forceLTR(w);C={["esri-feature-fields__field-data--date"]:C};return n.tsx("tr",{key:`fields-element-info-row-${f}-${I}`},n.tsx("th",{key:`fields-element-info-row-header-${f}-${I}`,class:"esri-feature-fields__field-header",innerHTML:B}),n.tsx("td",{key:`fields-element-info-row-data-${f}-${I}`,
class:this.classes("esri-feature-fields__field-data",C),innerHTML:w}))};u.renderFields=function(){const {formattedFieldInfos:C}=this.viewModel;return null!=C&&C.length?n.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},n.tsx("tbody",null,C.map((I,w)=>this.renderFieldInfo(I,w)))):null};u.render=function(){var C;return n.tsx("div",{class:"esri-feature-fields"},null==(C=this._featureElementInfo)?void 0:C.render(),this.renderFields())};u._setupFeatureElementInfo=function(){const {description:C,
title:I}=this;this._featureElementInfo.set({description:C,title:I})};u._forceLTR=function(C){return`&lrm;${C}`};return r}(z);l.__decorate([g.aliasOf("viewModel.attributes")],q.prototype,"attributes",void 0);l.__decorate([g.aliasOf("viewModel.description")],q.prototype,"description",void 0);l.__decorate([g.aliasOf("viewModel.expressionInfos")],q.prototype,"expressionInfos",void 0);l.__decorate([g.aliasOf("viewModel.fieldInfos")],q.prototype,"fieldInfos",void 0);l.__decorate([g.aliasOf("viewModel.title")],
q.prototype,"title",void 0);l.__decorate([D.property({type:p})],q.prototype,"viewModel",void 0);l.__decorate([D.property(),h.messageBundle("esri/widgets/Feature/t9n/Feature")],q.prototype,"messages",void 0);l.__decorate([D.property(),h.messageBundle("esri/widgets/support/t9n/uriUtils")],q.prototype,"messagesURIUtils",void 0);return q=l.__decorate([F.subclass("esri.widgets.Feature.FeatureFields")],q)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p){k=function(d){function c(m){m=d.call(this,m)||this;m.attributes=null;m.expressionInfos=null;m.description=null;m.fieldInfos=null;m.title=null;return m}e._inheritsLoose(c,d);e._createClass(c,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:m,fieldInfos:h}=this,b=[];null==h?void 0:h.forEach(n=>{if(!n.hasOwnProperty("visible")||n.visible)n=n.clone(),n.label=p.getFieldInfoLabel(n,m),b.push(n)});return b}}]);return c}(k);l.__decorate([g.property()],k.prototype,
"attributes",void 0);l.__decorate([g.property({type:[F]})],k.prototype,"expressionInfos",void 0);l.__decorate([g.property()],k.prototype,"description",void 0);l.__decorate([g.property({type:[z]})],k.prototype,"fieldInfos",void 0);l.__decorate([g.property({readOnly:!0})],k.prototype,"formattedFieldInfos",null);l.__decorate([g.property()],k.prototype,"title",void 0);return k=l.__decorate([D.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],k)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(e,l){function k(q){let x=null;g.some(y=>{y.pattern.test(q)&&(x=y);return!!x});return x}const g=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];e.autoLink=function(q,x){if("string"!==typeof x||!x)return x;const y=k(x);if(!y)return x;const D=x.match(y.pattern);
q=l.replace(l.replace(y.label,{messages:q,hierPart:D&&D[2]}),{appName:y.appName});return x.replace(y.pattern,`<a${y.target?` target="${y.target}"`:""} href="$1"${"_blank"===y.target?' rel\x3d"noreferrer"':""}>${q}</a>`)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory ../support/widgetThemeUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n,t,r,u){x=function(C){function I(f,B){var K=C.call(this,f,B)||this;K._refreshTimer=null;K._refreshIntervalInfo=null;K._featureElementInfo=null;K.attributes=null;K.activeMediaInfoIndex=null;K.description=null;K.fieldInfoMap=null;K.layer=null;K.mediaInfos=null;K.popupTemplate=null;K.relatedInfos=null;K.title=null;K.viewModel=new d;K.messages=null;K._getChartDependencies=function(){var P=e._asyncToGenerator(function*(T){const X=yield h.loadChartsModule(),{destroyed:W,
viewModel:L}=e._assertThisInitialized(K);if(!W&&L&&T){var {activeMediaInfo:R}=L;K._renderChart({chartDiv:T,mediaInfo:R,chartsModule:X})}});return function(T){return P.apply(this,arguments)}}();return K}e._inheritsLoose(I,C);var w=I.prototype;w.initialize=function(){this._featureElementInfo=new c;this.own(g.init(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),g.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))};
w.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo.destroy()};w.render=function(){var f;return r.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(f=this._featureElementInfo)?void 0:f.render(),this.renderMedia())};w.renderMedia=function(){const {formattedMediaInfoCount:f}=this.viewModel;return f?r.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),
this.renderMediaPageButton("next")):null};w.renderImageMediaInfo=function(f){var {_refreshIntervalInfo:B}=this;const {activeMediaInfoIndex:K,formattedMediaInfoCount:P}=this.viewModel,{value:T,refreshInterval:X,altText:W,title:L,type:R}=f,{sourceURL:aa,linkURL:H}=T;f=m.shouldOpenInNewTab(H)?"_blank":"_self";const N="_blank"===f?"noreferrer":"";B=X?B:null;B=r.tsx("img",{alt:W||L,key:`media-${R}-${K}-${P}-${B?B.timestamp:0}`,src:B?B.sourceURL:aa});return(f=H?r.tsx("a",{title:L,href:H,rel:N,target:f},
B):null)?f:B};w.renderChartMediaInfo=function(f){const {activeMediaInfoIndex:B,formattedMediaInfoCount:K}=this.viewModel;return r.tsx("div",{key:`media-${f.type}-${B}-${K}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};w.renderMediaInfoType=function(){const {activeMediaInfo:f}=this.viewModel;return f?"image"===f.type?this.renderImageMediaInfo(f):-1!==f.type.indexOf("chart")?this.renderChartMediaInfo(f):null:null};w.renderMediaInfo=function(){var {activeMediaInfo:f}=
this.viewModel;if(!f)return null;const B=f.title?r.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:f.title}):null;f=f.caption?r.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:f.caption}):null;return r.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},r.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),B,f)};w.renderMediaPageButton=function(f){if(2>this.viewModel.formattedMediaInfoCount)return null;
const B=(f="previous"===f)?this.messages.previous:this.messages.next,K=f?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),P=f?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),T=f?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl",
"esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return r.tsx("button",{type:"button",key:f?"media-previous":"media-next",title:B,"aria-label":B,tabIndex:0,class:K,bind:this,onclick:f?this._previous:this._next},r.tsx("span",{"aria-hidden":"true",class:P}),r.tsx("span",{"aria-hidden":"true",class:T}))};w._setupFeatureElementInfo=function(){const {description:f,title:B}=this;this._featureElementInfo.set({description:f,
title:B})};w._next=function(){this.viewModel.next()};w._previous=function(){this.viewModel.previous()};w._handleMediaKeyup=function(f){const B=k.eventKey(f);"ArrowLeft"===B&&(f.stopPropagation(),this.viewModel.previous());"ArrowRight"===B&&(f.stopPropagation(),this.viewModel.next())};w._renderChart=function(f){const {abilities:B}=this.viewModel,{chartsModule:K,chartDiv:P,mediaInfo:T}=f,{value:X,type:W}=T,{am4core:L}=K,R=h.getColorSet(L);u.isDarkTheme()&&L.useTheme(K.am4themes_dark);const aa=window.matchMedia("(prefers-reduced-motion: reduce)");
B.chartAnimation&&!aa.matches?L.useTheme(K.am4themes_animated):L.unuseTheme(K.am4themes_animated);L.useTheme(function(H){H instanceof L.ColorSet&&R&&(H.list=R)});f="pie-chart"===W?this._createPieChart(f):this._createXYChart(f);P.setAttribute("aria-label",T.altText||T.title);f.data=X.series.map(H=>({tooltip:H.tooltip,value:H.value})).filter(H=>"pie-chart"===W?0<H.value:!0)};w._customizeChartTooltip=function(f,B){f.label.wrap=!0;f.label.maxWidth=200;f.autoTextColor=!1;f.getFillFromObject=!1;f.label.fill=
B.color("#ffffff");f.background.fill=B.color({r:0,g:0,b:0,a:.7})};w._createPieChart=function(f){const {chartDiv:B,chartsModule:K}=f,{am4core:P,am4charts:T}=K;f=P.create(B,T.PieChart);f.rtl=b.isRTL(this.container);const X=f.series.push(new T.PieSeries);X.labels.template.disabled=!0;X.ticks.template.disabled=!0;X.dataFields.value="value";X.dataFields.category="tooltip";this._customizeChartTooltip(X.tooltip,P);X.slices.template.tooltipText=f.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%";
return f};w._getMinSeriesValue=function(f){let B=0;f.forEach(K=>B=Math.min(K.value,B));return B};w._createColumnChart=function(f,B){const {chartsModule:K,mediaInfo:P}=B;({value:B}=P);const {am4core:T,am4charts:X}=K,W=f.xAxes.push(new X.CategoryAxis);W.dataFields.category="tooltip";W.renderer.labels.template.disabled=!0;this._customizeChartTooltip(W.tooltip,T);W.tooltip.events.on("sizechanged",()=>{W.tooltip.dy=-W.tooltip.contentHeight});var L=f.yAxes.push(new X.ValueAxis);const R=L.renderer.labels.template;
L.renderer.minLabelPosition=.05;L.renderer.maxLabelPosition=.95;L.min=this._getMinSeriesValue(B.series);this._customizeChartTooltip(L.tooltip,T);R.wrap=!0;L=f.series.push(new X.ColumnSeries);L.dataFields.valueY="value";L.dataFields.categoryX="tooltip";f.cursor=new X.XYCursor;15<B.series.length&&(f.scrollbarX=new T.Scrollbar)};w._createBarChart=function(f,B){const {chartsModule:K,mediaInfo:P}=B;({value:B}=P);const {am4core:T,am4charts:X}=K,W=f.yAxes.push(new X.CategoryAxis);W.dataFields.category="tooltip";
W.renderer.inversed=!0;W.renderer.labels.template.disabled=!0;this._customizeChartTooltip(W.tooltip,T);W.tooltip.events.on("sizechanged",()=>{W.tooltip.dx=W.tooltip.contentWidth});var L=f.xAxes.push(new X.ValueAxis);const R=L.renderer.labels.template;L.renderer.minLabelPosition=.05;L.renderer.maxLabelPosition=.95;L.min=this._getMinSeriesValue(B.series);this._customizeChartTooltip(L.tooltip,T);R.wrap=!0;L=f.series.push(new X.ColumnSeries);L.dataFields.valueX="value";L.dataFields.categoryY="tooltip";
f.cursor=new X.XYCursor;15<B.series.length&&(f.scrollbarY=new T.Scrollbar)};w._createLineChart=function(f,B){const {chartsModule:K,mediaInfo:P}=B;({value:B}=P);const {am4core:T,am4charts:X}=K,W=f.xAxes.push(new X.CategoryAxis);W.dataFields.category="tooltip";W.renderer.labels.template.disabled=!0;this._customizeChartTooltip(W.tooltip,T);W.tooltip.events.on("sizechanged",()=>{W.tooltip.dy=-W.tooltip.contentHeight});var L=f.yAxes.push(new X.ValueAxis);const R=L.renderer.labels.template;L.renderer.minLabelPosition=
.05;L.renderer.maxLabelPosition=.95;L.min=this._getMinSeriesValue(B.series);this._customizeChartTooltip(L.tooltip,T);R.wrap=!0;L=f.series.push(new X.LineSeries);L.dataFields.categoryX="tooltip";L.dataFields.valueY="value";f.cursor=new X.XYCursor;15<B.series.length&&(f.scrollbarX=new T.Scrollbar)};w._createXYChart=function(f){const {chartDiv:B,chartsModule:K,mediaInfo:P}=f,{type:T}=P,{am4core:X,am4charts:W}=K,L=X.create(B,W.XYChart);L.rtl=b.isRTL(this.container);"column-chart"===T&&this._createColumnChart(L,
f);"bar-chart"===T&&this._createBarChart(L,f);"line-chart"===T&&this._createLineChart(L,f);return L};w._clearMediaRefreshTimer=function(){const {_refreshTimer:f}=this;f&&(clearTimeout(f),this._refreshTimer=null)};w._updateMediaInfoTimestamp=function(f){const B=Date.now();this._refreshIntervalInfo={timestamp:B,sourceURL:this._getImageSource(f,B)};this.scheduleRender()};w._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:f}=this.viewModel;f&&"image"===f.type&&
f.refreshInterval&&this._setRefreshTimeout(f)};w._setRefreshTimeout=function(f){const {refreshInterval:B,value:K}=f;B&&(f=6E4*B,this._updateMediaInfoTimestamp(K.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(K.sourceURL)},f))};w._getImageSource=function(f,B){const K=-1!==f.indexOf("?")?"\x26":"?",[P,T=""]=f.split("#");return`${P}${K}timestamp=${B}${T?"#":""}${T}`};return I}(p);l.__decorate([q.aliasOf("viewModel.attributes")],x.prototype,"attributes",void 0);l.__decorate([q.aliasOf("viewModel.activeMediaInfoIndex")],
x.prototype,"activeMediaInfoIndex",void 0);l.__decorate([q.aliasOf("viewModel.description")],x.prototype,"description",void 0);l.__decorate([q.aliasOf("viewModel.fieldInfoMap")],x.prototype,"fieldInfoMap",void 0);l.__decorate([q.aliasOf("viewModel.layer")],x.prototype,"layer",void 0);l.__decorate([q.aliasOf("viewModel.mediaInfos")],x.prototype,"mediaInfos",void 0);l.__decorate([q.aliasOf("viewModel.popupTemplate")],x.prototype,"popupTemplate",void 0);l.__decorate([q.aliasOf("viewModel.relatedInfos")],
x.prototype,"relatedInfos",void 0);l.__decorate([q.aliasOf("viewModel.title")],x.prototype,"title",void 0);l.__decorate([F.property({type:d})],x.prototype,"viewModel",void 0);l.__decorate([F.property(),n.messageBundle("esri/widgets/Feature/t9n/Feature")],x.prototype,"messages",void 0);return x=l.__decorate([z.subclass("esri.widgets.Feature.FeatureMedia")],x)})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d){const c={chartAnimation:!0};k=function(m){function h(n){n=m.call(this,n)||this;n.abilities={...c};n.activeMediaInfoIndex=0;n.attributes=null;n.description=null;n.fieldInfoMap=null;n.formattedAttributes=null;n.expressionAttributes=null;n.layer=null;n.mediaInfos=null;n.popupTemplate=null;n.relatedInfos=null;n.title=null;return n}e._inheritsLoose(h,m);var b=h.prototype;b.castAbilities=function(n){return{...c,...n}};b.setActiveMedia=function(n){this._setContentElementMedia(n)};
b.next=function(){this._pageContentElementMedia(1)};b.previous=function(){this._pageContentElementMedia(-1)};b._setContentElementMedia=function(n){const {formattedMediaInfoCount:t}=this;this.activeMediaInfoIndex=(n+t)%t};b._pageContentElementMedia=function(n){const {activeMediaInfoIndex:t}=this;this._setContentElementMedia(t+n)};b._formatMediaInfos=function(){const {attributes:n,mediaInfos:t,formattedAttributes:r,expressionAttributes:u,fieldInfoMap:C,layer:I}=this;return null==t?void 0:t.map(w=>{w=
null==w?void 0:w.clone();if(!w)return null;w.title=p.substituteFieldsInLinksAndAttributes({attributes:n,fieldInfoMap:C,globalAttributes:r,expressionAttributes:u,layer:I,text:w.title});w.caption=p.substituteFieldsInLinksAndAttributes({attributes:n,fieldInfoMap:C,globalAttributes:r,expressionAttributes:u,layer:I,text:w.caption});w.altText=p.substituteFieldsInLinksAndAttributes({attributes:n,fieldInfoMap:C,globalAttributes:r,expressionAttributes:u,layer:I,text:w.altText});if("image"===w.type){var {value:f}=
w;this._setImageValue({value:f,formattedAttributes:r,layer:I});return w.value.sourceURL?w:void 0}return"pie-chart"===w.type||"line-chart"===w.type||"column-chart"===w.type||"bar-chart"===w.type?({value:f}=w,this._setChartValue({value:f,chartType:w.type,attributes:n,formattedAttributes:r,layer:I}),w):null}).filter(Boolean)};b._setImageValue=function(n){const {fieldInfoMap:t}=this,{value:r,formattedAttributes:u,layer:C}=n,{linkURL:I,sourceURL:w}=r;w&&(n=p.fixTokens(w,C),r.sourceURL=p.substituteAttributes({formattedAttributes:u,
template:n,fieldInfoMap:t}));I&&(n=p.fixTokens(I,C),r.linkURL=p.substituteAttributes({formattedAttributes:u,template:n,fieldInfoMap:t}))};b._setChartValue=function(n){const {value:t,attributes:r,formattedAttributes:u,chartType:C,layer:I}=n,{popupTemplate:w,relatedInfos:f}=this,{fields:B,normalizeField:K}=t;t.fields=p.getFixedFieldNames(B,I);K&&(t.normalizeField=p.getFixedFieldName(K,I));if(B.some(T=>!!(null!=u[T]||p.isRelatedField(T)&&f.size))){var P=null==w?void 0:w.fieldInfos;B.forEach(T=>{p.isRelatedField(T)?
t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:P,fieldName:T,formattedAttributes:u,chartType:C,value:t})]:(T=this._getChartOption({value:t,attributes:r,chartType:C,formattedAttributes:u,fieldName:T,fieldInfos:P}),t.series.push(T))})}};b._getRelatedChartInfos=function(n){var t;const {fieldInfos:r,fieldName:u,formattedAttributes:C,chartType:I,value:w}=n,f=[];n=d.getRelatedFieldInfo(u);const {layerId:B,fieldName:K}=n;n=null==(t=this.relatedInfos)?void 0:t.get(B.toString());if(!n)return f;
const {relatedFeatures:P,relation:T}=n;if(!T||!P)return f;({cardinality:t}=T);P.forEach(X=>{const {attributes:W}=X;W&&Object.keys(W).forEach(L=>{L===K&&f.push(this._getChartOption({value:w,attributes:W,formattedAttributes:C,fieldName:u,chartType:I,relatedFieldName:L,fieldInfos:r}))})});return"one-to-many"===t||"many-to-many"===t?f:[f[0]]};b._getTooltip=function({label:n,value:t,chartType:r}){return"pie-chart"===r?n:`${n}: ${t}`};b._getChartOption=function(n){const {value:t,attributes:r,formattedAttributes:u,
fieldName:C,relatedFieldName:I,fieldInfos:w,chartType:f}=n;var {layer:B}=this;const {normalizeField:K,tooltipField:P}=t;var T=K?p.isRelatedField(K)?r[d.getRelatedFieldInfo(K).fieldName]:r[K]:null;n=I&&void 0!==r[I]?r[I]:void 0!==r[C]?r[C]:u[C];const X=void 0===n?null:n&&T?n/T:n;n=new z({value:X});if(p.isRelatedField(C)){var W=d.getRelatedFieldInfo(C);var L=d.getRelatedFieldInfo(P);L=L?L.fieldName:null;B=p.formatValueToFieldInfo(X,{fieldInfos:w,fieldName:I,layer:B,preventPlacesFormatting:!!T});W=W?
W.label||W.fieldName:I;n.tooltip=this._getTooltip({label:L&&void 0!==r[L]?r[L]:W,value:B,chartType:f});return n}T=p.getFieldInfo(w,C);B=p.getFixedFieldName(C,B);T=P&&void 0!==u[P]?u[P]:p.getFieldInfoLabel(T||new F({fieldName:B}),null==(W=this.popupTemplate)?void 0:W.expressionInfos);n.tooltip=this._getTooltip({label:T,value:u[B],chartType:f});return n};e._createClass(h,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",
get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return h}(k);l.__decorate([g.property()],k.prototype,"abilities",void 0);l.__decorate([y.cast("abilities")],k.prototype,"castAbilities",null);l.__decorate([g.property()],k.prototype,"activeMediaInfoIndex",void 0);l.__decorate([g.property({readOnly:!0})],k.prototype,"activeMediaInfo",null);l.__decorate([g.property()],k.prototype,"attributes",void 0);l.__decorate([g.property()],
k.prototype,"description",void 0);l.__decorate([g.property()],k.prototype,"fieldInfoMap",void 0);l.__decorate([g.property()],k.prototype,"formattedAttributes",void 0);l.__decorate([g.property()],k.prototype,"expressionAttributes",void 0);l.__decorate([g.property({readOnly:!0})],k.prototype,"formattedMediaInfos",null);l.__decorate([g.property()],k.prototype,"layer",void 0);l.__decorate([g.property({readOnly:!0})],k.prototype,"formattedMediaInfoCount",null);l.__decorate([g.property()],k.prototype,"mediaInfos",
void 0);l.__decorate([g.property()],k.prototype,"popupTemplate",void 0);l.__decorate([g.property()],k.prototype,"relatedInfos",void 0);l.__decorate([g.property()],k.prototype,"title",void 0);return k=l.__decorate([D.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],k)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../rest/support/Query ../../../rest/support/RelationshipQuery ../../../rest/support/StatisticDefinition ../../../tasks/QueryTask ./featureUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d){function c(w,f){if(!f.relationships)return null;let B=null;({relationships:f}=f);f.some(K=>K.id===parseInt(w,10)?(B=K,!0):!1);return B}function m({originRelationship:w,relationships:f,layerId:B}){let K;f&&f.some(P=>{`${P.relatedTableId}`===B&&P.id===w.id&&(K=P);return!!K});return K}function h(w,f){f=f.toLowerCase();for(const B in w)if(B.toLowerCase()===f)return w[B];return null}function b(w,f,B,K){const P=new F;P.outFields=["*"];P.relationshipId="number"===typeof f.id?
f.id:parseInt(f.id,10);P.objectIds=[w.attributes[B.objectIdField]];return B.queryRelatedFeatures(P,K)}function n(w,f,B){let K=0;const P=[];for(;K<f.length;)P.push(`${w} IN (${f.slice(K,B+K)})`),K+=B;return P.join(" OR ")}function t(w,f,B,K){return r.apply(this,arguments)}function r(){r=l._asyncToGenerator(function*(w,f,B,K){var P=B.layerId.toString();const {layerInfo:T,queryTask:X,relation:W,relatedFields:L,outStatistics:R}=f;P=m({originRelationship:W,relationships:T.relationships,layerId:P});if(P.relationshipTableId&&
P.keyFieldInRelationshipTable){B=(yield b(w,P,B,K))[w.attributes[B.objectIdField]];if(!B)return null;const aa=B.features.map(H=>H.attributes[T.objectIdField]);if(0<(null==R?void 0:R.length)&&T.supportsStatistics)return f=new D,f.where=n(T.objectIdField,aa,1E3),f.outFields=L,f.outStatistics=R,f={features:Promise.resolve(B),statsFeatures:X.execute(f)},x.eachAlways(f)}return(P=null==P?void 0:P.keyField)?(B=y.isNumericField(u(T.fields,P)),w=h(w.attributes,W.keyField),P=B?`${P}=${w}`:`${P}='${w}'`,w=X.execute(new D({where:P,
outFields:f.relatedFields}),K),f=f.outStatistics&&0<f.outStatistics.length&&T.supportsStatistics?X.execute(new D({where:P,outFields:f.relatedFields,outStatistics:f.outStatistics}),K):null,K={features:w},f&&(K.statsFeatures=f),x.eachAlways(K)):null});return r.apply(this,arguments)}function u(w,f){if(null!=w){f=f.toLowerCase();for(const B of w)if(B&&B.name.toLowerCase()===f)return B}return null}const C=q.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),I=new Map;e.createRelatedInfo=function(w,
f){if(w=c(w,f)){var B=`${f.url}/${w.relatedTableId}`;f=new p({url:B,sourceSpatialReference:f.spatialReference});return{url:B,queryTask:f,relation:w,relatedFields:[],outStatistics:[]}}};e.getDestinationRelation=m;e.getRelatedFieldInfo=function(w){if(!d.isRelatedField(w))return null;const [f,B]=w.split("/").slice(1);return{layerId:f,fieldName:B}};e.queryLayerInfos=function({relatedInfos:w,layer:f},B){const K={};w.forEach((P,T)=>{({relation:P}=P);if(!P)throw T=new g("relation-required","A relation is required on a layer to retrieve related records."),
C.error(T),T;({relatedTableId:P}=P);if("number"!==typeof P)throw T=new g("A related table ID is required on a layer to retrieve related records."),C.error(T),T;P=`${f.url}/${P}`;const X=I.get(P),W=X?X:k(P,{query:{f:"json"},signal:B&&B.signal});X||I.set(P,W);K[T]=W});return x.eachAlways(K)};e.queryRelatedFeatures=function({graphic:w,relatedInfos:f,layer:B},K){const P={};f.forEach((T,X)=>{T.layerInfo&&(P[X]=t(w,T,B,K))});return x.eachAlways(P)};e.setRelatedFeatures=function(w,f){if(f&&w){var {features:B,
statsFeatures:K}=w;w=B&&B.value;f.relatedFeatures=w?w.features:[];w=K&&K.value;f.relatedStatsFeatures=w?w.features:[]}};e.updateRelatedInfo=function({relatedInfo:w,fieldName:f,fieldInfo:B}){w.relatedFields.push(f);B.statisticType&&(f=new z({statisticType:B.statisticType,onStatisticField:f,outStatisticFieldName:f}),w.outStatistics.push(f))};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(e,l,k,g,q,x){function y(c){if(!c)return"en-us";if(z.has(c.toLowerCase()))return c.toLowerCase();{c=c.split("-")[0].toLowerCase();let h=null;for(m of z.keys())if(m.startsWith(c)){h=m;break}var m=h}return m||"en-us"}function D(){D=k._asyncToGenerator(function*(c=x.getLocale()){c=y(c);if(p&&c===d)return p;p=(new Promise((m,h)=>e(["../../chunks/index"],m,h))).then(m=>m.index);d=c;try{const [m,h]=yield Promise.all([p,z.get(d)()]);d===c&&(m.am4core.options.defaultLocale=h.default);m.am4core.options.suppressWarnings=
!0;m.am4core.options.autoDispose=!0}catch{return d=p=null}return p});return D.apply(this,arguments)}g="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var F=[{name:"default",colors:[].concat(g.slice(30,39),g.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const z=new Map([["ar",()=>(new Promise((c,m)=>e(["../../chunks/ar"],c,m))).then(c=>c.ar)],["bg-bg",()=>(new Promise((c,
m)=>e(["../../chunks/bg_BG"],c,m))).then(c=>c.bg_BG)],["bs-ba",()=>(new Promise((c,m)=>e(["../../chunks/bs_BA"],c,m))).then(c=>c.bs_BA)],["ca-es",()=>(new Promise((c,m)=>e(["../../chunks/ca_ES"],c,m))).then(c=>c.ca_ES)],["cs-cz",()=>(new Promise((c,m)=>e(["../../chunks/cs_CZ"],c,m))).then(c=>c.cs_CZ)],["da-dk",()=>(new Promise((c,m)=>e(["../../chunks/da_DK"],c,m))).then(c=>c.da_DK)],["de-de",()=>(new Promise((c,m)=>e(["../../chunks/de_DE"],c,m))).then(c=>c.de_DE)],["de-ch",()=>(new Promise((c,m)=>
e(["../../chunks/de_CH"],c,m))).then(c=>c.de_CH)],["el-gr",()=>(new Promise((c,m)=>e(["../../chunks/el_GR"],c,m))).then(c=>c.el_GR)],["en-us",()=>(new Promise((c,m)=>e(["../../chunks/en_US"],c,m))).then(c=>c.en_US)],["en-ca",()=>(new Promise((c,m)=>e(["../../chunks/en_CA"],c,m))).then(c=>c.en_CA)],["es-es",()=>(new Promise((c,m)=>e(["../../chunks/es_ES"],c,m))).then(c=>c.es_ES)],["et-ee",()=>(new Promise((c,m)=>e(["../../chunks/et_EE"],c,m))).then(c=>c.et_EE)],["fi-fi",()=>(new Promise((c,m)=>e(["../../chunks/fi_FI"],
c,m))).then(c=>c.fi_FI)],["fr-fr",()=>(new Promise((c,m)=>e(["../../chunks/fr_FR"],c,m))).then(c=>c.fr_FR)],["he-il",()=>(new Promise((c,m)=>e(["../../chunks/he_IL"],c,m))).then(c=>c.he_IL)],["hr-hr",()=>(new Promise((c,m)=>e(["../../chunks/hr_HR"],c,m))).then(c=>c.hr_HR)],["hu-hu",()=>(new Promise((c,m)=>e(["../../chunks/hu_HU"],c,m))).then(c=>c.hu_HU)],["id-id",()=>(new Promise((c,m)=>e(["../../chunks/id_ID"],c,m))).then(c=>c.id_ID)],["it-it",()=>(new Promise((c,m)=>e(["../../chunks/it_IT"],c,m))).then(c=>
c.it_IT)],["ja-jp",()=>(new Promise((c,m)=>e(["../../chunks/ja_JP"],c,m))).then(c=>c.ja_JP)],["ko-kr",()=>(new Promise((c,m)=>e(["../../chunks/ko_KR"],c,m))).then(c=>c.ko_KR)],["lt-lt",()=>(new Promise((c,m)=>e(["../../chunks/lt_LT"],c,m))).then(c=>c.lt_LT)],["lv-lv",()=>(new Promise((c,m)=>e(["../../chunks/lv_LV"],c,m))).then(c=>c.lv_LV)],["nb-no",()=>(new Promise((c,m)=>e(["../../chunks/nb_NO"],c,m))).then(c=>c.nb_NO)],["nl-nl",()=>(new Promise((c,m)=>e(["../../chunks/nl_NL"],c,m))).then(c=>c.nl_NL)],
["pl-pl",()=>(new Promise((c,m)=>e(["../../chunks/pl_PL"],c,m))).then(c=>c.pl_PL)],["pt-br",()=>(new Promise((c,m)=>e(["../../chunks/pt_BR"],c,m))).then(c=>c.pt_BR)],["pt-pt",()=>(new Promise((c,m)=>e(["../../chunks/pt_PT"],c,m))).then(c=>c.pt_PT)],["ro-ro",()=>(new Promise((c,m)=>e(["../../chunks/ro_RO"],c,m))).then(c=>c.ro_RO)],["ru-ru",()=>(new Promise((c,m)=>e(["../../chunks/ru_RU"],c,m))).then(c=>c.ru_RU)],["sk-sk",()=>(new Promise((c,m)=>e(["../../chunks/sk_SK"],c,m))).then(c=>c.sk_SK)],["sl-sl",
()=>(new Promise((c,m)=>e(["../../chunks/sl_SL"],c,m))).then(c=>c.sl_SL)],["sr-rs",()=>(new Promise((c,m)=>e(["../../chunks/sr_RS"],c,m))).then(c=>c.sr_RS)],["sv-se",()=>(new Promise((c,m)=>e(["../../chunks/sv_SE"],c,m))).then(c=>c.sv_SE)],["th-th",()=>(new Promise((c,m)=>e(["../../chunks/th_TH"],c,m))).then(c=>c.th_TH)],["tr-tr",()=>(new Promise((c,m)=>e(["../../chunks/tr_TR"],c,m))).then(c=>c.tr_TR)],["uk-ua",()=>(new Promise((c,m)=>e(["../../chunks/uk_UA"],c,m))).then(c=>c.uk_UA)],["vi-vn",()=>
(new Promise((c,m)=>e(["../../chunks/vi_VN"],c,m))).then(c=>c.vi_VN)],["zh-cn",()=>(new Promise((c,m)=>e(["../../chunks/zh_Hans"],c,m))).then(c=>c.zh_Hans)],["zh-hk",()=>(new Promise((c,m)=>e(["../../chunks/zh_Hant"],c,m))).then(c=>c.zh_Hant)],["zh-tw",()=>(new Promise((c,m)=>e(["../../chunks/zh_Hant"],c,m))).then(c=>c.zh_Hant)]]);let p,d;l.getChartLocale=y;l.getColorSet=function(c,m="default"){const h=F.find(b=>b.name===m);return h?h.colors.map(b=>c.color(b)):null};l.loadChartsModule=function(){return D.apply(this,
arguments)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../chunks/languageUtils ../../../core/Accessor ../../../core/HandleOwner ../../../core/throttle ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n,t,r,u,C,I,w,f,B){q=function(K){function P(T){var X=K.call(this,T)||this;X._abortController=null;X.expressionInfo=null;X.graphic=null;X.contentElement=null;X.contentElementViewModel=null;X.interceptor=null;X.view=null;X._cancelQuery=()=>{const {_abortController:W}=e._assertThisInitialized(X);W&&W.abort();X._abortController=null};X._createVM=()=>{var W,L;const R=null==(W=X.contentElement)?void 0:W.type;null==(L=X.contentElementViewModel)?void 0:L.destroy();
W="fields"===R?new w:"media"===R?new f:"text"===R?new I:null;X._set("contentElementViewModel",W)};X._compile=e._asyncToGenerator(function*(){X._cancelQuery();const W=new AbortController;X._abortController=W;yield X._compileExpression();X._abortController===W&&(X._abortController=null)});X._compileThrottled=y.throttle(X._compile,1,e._assertThisInitialized(X));X._compileExpression=e._asyncToGenerator(function*(){const {expressionInfo:W,graphic:L,interceptor:R,spatialReference:aa,map:H,view:N,_abortController:Q}=
e._assertThisInitialized(X);if(W&&L&&aa&&H){var v=yield B.loadArcadeUtils();if(Q===X._abortController)if((v=yield B.createCompiledExpression({arcadeUtils:v,expressionInfo:W,graphic:L,interceptor:R,map:H,spatialReference:aa,view:N}))&&"esri.arcade.Dictionary"===v.declaredClass){v=yield g.castAsJsonAsync(v,Q.signal);var E=null==v?void 0:v.type;v="media"===E?r.fromJSON(v):"text"===E?u.fromJSON(v):"fields"===E?t.fromJSON(v):null;X._set("contentElement",v)}else X._set("contentElement",null)}else X._set("contentElement",
null)});X.handles.add([D.init(e._assertThisInitialized(X),["expressionInfo","graphic","map","spatialReference","view"],X._compileThrottled),D.init(e._assertThisInitialized(X),"contentElement",X._createVM)]);return X}e._inheritsLoose(P,K);P.prototype.destroy=function(){var T;this._cancelQuery();null==(T=this.contentElementViewModel)?void 0:T.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};e._createClass(P,[{key:"spatialReference",get:function(){var T;return(null==
(T=this.view)?void 0:T.spatialReference)||null},set:function(T){void 0===T?this._clearOverride("spatialReference"):this._override("spatialReference",T)}},{key:"state",get:function(){const {_abortController:T,contentElement:X,contentElementViewModel:W}=this;return T?"loading":X||W?"ready":"disabled"}},{key:"map",get:function(){var T;return(null==(T=this.view)?void 0:T.map)||null},set:function(T){void 0===T?this._clearOverride("map"):this._override("map",T)}}]);return P}(x.HandleOwnerMixin(q));l.__decorate([F.property()],
q.prototype,"_abortController",void 0);l.__decorate([F.property({type:C})],q.prototype,"expressionInfo",void 0);l.__decorate([F.property({type:k})],q.prototype,"graphic",void 0);l.__decorate([F.property({readOnly:!0})],q.prototype,"contentElement",void 0);l.__decorate([F.property({readOnly:!0})],q.prototype,"contentElementViewModel",void 0);l.__decorate([F.property()],q.prototype,"interceptor",void 0);l.__decorate([F.property()],q.prototype,"spatialReference",null);l.__decorate([F.property({readOnly:!0})],
q.prototype,"state",null);l.__decorate([F.property()],q.prototype,"map",null);l.__decorate([F.property()],q.prototype,"view",void 0);return q=l.__decorate([c.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],q)})},"esri/chunks/languageUtils":function(){define("exports ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale ../arcade/featureset/support/shared".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n,t){function r(J,Y,ja){return""===Y||null===Y||void 0===Y||Y===ja||Y===ja?J:J=J.split(Y).join(ja)}function u(J){return J instanceof Sa||J instanceof l||J instanceof La}function C(J){return w(J)||B(J)||R(J)||f(J)||null===J||J===Xa||"number"===typeof J?!0:!1}function I(J,Y){return void 0===J?Y:J}function w(J){return"string"===typeof J||J instanceof String}function f(J){return"boolean"===typeof J}function B(J){return"number"===typeof J}function K(J){return"number"===
typeof J&&isFinite(J)&&Math.floor(J)===J}function P(J){return J instanceof Array}function T(J){return"esri.arcade.Feature"===(null==J?void 0:J.arcadeDeclaredClass)?!0:!1}function X(J){return!0===(J&&J.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===J.declaredRootClass)}function W(J){return!0===(J&&J.declaredRootClass&&"esri.arcade.featureSetCollection"===J.declaredRootClass)}function L(J){return J instanceof k}function R(J){return J instanceof Date}function aa(J,Y,ja){if(J.length<
Y||J.length>ja)throw Error("Function called with wrong number of Parameters");}function H(J){return 0>J?-Math.round(-J):Math.round(J)}function N(){let J=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Y){const ja=(J+16*Math.random())%16|0;J=Math.floor(J/16);return("x"===Y?ja:ja&3|8).toString(16)})}function Q(J,Y){if(!1===isNaN(J)){if(void 0===Y||null===Y||""===Y)return J.toString();Y=r(Y,"\u2030","");Y=r(Y,"\u00a4","");return h.format(J,{pattern:Y})}return J.toString()}
function v(J,Y){J=c.DateTime.fromJSDate(J);return void 0===Y||null===Y||""===Y?J.toISO({suppressMilliseconds:!0}):J.toFormat(E(Y),{locale:n.getLocale(),numberingSystem:"latn"})}function E(J){J=J.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let Y="";const ja=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const va of J.match(ja))switch(va){case "D":Y+=
"d";break;case "DD":Y+="dd";break;case "DDD":Y+="o";break;case "d":Y+="c";break;case "ddd":Y+="ccc";break;case "dddd":Y+="cccc";break;case "M":Y+="L";break;case "MM":Y+="LL";break;case "MMM":Y+="LLL";break;case "MMMM":Y+="LLLL";break;case "YY":Y+="yy";break;case "Y":case "YYYY":Y+="yyyy";break;case "Q":Y+="q";break;case "Z":Y+="ZZ";break;case "ZZ":Y+="ZZZ";break;case "S":Y+="'S'";break;case "SS":Y+="'SS'";break;case "SSS":Y+="u";break;case "A":case "a":Y+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":Y+=
va;break;default:Y=2<=va.length&&"["===va.slice(0,1)&&"]"===va.slice(-1)?Y+`'${va.slice(1,-1)}'`:Y+`'${va}'`}return Y}function G(J,Y,ja){switch(ja){case "\x3e":return J>Y;case "\x3c":return J<Y;case "\x3e\x3d":return J>=Y;case "\x3c\x3d":return J<=Y}return!1}function S(J,Y,ja){if(null===J){if(null===Y||Y===Xa)return G(null,null,ja);if(B(Y))return G(0,Y,ja);if(w(Y)||f(Y))return G(0,sa(Y),ja);if(R(Y))return G(0,Y.getTime(),ja)}if(J===Xa){if(null===Y||Y===Xa)return G(null,null,ja);if(B(Y))return G(0,
Y,ja);if(w(Y)||f(Y))return G(0,sa(Y),ja);if(R(Y))return G(0,Y.getTime(),ja)}else if(B(J)){if(B(Y))return G(J,Y,ja);if(f(Y))return G(J,sa(Y),ja);if(null===Y||Y===Xa)return G(J,0,ja);if(w(Y))return G(J,sa(Y),ja);if(R(Y))return G(J,Y.getTime(),ja)}else if(w(J)){if(w(Y))return G(fa(J),fa(Y),ja);if(R(Y))return G(sa(J),Y.getTime(),ja);if(B(Y))return G(sa(J),Y,ja);if(null===Y||Y===Xa)return G(sa(J),0,ja);if(f(Y))return G(sa(J),sa(Y),ja)}else if(R(J)){if(R(Y))return G(J,Y,ja);if(null===Y||Y===Xa)return G(J.getTime(),
0,ja);if(B(Y))return G(J.getTime(),Y,ja);if(f(Y)||w(Y))return G(J.getTime(),sa(Y),ja)}else if(f(J)){if(f(Y))return G(J,Y,ja);if(B(Y))return G(sa(J),sa(Y),ja);if(R(Y))return G(sa(J),Y.getTime(),ja);if(null===Y||Y===Xa)return G(sa(J),0,ja);if(w(Y))return G(sa(J),sa(Y),ja)}return!da(J,Y)||"\x3c\x3d"!==ja&&"\x3e\x3d"!==ja?!1:!0}function da(J,Y){if(J===Y||null===J&&Y===Xa||null===Y&&J===Xa)return!0;if(R(J)&&R(Y))return J.getTime()===Y.getTime();if(J instanceof g||J instanceof q)return J.equalityTest(Y);
if(J instanceof z&&Y instanceof z){const ja=J.cache._arcadeCacheId,va=Y.cache._arcadeCacheId;if(void 0!==ja&&null!==ja)return ja===va}return void 0!==J&&void 0!==Y&&null!==J&&null!==Y&&"object"===typeof J&&"object"===typeof Y&&(J._arcadeCacheId===Y._arcadeCacheId&&void 0!==J._arcadeCacheId&&null!==J._arcadeCacheId||J._underlyingGraphic===Y._underlyingGraphic&&void 0!==J._underlyingGraphic&&null!==J._underlyingGraphic)?!0:!1}function fa(J,Y){if(w(J))return J;if(null===J)return"";if(B(J))return Q(J,
Y);if(f(J))return J.toString();if(R(J))return v(J,Y);if(J instanceof D)return JSON.stringify(J.toJSON());if(P(J)){Y=[];for(var ja=0;ja<J.length;ja++)Y[ja]=oa(J[ja]);return"["+Y.join(",")+"]"}if(J instanceof k){Y=[];for(ja=0;ja<J.length();ja++)Y[ja]=oa(J.get(ja));return"["+Y.join(",")+"]"}return null!==J&&"object"===typeof J&&void 0!==J.castToText?J.castToText():u(J)?"object, Function":""}function la(J){const Y=[];if(!1===P(J))return null;if(J instanceof k){for(var ja=0;ja<J.length();ja++)Y[ja]=sa(J.get(ja));
return Y}for(ja=0;ja<J.length;ja++)Y[ja]=sa(J[ja]);return Y}function na(J,Y){if(w(J))return J;if(null===J)return"";if(B(J))return Q(J,Y);if(f(J))return J.toString();if(R(J))return v(J,Y);if(J instanceof D)return J instanceof y?'{"xmin":'+J.xmin.toString()+',"ymin":'+J.ymin.toString()+","+(J.hasZ?'"zmin":'+J.zmin.toString()+",":"")+(J.hasM?'"mmin":'+J.mmin.toString()+",":"")+'"xmax":'+J.xmax.toString()+',"ymax":'+J.ymax.toString()+","+(J.hasZ?'"zmax":'+J.zmax.toString()+",":"")+(J.hasM?'"mmax":'+J.mmax.toString()+
",":"")+'"spatialReference":'+Ga(J.spatialReference)+"}":Ga(J.toJSON(),(va,ua)=>va.key===ua.key?0:"spatialReference"===va.key?1:"spatialReference"===ua.key||va.key<ua.key?-1:va.key>ua.key?1:0);if(P(J)){Y=[];for(var ja=0;ja<J.length;ja++)Y[ja]=oa(J[ja]);return"["+Y.join(",")+"]"}if(J instanceof k){Y=[];for(ja=0;ja<J.length();ja++)Y[ja]=oa(J.get(ja));return"["+Y.join(",")+"]"}return null!==J&&"object"===typeof J&&void 0!==J.castToText?J.castToText():u(J)?"object, Function":""}function oa(J){return null===
J?"null":f(J)||B(J)||w(J)?JSON.stringify(J):J instanceof D||J instanceof k||J instanceof Array?na(J):J instanceof Date?JSON.stringify(v(J,"")):null!==J&&"object"===typeof J&&void 0!==J.castToText?J.castToText():"null"}function sa(J,Y){return B(J)?J:null===J||""===J?0:R(J)?NaN:f(J)?J?1:0:P(J)||""===J||void 0===J?NaN:void 0!==Y&&w(J)?(Y=r(Y,"\u2030",""),Y=r(Y,"\u00a4",""),h.parse(J,{pattern:Y})):J===Xa?0:Number(J)}function ta(J){return R(J)?J:w(J)&&(J=V(J))?J.toJSDate():null}function M(J){return R(J)?
c.DateTime.fromJSDate(J):w(J)?V(J):null}function V(J){const Y=/ (\d\d)/;let ja=c.DateTime.fromISO(J);return ja.isValid||Y.test(J)&&(J=J.replace(Y,"T$1"),ja=c.DateTime.fromISO(J),ja.isValid)?ja:null}function ca(J){return f(J)?J:w(J)?(J=J.toLowerCase(),"true"===J?!0:!1):B(J)?0===J||isNaN(J)?!1:!0:!1}function ha(J,Y){if(m.isNone(J))return null;if(null===J.spatialReference||void 0===J.spatialReference)J.spatialReference=Y;return J}function ka(J){if(null===J)return null;if(J instanceof z)return"NaN"===
J.x||null===J.x||isNaN(J.x)?null:J;if(J instanceof p){if(0===J.rings.length)return null;for(const Y of J.rings)if(0<Y.length)return J;return null}if(J instanceof d){if(0===J.paths.length)return null;for(const Y of J.paths)if(0<Y.length)return J;return null}return J instanceof F?0===J.points.length?null:J:J instanceof y?"NaN"===J.xmin||null===J.xmin||isNaN(J.xmin)?null:J:null}function pa(J,Y){if(!J||!J.domain)return Y;let ja=null;if("string"===J.field.type||"esriFieldTypeString"===J.field.type)Y=fa(Y);
else{if(null===Y||void 0===Y)return null;if(""===Y)return Y;Y=sa(Y)}for(let va=0;va<J.domain.codedValues.length;va++){const ua=J.domain.codedValues[va];ua.code===Y&&(ja=ua)}return null===ja?Y:ja.name}function za(J,Y){if(!J||!J.domain)return Y;let ja=null;Y=fa(Y);for(let va=0;va<J.domain.codedValues.length;va++){const ua=J.domain.codedValues[va];ua.name===Y&&(ja=ua)}return null===ja?Y:ja.code}function Da(J,Y,ja=null,va=null){if(!Y||!Y.fields)return null;let ua=null;for(let bb=0;bb<Y.fields.length;bb++){const ab=
Y.fields[bb];ab.name.toLowerCase()===J.toString().toLowerCase()&&(ua=ab)}if(null===ua)throw Error("Field not found");let Ma,Ra;null===va&&ja&&Y.typeIdField&&(va=ja.hasField(Y.typeIdField)?ja.field(Y.typeIdField):null);null!==va&&void 0!==va&&Y.types.some(function(bb){return bb.id===va?((Ma=bb.domains&&bb.domains[ua.name])&&"inherited"===Ma.type&&(Ma=Ba(ua.name,Y),Ra=!0),!0):!1});Ra||Ma||(Ma=Ba(J,Y));return{field:ua,domain:Ma}}function Ba(J,Y){let ja;Y.fields.some(function(va){va.name.toLowerCase()===
J.toLowerCase()&&(ja=va.domain);return!!ja});return ja}function Ga(J,Y){Y||(Y={});"function"===typeof Y&&(Y={cmp:Y});const ja="boolean"===typeof Y.cycles?Y.cycles:!1,va=Y.cmp&&function(Ma){return function(Ra){return function(bb,ab){return Ma({key:bb,value:Ra[bb]},{key:ab,value:Ra[ab]})}}}(Y.cmp),ua=[];return function bb(Ra){Ra&&Ra.toJSON&&"function"===typeof Ra.toJSON&&(Ra=Ra.toJSON());if(void 0!==Ra){if("number"===typeof Ra)return isFinite(Ra)?""+Ra:"null";if("object"!==typeof Ra)return JSON.stringify(Ra);
var ab;if(Array.isArray(Ra)){var gb="[";for(ab=0;ab<Ra.length;ab++)ab&&(gb+=","),gb+=bb(Ra[ab])||"null";return gb+"]"}if(null===Ra)return"null";if(-1!==ua.indexOf(Ra)){if(ja)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Cb=ua.push(Ra)-1,xb=Object.keys(Ra).sort(va&&va(Ra));gb="";for(ab=0;ab<xb.length;ab++){const rb=xb[ab],jb=bb(Ra[rb]);jb&&(gb&&(gb+=","),gb+=JSON.stringify(rb)+":"+jb)}ua.splice(Cb,1);return"{"+gb+"}"}}(J)}function Ka(J){if(null===
J)return null;const Y=[];for(const ja of J)ja&&ja.arcadeDeclaredClass&&"esri.arcade.Feature"===ja.arcadeDeclaredClass?Y.push(ja.geometry()):Y.push(ja);return Y}function Ea(J,Y){if(Y instanceof z)J.push(Y.hasZ?Y.hasM?[Y.x,Y.y,Y.z,Y.m]:[Y.x,Y.y,Y.z]:[Y.x,Y.y]);else throw Error("Invalid Argument");}function Ia(J,Y){if(P(J)||L(J)){let ja=!1,va=!1,ua=[];if(P(J)){for(const Ma of J)Ea(ua,Ma);0<ua.length&&(Y=J[0].spatialReference,ja=J[0].hasZ,va=J[0].hasM)}else if(J instanceof q)ua=J._elements,0<ua.length&&
(ja=J._hasZ,va=J._hasM,Y=J.get(0).spatialReference);else if(L(J)){for(const Ma of J.toArray())Ea(ua,Ma);0<ua.length&&(Y=J.get(0).spatialReference,ja=!0===J.get(0).hasZ,va=!0===J.get(0).hasM)}else throw Error("Invalid Argument");if(0===ua.length)return null;!1===b.isClockwise(ua,va,ja)&&(ua=ua.slice(0).reverse());return new p({rings:[ua],spatialReference:Y,hasZ:ja,hasM:va})}return J}function kb(J,Y){if(P(J)||L(J)){let ja=!1,va=!1,ua=[];if(P(J)){for(const Ma of J)Ea(ua,Ma);0<ua.length&&(Y=J[0].spatialReference,
ja=!0===J[0].hasZ,va=!0===J[0].hasM)}else if(J instanceof q)ua=J._elements,0<ua.length&&(ja=J._hasZ,va=J._hasM,Y=J.get(0).spatialReference);else if(L(J)){for(const Ma of J.toArray())Ea(ua,Ma);0<ua.length&&(Y=J.get(0).spatialReference,ja=!0===J.get(0).hasZ,va=!0===J.get(0).hasM)}return 0===ua.length?null:new d({paths:[ua],spatialReference:Y,hasZ:ja,hasM:va})}return J}function Wa(J,Y){if(P(J)||L(J)){let ja=!1,va=!1,ua=[];if(P(J)){for(const Ma of J)Ea(ua,Ma);0<ua.length&&(Y=J[0].spatialReference,ja=
!0===J[0].hasZ,va=!0===J[0].hasM)}else if(J instanceof q)ua=J._elements,0<ua.length&&(ja=J._hasZ,va=J._hasM,Y=J.get(0).spatialReference);else if(L(J)){for(const Ma of J.toArray())Ea(ua,Ma);0<ua.length&&(Y=J.get(0).spatialReference,ja=!0===J.get(0).hasZ,va=!0===J.get(0).hasM)}return 0===ua.length?null:new F({points:ua,spatialReference:Y,hasZ:ja,hasM:va})}return J}function sb(J,Y=!1){const ja=[];if(null===J)return ja;if(!0===P(J)){for(var va=0;va<J.length;va++){var ua=fa(J[va]);""===ua&&!0!==Y||ja.push(ua)}return ja}if(J instanceof
k){for(va=0;va<J.length();va++)ua=fa(J.get(va)),""===ua&&!0!==Y||ja.push(ua);return ja}return C(J)?(J=fa(J),""===J&&!0!==Y||ja.push(J),ja):[]}function qb(J){lb++;return 0===lb%100?(lb=0,x.create(Y=>{setTimeout(()=>{Y(J)},0)})):J}function Ta(J,Y,ja){switch(ja){case "\x26":return J&Y;case "|":return J|Y;case "^":return J^Y;case "\x3c\x3c":return J<<Y;case "\x3e\x3e":return J>>Y;case "\x3e\x3e\x3e":return J>>>Y}}function Va(J,Y=null){if(null!=J){if(f(J)||B(J)||w(J))return J;if(J instanceof D)return!0===
(null==Y?void 0:Y.keepGeometryType)?J:J.toJSON();if(J instanceof k)return J.toArray().map(ja=>Va(ja,Y));if(J instanceof Array)return J.map(ja=>Va(ja,Y));if(J instanceof Date)return J;if(null!==J&&"object"===typeof J&&void 0!==J.castAsJson)return J.castAsJson(Y)}return null}function Ca(J,Y,ja,va,ua){return ba(J,Y,ja).then(Ma=>{ua[va]=Ma})}function ba(J,Y=null,ja=null){J instanceof k&&(J=J.toArray());if(null!=J){if(C(J)||J instanceof D||J instanceof Date)return x.resolve(Va(J,ja));if(J instanceof Array){const va=
[],ua=[];for(const Ma of J)null===Ma||C(Ma)||Ma instanceof D||Ma instanceof Date?ua.push(Va(Ma,ja)):(ua.push(null),va.push(Ca(Ma,Y,ja,ua.length-1,ua)));return 0<va.length?x.all(va).then(()=>ua):x.resolve(ua)}if(null!==J&&"object"===typeof J&&void 0!==J.castAsJsonAsync)return J.castAsJsonAsync(Y,ja)}return x.resolve(null)}function ia(J,Y,ja){const va=J.fullSchema();return null!==va&&va.fields?Da(Y,va,J,ja):null}function qa(J){J=J.fullSchema();return null!==J&&J.fields?J.typeIdField?{subtypeField:J.typeIdField,
subtypes:J.types?J.types.map(Y=>({name:Y.name,code:Y.id})):[]}:null:null}function wa(J,Y,ja,va){const ua=J.fullSchema();if(null===ua||!ua.fields)return null;va=Da(Y,ua,J,va);if(void 0===ja)try{ja=J.field(Y)}catch(Ma){return null}return pa(va,ja)}function Aa(J,Y,ja,va){const ua=J.fullSchema();if(null===ua||!ua.fields)return null;if(void 0===ja){try{ja=J.field(Y)}catch(Ma){return null}return ja}J=Da(Y,ua,J,va);return za(J,ja)}function xa(J){J=J.fullSchema();if(null===J||!J.fields)return null;const Y=
[];for(const ja of J.fields)Y.push(t.esriFieldToJson(ja));return{objectIdField:J.objectIdField,globalIdField:J.globalIdField,geometryType:void 0===t.layerGeometryEsriRestConstants[J.geometryType]?"":t.layerGeometryEsriRestConstants[J.geometryType],fields:Y}}let Ja=function(J){this.value=J},Ua=function(J){this.value=J},Sa=function(J){this.fn=J},La=function(J,Y){this.paramCount=Y;this.fn=J};const mb=Sa,cb=La,Xa={type:"VOID"},hb={type:"BREAK"},nb={type:"CONTINUE"};let lb=0;const ob=Object.freeze({__proto__:null,
ReturnResultE:Ja,ImplicitResultE:Ua,NativeFunctionE:Sa,SizzleFunctionE:La,NativeFunction:mb,ImplicitResult:Ua,ReturnResult:Ja,SizzleFunction:cb,voidOperation:Xa,breakResult:hb,continueResult:nb,multiReplace:r,isFunctionParameter:u,isSimpleType:C,defaultUndefined:I,isString:w,isBoolean:f,isNumber:B,isInteger:K,isArray:P,isFeature:T,isFeatureSet:X,isFeatureSetCollection:W,isImmutableArray:L,isDate:R,pcCheck:aa,absRound:H,generateUUID:N,formatNumber:Q,formatDate:v,standardiseDateFormat:E,greaterThanLessThan:S,
equalityTest:da,toString:fa,toNumberArray:la,toStringExplicit:na,toNumber:sa,toDate:ta,toDateTime:M,toBoolean:ca,fixSpatialReference:ha,fixNullGeometry:ka,getDomainValue:pa,getDomainCode:za,getDomain:Da,stableStringify:Ga,autoCastFeatureToGeometry:Ka,autoCastArrayOfPointsToPolygon:Ia,autoCastArrayOfPointsToPolyline:kb,autoCastArrayOfPointsToMultiPoint:Wa,toStringArray:sb,tick:qb,binaryOperator:Ta,castAsJson:Va,castAsJsonAsync:ba,featureFullDomain:ia,featureSubtypes:qa,featureDomainValueLookup:wa,
featureDomainCodeLookup:Aa,featureSchema:xa});e.ImplicitResult=Ua;e.ImplicitResultE=Ua;e.NativeFunction=mb;e.NativeFunctionE=Sa;e.ReturnResult=Ja;e.ReturnResultE=Ja;e.SizzleFunction=cb;e.SizzleFunctionE=La;e.absRound=H;e.autoCastArrayOfPointsToMultiPoint=Wa;e.autoCastArrayOfPointsToPolygon=Ia;e.autoCastArrayOfPointsToPolyline=kb;e.autoCastFeatureToGeometry=Ka;e.binaryOperator=Ta;e.breakResult=hb;e.castAsJson=Va;e.castAsJsonAsync=ba;e.continueResult=nb;e.defaultUndefined=I;e.equalityTest=da;e.featureDomainCodeLookup=
Aa;e.featureDomainValueLookup=wa;e.featureFullDomain=ia;e.featureSchema=xa;e.featureSubtypes=qa;e.fixNullGeometry=ka;e.fixSpatialReference=ha;e.formatDate=v;e.formatNumber=Q;e.generateUUID=N;e.getDomain=Da;e.getDomainCode=za;e.getDomainValue=pa;e.greaterThanLessThan=S;e.isArray=P;e.isBoolean=f;e.isDate=R;e.isFeature=T;e.isFeatureSet=X;e.isFeatureSetCollection=W;e.isFunctionParameter=u;e.isImmutableArray=L;e.isInteger=K;e.isNumber=B;e.isSimpleType=C;e.isString=w;e.lc=ob;e.multiReplace=r;e.pcCheck=
aa;e.stableStringify=Ga;e.standardiseDateFormat=E;e.tick=qb;e.toBoolean=ca;e.toDate=ta;e.toDateTime=M;e.toNumber=sa;e.toNumberArray=la;e.toString=fa;e.toStringArray=sb;e.toStringExplicit=na;e.voidOperation=Xa})},"esri/arcade/FunctionWrapper":function(){define(function(){return function(e,l){this.context=this.definition=null;this.definition=e;this.context=l}})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function e(k=[]){this._elements=k}var l=e.prototype;l.length=function(){return this._elements.length};
l.get=function(k){return this._elements[k]};l.toArray=function(){const k=[];for(let g=0;g<this.length();g++)k.push(this.get(g));return k};return e}()})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","./ImmutablePointArray"],function(e,l,k){return function(g){function q(y,D,F,z,p){y=g.call(this,y)||this;y._lazyPath=[];y._hasZ=!1;y._hasM=!1;y._hasZ=F;y._hasM=z;y._spRef=D;y._cacheId=p;return y}e._inheritsLoose(q,g);var x=q.prototype;x.get=
function(y){if(void 0===this._lazyPath[y]){const D=this._elements[y];if(void 0===D)return;this._lazyPath[y]=new k(D,this._spRef,this._hasZ,this._hasM,this._cacheId,y)}return this._lazyPath[y]};x.equalityTest=function(y){return y===this?!0:null===y||!1===y instanceof q?!1:y.getUniqueHash()===this.getUniqueHash()};x.getUniqueHash=function(){return this._cacheId.toString()};return q}(l)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","../geometry/Point"],
function(e,l,k){return function(g){function q(y,D,F,z,p,d){y=g.call(this,y)||this;y._lazyPt=[];y._hasZ=!1;y._hasM=!1;y._spRef=D;y._hasZ=F;y._hasM=z;y._cacheId=p;y._partId=d;return y}e._inheritsLoose(q,g);var x=q.prototype;x.get=function(y){if(void 0===this._lazyPt[y]){const D=this._elements[y];if(void 0===D)return;const F=this._hasZ,z=this._hasM;let p=null;p=F&&!z?new k(D[0],D[1],D[2],void 0,this._spRef):z&&!F?new k(D[0],D[1],void 0,D[2],this._spRef):F&&z?new k(D[0],D[1],D[2],D[3],this._spRef):new k(D[0],
D[1],this._spRef);p.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+y.toString();this._lazyPt[y]=p}return this._lazyPt[y]};x.equalityTest=function(y){return y===this?!0:null===y||!1===y instanceof q?!1:y.getUniqueHash()===this.getUniqueHash()};x.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return q}(l)})},"esri/chunks/datetime":function(){define(["exports"],function(e){function l(a){return"undefined"===typeof a}function k(a){return"number"===
typeof a}function g(a){return"number"===typeof a&&0===a%1}function q(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function x(a,A,O){if(0!==a.length)return a.reduce((U,Z)=>{Z=[A(Z),Z];return U?O(U[0],Z[0])===U[0]?U:Z:Z},null)[1]}function y(a,A){return A.reduce((O,U)=>{O[U]=a[U];return O},{})}function D(a,A){return Object.prototype.hasOwnProperty.call(a,A)}function F(a,A,O){return g(a)&&a>=A&&a<=O}function z(a,A=2){return 0>a?"-"+(""+-a).padStart(A,"0"):(""+a).padStart(A,
"0")}function p(a){if(!l(a)&&null!==a&&""!==a)return parseInt(a,10)}function d(a){if(!l(a)&&null!==a&&""!==a)return parseFloat(a)}function c(a){if(!l(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function m(a,A,O=!1){A=10**A;return(O?Math.trunc:Math.round)(a*A)/A}function h(a){return 0===a%4&&(0!==a%100||0===a%400)}function b(a,A){var O=A-1;O=O-12*Math.floor(O/12)+1;return 2===O?h(a+(A-O)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][O-1]}function n(a){let A=Date.UTC(a.year,
a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(A=new Date(A),A.setUTCFullYear(A.getUTCFullYear()-1900));return+A}function t(a){var A=a-1;A=(A+Math.floor(A/4)-Math.floor(A/100)+Math.floor(A/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===A?53:52}function r(a){return 99<a?a:60<a?1900+a:2E3+a}function u(a,A,O,U=null){a=new Date(a);const Z={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};U&&
(Z.timeZone=U);return(A=(new Intl.DateTimeFormat(O,{timeZoneName:A,...Z})).formatToParts(a).find(ea=>"timezonename"===ea.type.toLowerCase()))?A.value:null}function C(a,A){a=parseInt(a,10);Number.isNaN(a)&&(a=0);A=parseInt(A,10)||0;A=0>a||Object.is(a,-0)?-A:A;return 60*a+A}function I(a){const A=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(A))throw new fb(`Invalid unit value ${a}`);return A}function w(a,A){const O={};for(const U in a)if(D(a,U)){const Z=a[U];void 0!==Z&&null!==Z&&(O[A(U)]=
I(Z))}return O}function f(a,A){const O=Math.trunc(Math.abs(a/60)),U=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(A){case "short":return`${a}${z(O,2)}:${z(U,2)}`;case "narrow":return`${a}${O}${0<U?`:${U}`:""}`;case "techie":return`${a}${z(O,2)}${z(U,2)}`;default:throw new RangeError(`Value format ${A} is out of range for property format`);}}function B(a){return y(a,["hour","minute","second","millisecond"])}function K(a){switch(a){case "narrow":return[...Gc];case "short":return[...Tb];case "long":return[...Hc];
case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function P(a){switch(a){case "narrow":return[...Ic];case "short":return[...Ub];case "long":return[...Vb];case "numeric":return"1234567".split("");default:return null}}function T(a){switch(a){case "narrow":return[...Jc];case "short":return[...Kc];case "long":return[...Lc];default:return null}}function X(a,A,O="always",U=!1){const Z={years:["year","yr."],
quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var ea=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===O&&ea)switch(O="days"===a,A){case 1:return O?"tomorrow":`next ${Z[a][0]}`;case -1:return O?"yesterday":`last ${Z[a][0]}`;case 0:return O?"today":`this ${Z[a][0]}`}O=Object.is(A,-0)||0>A;A=Math.abs(A);ea=1===A;const ma=Z[a];a=U?ea?ma[1]:ma[2]||ma[1]:ea?Z[a][0]:a;return O?
`${A} ${a} ago`:`in ${A} ${a}`}function W(a,A){let O="";for(const U of a)O=U.literal?O+U.val:O+A(U.val);return O}function L(a,A){if(l(a)||null===a)return A;if(a instanceof yb)return a;if("string"===typeof a){const O=a.toLowerCase();return"local"===O||"system"===O?A:"utc"===O||"gmt"===O?db.utcInstance:db.parseSpecifier(O)||tb.create(a)}return k(a)?db.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new Mc(a)}function R(a,A={}){const O=JSON.stringify([a,A]);let U=Wb[O];U||(U=
new Intl.ListFormat(a,A),Wb[O]=U);return U}function aa(a,A={}){const O=JSON.stringify([a,A]);let U=Gb[O];U||(U=new Intl.DateTimeFormat(a,A),Gb[O]=U);return U}function H(a,A={}){const O=JSON.stringify([a,A]);let U=Hb[O];U||(U=new Intl.NumberFormat(a,A),Hb[O]=U);return U}function N(a,A={}){const {base:O,...U}=A,Z=JSON.stringify([a,U]);let ea=Ib[Z];ea||(ea=new Intl.RelativeTimeFormat(a,A),Ib[Z]=ea);return ea}function Q(a){const A=[];for(let O=1;12>=O;O++){const U=Ha.utc(2016,O,1);A.push(a(U))}return A}
function v(a){const A=[];for(let O=1;7>=O;O++){const U=Ha.utc(2016,11,13+O);A.push(a(U))}return A}function E(a,A,O,U,Z){a=a.listingMode(O);return"error"===a?null:"en"===a?U(A):Z(A)}function G(...a){a=a.reduce((A,O)=>A+O.source,"");return RegExp(`^${a}$`)}function S(...a){return A=>a.reduce(([O,U,Z],ea)=>{const [ma,ra,ya]=ea(A,Z);return[{...O,...ma},U||ra,ya]},[{},null,1]).slice(0,2)}function da(a,...A){if(null==a)return[null,null];for(const [O,U]of A)if(A=O.exec(a))return U(A);return[null,null]}function fa(...a){return(A,
O)=>{const U={};let Z;for(Z=0;Z<a.length;Z++)U[a[Z]]=p(A[O+Z]);return[U,null,O+Z]}}function la(a,A,O){a=a[A];return l(a)?O:p(a)}function na(a,A){return[{year:la(a,A),month:la(a,A+1,1),day:la(a,A+2,1)},null,A+3]}function oa(a,A){return[{hours:la(a,A,0),minutes:la(a,A+1,0),seconds:la(a,A+2,0),milliseconds:c(a[A+3])},null,A+4]}function sa(a,A){const O=!a[A]&&!a[A+1];a=C(a[A+1],a[A+2]);return[{},O?null:db.instance(a),A+3]}function ta(a,A){return[{},a[A]?tb.create(a[A]):null,A+1]}function M(a){const [A,
O,U,Z,ea,ma,ra,ya,Pa]=a,Fa="-"===A[0];a=ya&&"-"===ya[0];const Na=(Qa,pb=!1)=>void 0!==Qa&&(pb||Qa&&Fa)?-Qa:Qa;return[{years:Na(d(O)),months:Na(d(U)),weeks:Na(d(Z)),days:Na(d(ea)),hours:Na(d(ma)),minutes:Na(d(ra)),seconds:Na(d(ya),"-0"===ya),milliseconds:Na(c(Pa),a)}]}function V(a,A,O,U,Z,ea,ma){A={year:2===A.length?r(p(A)):p(A),month:Tb.indexOf(O)+1,day:p(U),hour:p(Z),minute:p(ea)};ma&&(A.second=p(ma));a&&(A.weekday=3<a.length?Vb.indexOf(a)+1:Ub.indexOf(a)+1);return A}function ca(a){const [,A,O,U,
Z,ea,ma,ra,ya,Pa,Fa,Na]=a;a=V(A,Z,U,O,ea,ma,ra);let Qa;Qa=ya?Nc[ya]:Pa?0:C(Fa,Na);return[a,new db(Qa)]}function ha(a){const [,A,O,U,Z,ea,ma,ra]=a;return[V(A,Z,U,O,ea,ma,ra),db.utcInstance]}function ka(a){const [,A,O,U,Z,ea,ma,ra]=a;return[V(A,ra,O,U,Z,ea,ma),db.utcInstance]}function pa(a,A,O=!1){a={values:O?A.values:{...a.values,...A.values||{}},loc:a.loc.clone(A.loc),conversionAccuracy:A.conversionAccuracy||a.conversionAccuracy};return new Oa(a)}function za(a,A,O,U,Z){a=a[Z][O];var ea=A[O]/a;ea=
Math.sign(ea)!==Math.sign(U[Z])&&0!==U[Z]&&1>=Math.abs(ea)?0>ea?Math.floor(ea):Math.ceil(ea):Math.trunc(ea);U[Z]+=ea;A[O]-=ea*a}function Da(a,A){Oc.reduce((O,U)=>{if(l(A[U]))return O;O&&za(a,A,O,A,U);return U},null)}function Ba(a,A){a=A.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(Oa.fromMillis(a).as("days"))}function Ga(a,A,O){var U=[["years",(ra,ya)=>ya.year-ra.year],["quarters",(ra,ya)=>ya.quarter-ra.quarter],["months",
(ra,ya)=>ya.month-ra.month+12*(ya.year-ra.year)],["weeks",(ra,ya)=>{ra=Ba(ra,ya);return(ra-ra%7)/7}],["days",Ba]];const Z={};let ea,ma;for(const [ra,ya]of U)0<=O.indexOf(ra)&&(ea=ra,U=ya(a,A),ma=a.plus({[ra]:U}),ma>A?(a=a.plus({[ra]:U-1}),--U):a=ma,Z[ra]=U);return[a,Z,ma,ea]}function Ka(a,A,O,U){let [Z,ea,ma,ra]=Ga(a,A,O);a=A-Z;O=O.filter(ya=>0<=["hours","minutes","seconds","milliseconds"].indexOf(ya));0===O.length&&(ma<A&&(ma=Z.plus({[ra]:1})),ma!==Z&&(ea[ra]=(ea[ra]||0)+a/(ma-Z)));A=Oa.fromObject(ea,
U);return 0<O.length?Oa.fromMillis(a,U).shiftTo(...O).plus(A):A}function Ea({numberingSystem:a},A=""){return new RegExp(`${Jb[a||"latn"]}${A}`)}function Ia(a,A=O=>O){return{regex:a,deser:([O])=>{{let U=parseInt(O,10);if(isNaN(U)){U="";for(let Z=0;Z<O.length;Z++){const ea=O.charCodeAt(Z);if(-1!==O[Z].search(Jb.hanidec))U+=Pc.indexOf(O[Z]);else for(const ma in Xb){const [ra,ya]=Xb[ma];ea>=ra&&ea<=ya&&(U+=ea-ra)}}O=parseInt(U,10)}else O=U}return A(O)}}}function kb(a){return a.replace(/\./g,"\\.?").replace(Kb,
Yb)}function Wa(a,A){return null===a?null:{regex:RegExp(a.map(kb).join("|")),deser:([O])=>a.findIndex(U=>O.replace(/\./g,"").replace(Kb," ").toLowerCase()===U.replace(/\./g,"").replace(Kb," ").toLowerCase())+A}}function sb(a,A){return{regex:a,deser:([,O,U])=>C(O,U),groups:A}}function qb(a){return{regex:a,deser:([A])=>A}}function Ta(a,A){const O=Ea(A),U=Ea(A,"{2}"),Z=Ea(A,"{3}"),ea=Ea(A,"{4}"),ma=Ea(A,"{6}"),ra=Ea(A,"{1,2}"),ya=Ea(A,"{1,3}"),Pa=Ea(A,"{1,6}"),Fa=Ea(A,"{1,9}"),Na=Ea(A,"{2,4}"),Qa=Ea(A,
"{4,6}"),pb=zb=>({regex:RegExp(zb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Qc])=>Qc,literal:!0}),wb=(zb=>{if(a.literal)return pb(zb);switch(zb.val){case "G":return Wa(A.eras("short",!1),0);case "GG":return Wa(A.eras("long",!1),0);case "y":return Ia(Pa);case "yy":return Ia(Na,r);case "yyyy":return Ia(ea);case "yyyyy":return Ia(Qa);case "yyyyyy":return Ia(ma);case "M":return Ia(ra);case "MM":return Ia(U);case "MMM":return Wa(A.months("short",!0,!1),1);case "MMMM":return Wa(A.months("long",
!0,!1),1);case "L":return Ia(ra);case "LL":return Ia(U);case "LLL":return Wa(A.months("short",!1,!1),1);case "LLLL":return Wa(A.months("long",!1,!1),1);case "d":return Ia(ra);case "dd":return Ia(U);case "o":return Ia(ya);case "ooo":return Ia(Z);case "HH":return Ia(U);case "H":return Ia(ra);case "hh":return Ia(U);case "h":return Ia(ra);case "mm":return Ia(U);case "m":return Ia(ra);case "q":return Ia(ra);case "qq":return Ia(U);case "s":return Ia(ra);case "ss":return Ia(U);case "S":return Ia(ya);case "SSS":return Ia(Z);
case "u":return qb(Fa);case "uu":return qb(ra);case "uuu":return Ia(O);case "a":return Wa(A.meridiems(),0);case "kkkk":return Ia(ea);case "kk":return Ia(Na,r);case "W":return Ia(ra);case "WW":return Ia(U);case "E":case "c":return Ia(O);case "EEE":return Wa(A.weekdays("short",!1,!1),1);case "EEEE":return Wa(A.weekdays("long",!1,!1),1);case "ccc":return Wa(A.weekdays("short",!0,!1),1);case "cccc":return Wa(A.weekdays("long",!0,!1),1);case "Z":case "ZZ":return sb(new RegExp(`([+-]${ra.source})(?::(${U.source}))?`),
2);case "ZZZ":return sb(new RegExp(`([+-]${ra.source})(${U.source})?`),2);case "z":return qb(/[a-z_+-/]{1,256}?/i);default:return pb(zb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};wb.token=a;return wb}function Va(a){return[`^${a.map(A=>A.regex).reduce((A,O)=>`${A}(${O.source})`,"")}$`,a]}function Ca(a,A,O){if(a=a.match(A)){A={};let U=1;for(const Z in O)if(D(O,Z)){const ea=O[Z],ma=ea.groups?ea.groups+1:1;!ea.literal&&ea.token&&(A[ea.token.val[0]]=ea.deser(a.slice(U,
U+ma)));U+=ma}return[a,A]}return[a,{}]}function ba(a){const A=Z=>{switch(Z){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let O=null,U;l(a.z)||(O=tb.create(a.z));l(a.Z)||(O||(O=new db(a.Z)),U=a.Z);l(a.q)||
(a.M=3*(a.q-1)+1);l(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);l(a.u)||(a.S=c(a.u));return[Object.keys(a).reduce((Z,ea)=>{const ma=A(ea);ma&&(Z[ma]=a[ea]);return Z},{}),O,U]}function ia(){Lb||(Lb=Ha.fromMillis(1555555555555));return Lb}function qa(a,A){if(a.literal)return a;const O=eb.macroTokenToFormatOpts(a.val);if(!O)return a;A=eb.create(A,O).formatDateTimeParts(ia()).map(U=>{{const {type:ea,value:ma}=U;if("literal"===ea)U={literal:!0,val:ma};else{U=O[ea];
var Z=Rc[ea];"object"===typeof Z&&(Z=Z[U]);U=Z?{literal:!1,val:Z}:void 0}}return U});return A.includes(void 0)?a:A}function wa(a,A){return Array.prototype.concat(...a.map(O=>qa(O,A)))}function Aa(a,A,O){O=wa(eb.parseFormat(O),a);var U=O.map(ea=>Ta(ea,a));const Z=U.find(ea=>ea.invalidReason);if(Z)return{input:A,tokens:O,invalidReason:Z.invalidReason};{const [ea,ma]=Va(U);U=RegExp(ea,"i");const [ra,ya]=Ca(A,U,ma),[Pa,Fa,Na]=ya?ba(ya):[null,null,void 0];if(D(ya,"a")&&D(ya,"H"))throw new Ab("Can't include meridiem when specifying 24-hour format");
return{input:A,tokens:O,regex:U,rawMatches:ra,matches:ya,result:Pa,zone:Fa,specificOffset:Na}}}function xa(a,A){return new ib("unit out of range",`you specified ${A} (of type ${typeof A}) as a ${a}, which is invalid`)}function Ja(a,A,O){a=(new Date(Date.UTC(a,A-1,O))).getUTCDay();return 0===a?7:a}function Ua(a,A){a=h(a)?Mb:Nb;const O=a.findIndex(U=>U<A);return{month:O+1,day:A-a[O]}}function Sa(a){const {year:A,month:O,day:U}=a;var Z=U+(h(A)?Mb:Nb)[O-1];const ea=Ja(A,O,U);Z=Math.floor((Z-ea+10)/7);
let ma;1>Z?(ma=A-1,Z=t(ma)):Z>t(A)?(ma=A+1,Z=1):ma=A;return{weekYear:ma,weekNumber:Z,weekday:ea,...B(a)}}function La(a){const {weekYear:A,weekNumber:O,weekday:U}=a;var Z=Ja(A,1,4),ea=h(A)?366:365;Z=7*O+U-Z-3;1>Z?(ea=A-1,Z+=h(ea)?366:365):Z>ea?(ea=A+1,Z-=h(A)?366:365):ea=A;const {month:ma,day:ra}=Ua(ea,Z);return{year:ea,month:ma,day:ra,...B(a)}}function mb(a){const {year:A,month:O,day:U}=a;var Z=U+(h(A)?Mb:Nb)[O-1];return{year:A,ordinal:Z,...B(a)}}function cb(a){const {year:A,ordinal:O}=a,{month:U,
day:Z}=Ua(A,O);return{year:A,month:U,day:Z,...B(a)}}function Xa(a){const A=g(a.year),O=F(a.month,1,12),U=F(a.day,1,b(a.year,a.month));return A?O?U?!1:xa("day",a.day):xa("month",a.month):xa("year",a.year)}function hb(a){const {hour:A,minute:O,second:U,millisecond:Z}=a;a=F(A,0,23)||24===A&&0===O&&0===U&&0===Z;const ea=F(O,0,59),ma=F(U,0,59),ra=F(Z,0,999);return a?ea?ma?ra?!1:xa("millisecond",Z):xa("second",U):xa("minute",O):xa("hour",A)}function nb(a){return new ib("unsupported zone",`the zone "${a.name}" is not supported`)}
function lb(a){null===a.weekData&&(a.weekData=Sa(a.c));return a.weekData}function ob(a,A){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Ha({...a,...A,old:a})}function J(a,A,O){let U=a-6E4*A;const Z=O.offset(U);if(A===Z)return[U,A];U-=6E4*(Z-A);A=O.offset(U);return Z===A?[U,Z]:[a-6E4*Math.min(Z,A),Math.max(Z,A)]}function Y(a,A){a=new Date(a+6E4*A);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),
millisecond:a.getUTCMilliseconds()}}function ja(a,A,O){return J(n(a),A,O)}function va(a,A){const O=a.o;var U=a.c.year+Math.trunc(A.years);const Z=a.c.month+Math.trunc(A.months)+3*Math.trunc(A.quarters);U={...a.c,year:U,month:Z,day:Math.min(a.c.day,b(U,Z))+Math.trunc(A.days)+7*Math.trunc(A.weeks)};A=Oa.fromObject({years:A.years-Math.trunc(A.years),quarters:A.quarters-Math.trunc(A.quarters),months:A.months-Math.trunc(A.months),weeks:A.weeks-Math.trunc(A.weeks),days:A.days-Math.trunc(A.days),hours:A.hours,
minutes:A.minutes,seconds:A.seconds,milliseconds:A.milliseconds}).as("milliseconds");U=n(U);let [ea,ma]=J(U,O,a.zone);0!==A&&(ea+=A,ma=a.zone.offset(ea));return{ts:ea,o:ma}}function ua(a,A,O,U,Z,ea){const {setZone:ma,zone:ra}=O;return a&&0!==Object.keys(a).length?(a=Ha.fromObject(a,{...O,zone:A||ra,specificOffset:ea}),ma?a:a.setZone(ra)):Ha.invalid(new ib("unparsable",`the input "${Z}" can't be parsed as ${U}`))}function Ma(a,A,O=!0){return a.isValid?eb.create(Ya.create("en-US"),{allowZ:O,forceSimple:!0}).formatDateTimeFromString(a,
A):null}function Ra(a,A){const O=9999<a.c.year||0>a.c.year;let U="";O&&0<=a.c.year&&(U+="+");U+=z(a.c.year,O?6:4);A?(U=U+"-"+z(a.c.month),U=U+"-"+z(a.c.day)):(U+=z(a.c.month),U+=z(a.c.day));return U}function bb(a,A,O,U,Z){let ea=z(a.c.hour);A?(ea=ea+":"+z(a.c.minute),0===a.c.second&&O||(ea+=":")):ea+=z(a.c.minute);0===a.c.second&&O||(ea+=z(a.c.second),0===a.c.millisecond&&U||(ea=ea+"."+z(a.c.millisecond,3)));Z&&(a.isOffsetFixed&&0===a.offset?ea+="Z":0>a.o?(ea=ea+"-"+z(Math.trunc(-a.o/60)),ea=ea+":"+
z(Math.trunc(-a.o%60))):(ea=ea+"+"+z(Math.trunc(a.o/60)),ea=ea+":"+z(Math.trunc(a.o%60))));return ea}function ab(a){const A={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",
weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!A)throw new Zb(a);return A}function gb(a,A){const O=L(A.zone,$a.defaultZone);A=Ya.fromObject(A);const U=$a.now();var Z;if(l(a.year))a=U;else{for(const ea of $b)l(a[ea])&&(a[ea]=ac[ea]);if(Z=Xa(a)||hb(a))return Ha.invalid(Z);Z=O.offset(U);[a,Z]=ja(a,Z,O)}return new Ha({ts:a,zone:O,loc:A,o:Z})}function Cb(a,A,O){const U=l(O.round)?!0:O.round,Z=(ma,ra)=>{ma=m(ma,U||O.calendary?0:2,!0);return A.loc.clone(O).relFormatter(O).format(ma,ra)},ea=
ma=>O.calendary?A.hasSame(a,ma)?0:A.startOf(ma).diff(a.startOf(ma),ma).get(ma):A.diff(a,ma).get(ma);if(O.unit)return Z(ea(O.unit),O.unit);for(const ma of O.units){const ra=ea(ma);if(1<=Math.abs(ra))return Z(ra,ma)}return Z(a>A?-0:0,O.units[O.units.length-1])}function xb(a){let A={};0<a.length&&"object"===typeof a[a.length-1]?(A=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[A,a]}function rb(a){if(Ha.isDateTime(a))return a;if(a&&a.valueOf&&k(a.valueOf()))return Ha.fromJSDate(a);
if(a&&"object"===typeof a)return Ha.fromObject(a);throw new fb(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class jb extends Error{}class Sc extends jb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class Tc extends jb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class Uc extends jb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class Ab extends jb{}class Zb extends jb{constructor(a){super(`Invalid unit ${a}`)}}class fb extends jb{}class ub extends jb{constructor(){super("Zone is an abstract class")}}
const Ob={year:"numeric",month:"numeric",day:"numeric"},bc={year:"numeric",month:"short",day:"numeric"},Vc={year:"numeric",month:"short",day:"numeric",weekday:"short"},cc={year:"numeric",month:"long",day:"numeric"},dc={year:"numeric",month:"long",day:"numeric",weekday:"long"},ec={hour:"numeric",minute:"numeric"},fc={hour:"numeric",minute:"numeric",second:"numeric"},gc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},hc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},
ic={hour:"numeric",minute:"numeric",hourCycle:"h23"},jc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},kc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},lc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},mc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},nc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},oc={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric"},pc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Wc={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},qc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},rc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},sc={year:"numeric",month:"long",
day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},tc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Hc="January February March April May June July August September October November December".split(" "),Tb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Gc="JFMAMJJASOND".split(""),Vb="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Ub="Mon Tue Wed Thu Fri Sat Sun".split(" "),
Ic="MTWTFSS".split(""),uc=["AM","PM"],Lc=["Before Christ","Anno Domini"],Kc=["BC","AD"],Jc=["B","A"],Xc={D:Ob,DD:bc,DDD:cc,DDDD:dc,t:ec,tt:fc,ttt:gc,tttt:hc,T:ic,TT:jc,TTT:kc,TTTT:lc,f:mc,ff:oc,fff:qc,ffff:sc,F:nc,FF:pc,FFF:rc,FFFF:tc};class eb{static create(a,A={}){return new eb(a,A)}static parseFormat(a){let A=null,O="",U=!1;const Z=[];for(let ea=0;ea<a.length;ea++){const ma=a.charAt(ea);"'"===ma?(0<O.length&&Z.push({literal:U,val:O}),A=null,O="",U=!U):U?O+=ma:ma===A?O+=ma:(0<O.length&&Z.push({literal:!1,
val:O}),A=O=ma)}0<O.length&&Z.push({literal:U,val:O});return Z}static macroTokenToFormatOpts(a){return Xc[a]}constructor(a,A){this.opts=A;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,A){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,{...this.opts,...A}).format()}formatDateTime(a,A={}){return this.loc.dtFormatter(a,{...this.opts,...A}).format()}formatDateTimeParts(a,A={}){return this.loc.dtFormatter(a,{...this.opts,...A}).formatToParts()}resolvedOptions(a,
A={}){return this.loc.dtFormatter(a,{...this.opts,...A}).resolvedOptions()}num(a,A=0){if(this.opts.forceSimple)return z(a,A);const O={...this.opts};0<A&&(O.padTo=A);return this.loc.numberFormatter(O).format(a)}formatDateTimeFromString(a,A){const O="en"===this.loc.listingMode(),U=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,Z=(Fa,Na)=>this.loc.extract(a,Fa,Na),ea=Fa=>a.isOffsetFixed&&0===a.offset&&Fa.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,Fa.format):"",ma=(Fa,Na)=>O?K(Fa)[a.month-
1]:Z(Na?{month:Fa}:{month:Fa,day:"numeric"},"month"),ra=(Fa,Na)=>O?P(Fa)[a.weekday-1]:Z(Na?{weekday:Fa}:{weekday:Fa,month:"long",day:"numeric"},"weekday"),ya=Fa=>{const Na=eb.macroTokenToFormatOpts(Fa);return Na?this.formatWithSystemDefault(a,Na):Fa},Pa=Fa=>O?T(Fa)[0>a.year?0:1]:Z({era:Fa},"era");return W(eb.parseFormat(A),Fa=>{switch(Fa){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,
2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return ea({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return ea({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return ea({format:"techie",
allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return O?uc[12>a.hour?0:1]:Z({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return U?Z({day:"numeric"},"day"):this.num(a.day);case "dd":return U?Z({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return ra("short",!0);case "cccc":return ra("long",
!0);case "ccccc":return ra("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return ra("short",!1);case "EEEE":return ra("long",!1);case "EEEEE":return ra("narrow",!1);case "L":return U?Z({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return U?Z({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return ma("short",!0);case "LLLL":return ma("long",!0);case "LLLLL":return ma("narrow",!0);case "M":return U?Z({month:"numeric"},"month"):this.num(a.month);
case "MM":return U?Z({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return ma("short",!1);case "MMMM":return ma("long",!1);case "MMMMM":return ma("narrow",!1);case "y":return U?Z({year:"numeric"},"year"):this.num(a.year);case "yy":return U?Z({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return U?Z({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return U?Z({year:"numeric"},"year"):this.num(a.year,6);case "G":return Pa("short");case "GG":return Pa("long");
case "GGGGG":return Pa("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return ya(Fa)}})}formatDurationFromString(a,A){const O=
Z=>{switch(Z[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "M":return"month";case "y":return"year";default:return null}};A=eb.parseFormat(A);const U=A.reduce((Z,{literal:ea,val:ma})=>ea?Z:Z.concat(ma),[]);a=a.shiftTo(...U.map(O).filter(Z=>Z));return W(A,(Z=>ea=>{const ma=O(ea);return ma?this.num(Z.get(ma),ea.length):ea})(a))}}class ib{constructor(a,A){this.reason=a;this.explanation=A}toMessage(){return this.explanation?
`${this.reason}: ${this.explanation}`:this.reason}}class yb{get type(){throw new ub;}get name(){throw new ub;}get isUniversal(){throw new ub;}offsetName(a,A){throw new ub;}formatOffset(a,A){throw new ub;}offset(a){throw new ub;}equals(a){throw new ub;}get isValid(){throw new ub;}}let Pb=null;class vc extends yb{static get instance(){null===Pb&&(Pb=new vc);return Pb}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,
{format:A,locale:O}){return u(a,A,O)}formatOffset(a,A){return f(this.offset(a),A)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let Db={};const Yc={year:0,month:1,day:2,hour:3,minute:4,second:5};let Eb={};class tb extends yb{static create(a){Eb[a]||(Eb[a]=new tb(a));return Eb[a]}static resetCache(){Eb={};Db={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:a})).format(),!0}catch(A){return!1}}constructor(a){super();this.zoneName=a;this.valid=tb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:A,locale:O}){return u(a,A,O,this.name)}formatOffset(a,A){return f(this.offset(a),A)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var A=this.name;Db[A]||(Db[A]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:A,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",
second:"2-digit"}));A=Db[A];if(A.formatToParts){A=A.formatToParts(a);var O=[];for(let Pa=0;Pa<A.length;Pa++){const {type:Fa,value:Na}=A[Pa],Qa=Yc[Fa];l(Qa)||(O[Qa]=parseInt(Na,10))}A=O}else{{A=A.format(a).replace(/\u200E/g,"");A=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(A);const [,Pa,Fa,Na,Qa,pb,wb]=A;A=[Na,Pa,Fa,Qa,pb,wb]}}const [U,Z,ea,ma,ra,ya]=A;A=n({year:U,month:Z,day:ea,hour:24===ma?0:ma,minute:ra,second:ya,millisecond:0});a=+a;O=a%1E3;return(A-(a-(0<=O?O:1E3+O)))/6E4}equals(a){return"iana"===
a.type&&a.name===this.name}get isValid(){return this.valid}}let Qb=null;class db extends yb{static get utcInstance(){null===Qb&&(Qb=new db(0));return Qb}static instance(a){return 0===a?db.utcInstance:new db(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new db(C(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${f(this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,A){return f(this.fixed,
A)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class Mc extends yb{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}let wc=()=>Date.now(),xc="system",yc=null,zc=null,Ac=null,Bc;class $a{static get now(){return wc}static set now(a){wc=
a}static set defaultZone(a){xc=a}static get defaultZone(){return L(xc,vc.instance)}static get defaultLocale(){return yc}static set defaultLocale(a){yc=a}static get defaultNumberingSystem(){return zc}static set defaultNumberingSystem(a){zc=a}static get defaultOutputCalendar(){return Ac}static set defaultOutputCalendar(a){Ac=a}static get throwOnInvalid(){return Bc}static set throwOnInvalid(a){Bc=a}static resetCaches(){Ya.resetCache();tb.resetCache()}}let Wb={},Gb={},Hb={},Ib={},Fb=null;class Zc{constructor(a,
A,O){this.padTo=O.padTo||0;this.floor=O.floor||!1;const {padTo:U,floor:Z,...ea}=O;if(!A||0<Object.keys(ea).length)A={useGrouping:!1,...O},0<O.padTo&&(A.minimumIntegerDigits=O.padTo),this.inf=H(a,A)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):m(a,3);return z(a,this.padTo)}}class $c{constructor(a,A,O){this.opts=O;if(a.zone.isUniversal){var U=a.offset/60*-1;U=0<=U?`Etc/GMT+${U}`:`Etc/GMT${U}`;0!==a.offset&&tb.create(U).valid?this.dt=a:(U="UTC",
this.dt=O.timeZoneName?a:0===a.offset?a:Ha.fromMillis(a.ts+6E4*a.offset))}else"system"===a.zone.type?this.dt=a:(this.dt=a,U=a.zone.name);a={...this.opts};U&&(a.timeZone=U);this.dtf=aa(A,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class ad{constructor(a,A,O){this.opts={style:"long",...O};!A&&q()&&(this.rtf=N(a,O))}format(a,A){return this.rtf?this.rtf.format(a,A):X(A,a,this.opts.numeric,
"long"!==this.opts.style)}formatToParts(a,A){return this.rtf?this.rtf.formatToParts(a,A):[]}}class Ya{static fromOpts(a){return Ya.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,A,O,U=!1){a=a||$a.defaultLocale;var Z;(Z=a)||(U?U="en-US":(Fb||(Fb=(new Intl.DateTimeFormat).resolvedOptions().locale),U=Fb),Z=U);return new Ya(Z,A||$a.defaultNumberingSystem,O||$a.defaultOutputCalendar,a)}static resetCache(){Fb=null;Gb={};Hb={};Ib={}}static fromObject({locale:a,numberingSystem:A,
outputCalendar:O}={}){return Ya.create(a,A,O)}constructor(a,A,O,U){var Z=a.indexOf("-u-");if(-1===Z)a=[a];else{let ya;Z=a.substring(0,Z);try{ya=aa(a).resolvedOptions()}catch(Na){ya=aa(Z).resolvedOptions()}const {numberingSystem:Pa,calendar:Fa}=ya;a=[Z,Pa,Fa]}const [ea,ma,ra]=a;this.locale=ea;this.numberingSystem=A||ma||null;this.outputCalendar=O||ra||null;A=this.locale;O=this.numberingSystem;if((a=this.outputCalendar)||O)A+="-u",a&&(A+=`-ca-${a}`),O&&(A+=`-nu-${O}`);this.intl=A;this.weekdaysCache=
{format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=U;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=
this.isEnglish(),A=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&A?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?Ya.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,
A=!1,O=!0){return E(this,a,O,K,()=>{const U=A?{month:a,day:"numeric"}:{month:a},Z=A?"format":"standalone";this.monthsCache[Z][a]||(this.monthsCache[Z][a]=Q(ea=>this.extract(ea,U,"month")));return this.monthsCache[Z][a]})}weekdays(a,A=!1,O=!0){return E(this,a,O,P,()=>{const U=A?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},Z=A?"format":"standalone";this.weekdaysCache[Z][a]||(this.weekdaysCache[Z][a]=v(ea=>this.extract(ea,U,"weekday")));return this.weekdaysCache[Z][a]})}meridiems(a=
!0){return E(this,void 0,a,()=>uc,()=>{if(!this.meridiemCache){const A={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ha.utc(2016,11,13,9),Ha.utc(2016,11,13,19)].map(O=>this.extract(O,A,"dayperiod"))}return this.meridiemCache})}eras(a,A=!0){return E(this,a,A,T,()=>{const O={era:a};this.eraCache[a]||(this.eraCache[a]=[Ha.utc(-40,1,1),Ha.utc(2017,1,1)].map(U=>this.extract(U,O,"era")));return this.eraCache[a]})}extract(a,A,O){return(a=this.dtFormatter(a,A).formatToParts().find(U=>U.type.toLowerCase()===
O))?a.value:null}numberFormatter(a={}){return new Zc(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,A={}){return new $c(a,this.intl,A)}relFormatter(a={}){return new ad(this.intl,this.isEnglish(),a)}listFormatter(a={}){return R(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===
a.outputCalendar}}const Cc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Rb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Dc=RegExp(`${Rb.source}${Cc.source}?`),Sb=RegExp(`(?:T${Dc.source})?`),bd=fa("weekYear","weekNumber","weekDay"),cd=fa("year","ordinal"),Ec=RegExp(`${Rb.source} ?(?:${Cc.source}|(${/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/.source}))?`),dd=RegExp(`(?: ${Ec.source})?`),ed=RegExp(`^T?${Rb.source}$`),fd=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
Nc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},gd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,hd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,id=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
jd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,kd=G(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Sb),ld=G(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Sb),md=G(/(\d{4})-?(\d{3})/,Sb),nd=G(Dc),od=S(na,oa,sa),pd=S(bd,oa,sa),qd=S(cd,oa,sa),rd=S(oa,sa),sd=S(oa),td=G(/(\d{4})-(\d\d)-(\d\d)/,dd),ud=G(Ec),vd=S(na,oa,sa,ta),wd=S(oa,sa,ta),Fc={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,
seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},xd={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},...Fc},yd={years:{quarters:4,months:12,weeks:52.1775,
days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Fc},vb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Oc=vb.slice(0).reverse();class Oa{constructor(a){const A="longterm"===a.conversionAccuracy||
!1;this.values=a.values;this.loc=a.loc||Ya.create();this.conversionAccuracy=A?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=A?yd:xd;this.isLuxonDuration=!0}static fromMillis(a,A){return Oa.fromObject({milliseconds:a},A)}static fromObject(a,A={}){if(null==a||"object"!==typeof a)throw new fb(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new Oa({values:w(a,Oa.normalizeUnit),loc:Ya.fromObject(A),conversionAccuracy:A.conversionAccuracy})}static fromDurationLike(a){if(k(a))return Oa.fromMillis(a);
if(Oa.isDuration(a))return a;if("object"===typeof a)return Oa.fromObject(a);throw new fb(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,A){const [O]=da(a,[fd,M]);return O?Oa.fromObject(O,A):Oa.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,A){const [O]=da(a,[ed,sd]);return O?Oa.fromObject(O,A):Oa.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,A=null){if(!a)throw new fb("need to specify a reason the Duration is invalid");
a=a instanceof ib?a:new ib(a,A);if($a.throwOnInvalid)throw new Uc(a);return new Oa({invalid:a})}static normalizeUnit(a){const A={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!A)throw new Zb(a);return A}static isDuration(a){return a&&
a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,A={}){A={...A,floor:!1!==A.round&&!1!==A.floor};return this.isValid?eb.create(this.loc,A).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a={}){const A=vb.map(O=>{const U=this.values[O];return l(U)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:O.slice(0,-1)}).format(U)}).filter(O=>O);return this.loc.listFormatter({type:"conjunction",
style:a.listStyle||"narrow",...a}).format(A)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||
0!==this.milliseconds)a+=m(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var A=this.toMillis();if(0>A||864E5<=A)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};A=this.shiftTo("hours","minutes","seconds","milliseconds");let O="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===A.seconds&&0===A.milliseconds||(O+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===A.milliseconds||
(O+=".SSS"));A=A.toFormat(O);a.includePrefix&&(A="T"+A);return A}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=Oa.fromDurationLike(a);const A={};for(const O of vb)if(D(a.values,O)||D(this.values,O))A[O]=a.get(O)+this.get(O);return pa(this,{values:A},!0)}minus(a){if(!this.isValid)return this;a=Oa.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;
const A={};for(const O of Object.keys(this.values))A[O]=I(a(this.values[O],O));return pa(this,{values:A},!0)}get(a){return this[Oa.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...w(a,Oa.normalizeUnit)};return pa(this,{values:a})}reconfigure({locale:a,numberingSystem:A,conversionAccuracy:O}={}){a={loc:this.loc.clone({locale:a,numberingSystem:A})};O&&(a.conversionAccuracy=O);return pa(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;
const a=this.toObject();Da(this.matrix,a);return pa(this,{values:a},!0)}shiftTo(...a){if(!this.isValid||0===a.length)return this;a=a.map(ea=>Oa.normalizeUnit(ea));const A={},O={},U=this.toObject();let Z;for(const ea of vb)if(0<=a.indexOf(ea)){Z=ea;let ma=0;for(const ya in O)ma+=this.matrix[ya][ea]*O[ya],O[ya]=0;k(U[ea])&&(ma+=U[ea]);const ra=Math.trunc(ma);A[ea]=ra;O[ea]=(1E3*ma-1E3*ra)/1E3;for(const ya in U)vb.indexOf(ya)>vb.indexOf(ea)&&za(this.matrix,U,ya,A,ea)}else k(U[ea])&&(O[ea]=U[ea]);for(const ea in O)0!==
O[ea]&&(A[Z]+=ea===Z?O[ea]:O[ea]/this.matrix[Z][ea]);return pa(this,{values:A},!0).normalize()}negate(){if(!this.isValid)return this;const a={};for(const A of Object.keys(this.values))a[A]=0===this.values[A]?0:-this.values[A];return pa(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?
this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;
for(const U of vb){var A=this.values[U];var O=a.values[U];A=void 0===A||0===A?void 0===O||0===O:A===O;if(!A)return!1}return!0}}class Za{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,A=null){if(!a)throw new fb("need to specify a reason the Interval is invalid");a=a instanceof ib?a:new ib(a,A);if($a.throwOnInvalid)throw new Tc(a);return new Za({invalid:a})}static fromDateTimes(a,A){a=rb(a);A=rb(A);var O=a&&a.isValid?A&&A.isValid?A<a?
Za.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${A.toISO()}`):null:Za.invalid("missing or invalid end"):Za.invalid("missing or invalid start");return null==O?new Za({start:a,end:A}):O}static after(a,A){A=Oa.fromDurationLike(A);a=rb(a);return Za.fromDateTimes(a,a.plus(A))}static before(a,A){A=Oa.fromDurationLike(A);a=rb(a);return Za.fromDateTimes(a.minus(A),a)}static fromISO(a,A){const [O,U]=(a||"").split("/",2);if(O&&U){let ma;
try{var Z=Ha.fromISO(O,A);ma=Z.isValid}catch(ya){ma=!1}let ra;try{var ea=Ha.fromISO(U,A);ra=ea.isValid}catch(ya){ra=!1}if(ma&&ra)return Za.fromDateTimes(Z,ea);if(ma){if(ea=Oa.fromISO(U,A),ea.isValid)return Za.after(Z,ea)}else if(ra&&(Z=Oa.fromISO(O,A),Z.isValid))return Za.before(ea,Z)}return Za.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===
this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const A=this.start.startOf(a),O=this.end.startOf(a);return Math.floor(O.diff(A,a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===
this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:A}={}){return this.isValid?Za.fromDateTimes(a||this.s,A||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(rb).filter(ea=>this.contains(ea)).sort();const A=[];let {s:O}=this,U=0;for(;O<this.e;){var Z=a[U]||this.e;Z=+Z>+this.e?this.e:Z;A.push(Za.fromDateTimes(O,Z));O=Z;U+=1}return A}splitBy(a){a=Oa.fromDurationLike(a);
if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:A}=this,O=1;const U=[];for(;A<this.e;){var Z=this.start.plus(a.mapUnits(ea=>ea*O));Z=+Z>+this.e?this.e:Z;U.push(Za.fromDateTimes(A,Z));A=Z;O+=1}return U}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=
a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const A=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return A>=a?null:Za.fromDateTimes(A,a)}union(a){return this.isValid?Za.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [A,O]=a.sort((U,Z)=>U.s-Z.s).reduce(([U,Z],ea)=>Z?Z.overlaps(ea)||Z.abutsStart(ea)?[U,Z.union(ea)]:[U.concat([Z]),ea]:[U,ea],[[],null]);O&&A.push(O);return A}static xor(a){let A=
null,O=0;const U=[];a=a.map(Z=>[{time:Z.s,type:"s"},{time:Z.e,type:"e"}]);a=Array.prototype.concat(...a).sort((Z,ea)=>Z.time-ea.time);for(const Z of a)O+="s"===Z.type?1:-1,1===O?A=Z.time:(A&&+A!==+Z.time&&U.push(Za.fromDateTimes(A,Z.time)),A=null);return Za.merge(U)}difference(...a){return Za.xor([this].concat(a)).map(A=>this.intersection(A)).filter(A=>A&&!A.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:
"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:A=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${A}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,A){return this.isValid?this.e.diff(this.s,a,A):Oa.invalid(this.invalidReason)}mapEndpoints(a){return Za.fromDateTimes(a(this.s),a(this.e))}}class Bb{static hasDST(a=
$a.defaultZone){const A=Ha.now().setZone(a).set({month:12});return!a.isUniversal&&A.offset!==A.set({month:6}).offset}static isValidIANAZone(a){return tb.isValidZone(a)}static normalizeZone(a){return L(a,$a.defaultZone)}static months(a="long",{locale:A=null,numberingSystem:O=null,locObj:U=null,outputCalendar:Z="gregory"}={}){return(U||Ya.create(A,O,Z)).months(a)}static monthsFormat(a="long",{locale:A=null,numberingSystem:O=null,locObj:U=null,outputCalendar:Z="gregory"}={}){return(U||Ya.create(A,O,
Z)).months(a,!0)}static weekdays(a="long",{locale:A=null,numberingSystem:O=null,locObj:U=null}={}){return(U||Ya.create(A,O,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:A=null,numberingSystem:O=null,locObj:U=null}={}){return(U||Ya.create(A,O,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return Ya.create(a).meridiems()}static eras(a="short",{locale:A=null}={}){return Ya.create(A,null,"gregory").eras(a)}static features(){return{relative:q()}}}const Jb={arab:"[\u0660-\u0669]",
arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",
latn:"\\d"},Xb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Pc=Jb.hanidec.replace(/[\[|\]]/g,"").split(""),Yb=`( |${String.fromCharCode(160)})`,Kb=new RegExp(Yb,"g"),Rc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M",
"2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let Lb=null;const Nb=[0,31,59,90,120,151,181,212,243,273,304,334],Mb=[0,31,60,91,121,152,182,213,244,274,305,335],ac={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},zd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ad={ordinal:1,hour:0,
minute:0,second:0,millisecond:0},$b="year month day hour minute second millisecond".split(" "),Bd="weekYear weekNumber weekday hour minute second millisecond".split(" "),Cd="year ordinal hour minute second millisecond".split(" ");class Ha{constructor(a){const A=a.zone||$a.defaultZone;let O=a.invalid||(Number.isNaN(a.ts)?new ib("invalid input"):null)||(A.isValid?null:nb(A));this.ts=l(a.ts)?$a.now():a.ts;let U=null;var Z=null;O||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(A)?[U,Z]=[a.old.c,a.old.o]:
(Z=A.offset(this.ts),U=Y(this.ts,Z),U=(O=Number.isNaN(U.year)?new ib("invalid input"):null)?null:U,Z=O?null:Z));this._zone=A;this.loc=a.loc||Ya.create();this.invalid=O;this.weekData=null;this.c=U;this.o=Z;this.isLuxonDateTime=!0}static now(){return new Ha({})}static local(){const [a,A]=xb(arguments),[O,U,Z,ea,ma,ra,ya]=A;return gb({year:O,month:U,day:Z,hour:ea,minute:ma,second:ra,millisecond:ya},a)}static utc(){const [a,A]=xb(arguments),[O,U,Z,ea,ma,ra,ya]=A;a.zone=db.utcInstance;return gb({year:O,
month:U,day:Z,hour:ea,minute:ma,second:ra,millisecond:ya},a)}static fromJSDate(a,A={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return Ha.invalid("invalid input");const O=L(A.zone,$a.defaultZone);return O.isValid?new Ha({ts:a,zone:O,loc:Ya.fromObject(A)}):Ha.invalid(nb(O))}static fromMillis(a,A={}){if(k(a))return-864E13>a||864E13<a?Ha.invalid("Timestamp out of range"):new Ha({ts:a,zone:L(A.zone,$a.defaultZone),loc:Ya.fromObject(A)});throw new fb(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);
}static fromSeconds(a,A={}){if(k(a))return new Ha({ts:1E3*a,zone:L(A.zone,$a.defaultZone),loc:Ya.fromObject(A)});throw new fb("fromSeconds requires a numerical input");}static fromObject(a,A={}){a=a||{};var O=L(A.zone,$a.defaultZone);if(!O.isValid)return Ha.invalid(nb(O));var U=$a.now();const Z=l(A.specificOffset)?O.offset(U):A.specificOffset,ea=w(a,ab);var ma=!l(ea.ordinal),ra=!l(ea.year),ya=!l(ea.month)||!l(ea.day);ra=ra||ya;var Pa=ea.weekYear||ea.weekNumber;A=Ya.fromObject(A);if((ra||ma)&&Pa)throw new Ab("Can't mix weekYear/weekNumber units with year/month/day or ordinals");
if(ya&&ma)throw new Ab("Can't mix ordinal dates with month/day");ya=Pa||ea.weekday&&!ra;let Fa=Y(U,Z);ya?(U=Bd,Pa=zd,Fa=Sa(Fa)):ma?(U=Cd,Pa=Ad,Fa=mb(Fa)):(U=$b,Pa=ac);let Na=!1;for(var Qa of U)l(ea[Qa])?ea[Qa]=Na?Pa[Qa]:Fa[Qa]:Na=!0;ya?(Qa=g(ea.weekYear),U=F(ea.weekNumber,1,t(ea.weekYear)),Pa=F(ea.weekday,1,7),Qa=Qa?U?Pa?!1:xa("weekday",ea.weekday):xa("week",ea.week):xa("weekYear",ea.weekYear)):ma?(Qa=g(ea.year),U=F(ea.ordinal,1,h(ea.year)?366:365),Qa=Qa?U?!1:xa("ordinal",ea.ordinal):xa("year",ea.year)):
Qa=Xa(ea);if(Qa=Qa||hb(ea))return Ha.invalid(Qa);ma=ya?La(ea):ma?cb(ea):ea;const [pb,wb]=ja(ma,Z,O);O=new Ha({ts:pb,zone:O,o:wb,loc:A});return ea.weekday&&ra&&a.weekday!==O.weekday?Ha.invalid("mismatched weekday",`you can't specify both a weekday of ${ea.weekday} and a date of ${O.toISO()}`):O}static fromISO(a,A={}){const [O,U]=da(a,[kd,od],[ld,pd],[md,qd],[nd,rd]);return ua(O,U,A,"ISO 8601",a)}static fromRFC2822(a,A={}){const [O,U]=da(a.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),
[gd,ca]);return ua(O,U,A,"RFC 2822",a)}static fromHTTP(a,A={}){const [O,U]=da(a,[hd,ha],[id,ha],[jd,ka]);return ua(O,U,A,"HTTP",A)}static fromFormat(a,A,O={}){if(l(a)||l(A))throw new fb("fromFormat requires an input string and a format");const {locale:U=null,numberingSystem:Z=null}=O;var ea=Ya.fromOpts({locale:U,numberingSystem:Z,defaultToEN:!0});{const {result:Fa,zone:Na,specificOffset:Qa,invalidReason:pb}=Aa(ea,a,A);ea=[Fa,Na,Qa,pb]}const [ma,ra,ya,Pa]=ea;return Pa?Ha.invalid(Pa):ua(ma,ra,O,`format ${A}`,
a,ya)}static fromString(a,A,O={}){return Ha.fromFormat(a,A,O)}static fromSQL(a,A={}){const [O,U]=da(a,[td,vd],[ud,wd]);return ua(O,U,A,"SQL",a)}static invalid(a,A=null){if(!a)throw new fb("need to specify a reason the DateTime is invalid");a=a instanceof ib?a:new ib(a,A);if($a.throwOnInvalid)throw new Sc(a);return new Ha({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}get(a){return this[a]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:
null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?
this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?lb(this).weekYear:NaN}get weekNumber(){return this.isValid?lb(this).weekNumber:NaN}get weekday(){return this.isValid?lb(this).weekday:NaN}get ordinal(){return this.isValid?mb(this.c).ordinal:NaN}get monthShort(){return this.isValid?
Bb.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Bb.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Bb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Bb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?
this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return h(this.year)}get daysInMonth(){return b(this.year,this.month)}get daysInYear(){return this.isValid?h(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?t(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:A,
numberingSystem:O,calendar:U}=eb.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:A,numberingSystem:O,outputCalendar:U}}toUTC(a=0,A={}){return this.setZone(db.instance(a),A)}toLocal(){return this.setZone($a.defaultZone)}setZone(a,{keepLocalTime:A=!1,keepCalendarTime:O=!1}={}){a=L(a,$a.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let U=this.ts;if(A||O)A=a.offset(this.ts),O=this.toObject(),[U]=ja(O,A,a);return ob(this,{ts:U,zone:a})}return Ha.invalid(nb(a))}reconfigure({locale:a,
numberingSystem:A,outputCalendar:O}={}){a=this.loc.clone({locale:a,numberingSystem:A,outputCalendar:O});return ob(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=w(a,ab);var A=!l(a.weekYear)||!l(a.weekNumber)||!l(a.weekday);const O=!l(a.ordinal),U=!l(a.year),Z=!l(a.month)||!l(a.day),ea=a.weekYear||a.weekNumber;if((U||Z||O)&&ea)throw new Ab("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Z&&O)throw new Ab("Can't mix ordinal dates with month/day");
A?A=La({...Sa(this.c),...a}):l(a.ordinal)?(A={...this.toObject(),...a},l(a.day)&&(A.day=Math.min(b(A.year,A.month),A.day))):A=cb({...mb(this.c),...a});const [ma,ra]=ja(A,this.o,this.zone);return ob(this,{ts:ma,o:ra})}plus(a){if(!this.isValid)return this;a=Oa.fromDurationLike(a);return ob(this,va(this,a))}minus(a){if(!this.isValid)return this;a=Oa.fromDurationLike(a).negate();return ob(this,va(this,a))}startOf(a){if(!this.isValid)return this;const A={};a=Oa.normalizeUnit(a);switch(a){case "years":A.month=
1;case "quarters":case "months":A.day=1;case "weeks":case "days":A.hour=0;case "hours":A.minute=0;case "minutes":A.second=0;case "seconds":A.millisecond=0}"weeks"===a&&(A.weekday=1);"quarters"===a&&(A.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(A)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,A={}){return this.isValid?eb.create(this.loc.redefaultToEN(A)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Ob,A={}){return this.isValid?
eb.create(this.loc.clone(A),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?eb.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:A=!1,suppressMilliseconds:O=!1,includeOffset:U=!0}={}){if(!this.isValid)return null;a="extended"===a;let Z=Ra(this,a);return Z=Z+"T"+bb(this,a,A,O,U)}toISODate({format:a="extended"}={}){return this.isValid?Ra(this,"extended"===a):null}toISOWeekDate(){return Ma(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=
!1,suppressSeconds:A=!1,includeOffset:O=!0,includePrefix:U=!1,format:Z="extended"}={}){return this.isValid?(U?"T":"")+bb(this,"extended"===Z,A,a,O):null}toRFC2822(){return Ma(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ma(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Ra(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:A=!1,includeOffsetSpace:O=!0}={}){let U="HH:mm:ss.SSS";if(A||a)O&&(U+=" "),A?U+="z":a&&(U+="ZZ");return Ma(this,U,!0)}toSQL(a={}){return this.isValid?
`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const A={...this.c};a.includeConfig&&(A.outputCalendar=this.outputCalendar,A.numberingSystem=this.loc.numberingSystem,
A.locale=this.loc.locale);return A}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,A="milliseconds",O={}){if(!this.isValid||!a.isValid)return Oa.invalid("created by diffing an invalid DateTime");O={locale:this.locale,numberingSystem:this.numberingSystem,...O};const U=(Array.isArray(A)?A:[A]).map(Oa.normalizeUnit);A=a.valueOf()>this.valueOf();a=Ka(A?this:a,A?a:this,U,O);return A?a.negate():a}diffNow(a="milliseconds",A={}){return this.diff(Ha.now(),a,A)}until(a){return this.isValid?Za.fromDateTimes(this,
a):this}hasSame(a,A){if(!this.isValid)return!1;const O=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(A)<=O&&O<=a.endOf(A)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a={}){if(!this.isValid)return null;const A=a.base||Ha.fromObject({},{zone:this.zone}),O=a.padding?this<A?-a.padding:a.padding:0;let U="years months days hours minutes seconds".split(" "),Z=a.unit;Array.isArray(a.unit)&&(U=
a.unit,Z=void 0);return Cb(A,this.plus(O),{...a,numeric:"always",units:U,unit:Z})}toRelativeCalendar(a={}){return this.isValid?Cb(a.base||Ha.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(Ha.isDateTime))throw new fb("min requires all arguments be DateTimes");return x(a,A=>A.valueOf(),Math.min)}static max(...a){if(!a.every(Ha.isDateTime))throw new fb("max requires all arguments be DateTimes");return x(a,A=>
A.valueOf(),Math.max)}static fromFormatExplain(a,A,O={}){const {locale:U=null,numberingSystem:Z=null}=O;O=Ya.fromOpts({locale:U,numberingSystem:Z,defaultToEN:!0});return Aa(O,a,A)}static fromStringExplain(a,A,O={}){return Ha.fromFormatExplain(a,A,O)}static get DATE_SHORT(){return Ob}static get DATE_MED(){return bc}static get DATE_MED_WITH_WEEKDAY(){return Vc}static get DATE_FULL(){return cc}static get DATE_HUGE(){return dc}static get TIME_SIMPLE(){return ec}static get TIME_WITH_SECONDS(){return fc}static get TIME_WITH_SHORT_OFFSET(){return gc}static get TIME_WITH_LONG_OFFSET(){return hc}static get TIME_24_SIMPLE(){return ic}static get TIME_24_WITH_SECONDS(){return jc}static get TIME_24_WITH_SHORT_OFFSET(){return kc}static get TIME_24_WITH_LONG_OFFSET(){return lc}static get DATETIME_SHORT(){return mc}static get DATETIME_SHORT_WITH_SECONDS(){return nc}static get DATETIME_MED(){return oc}static get DATETIME_MED_WITH_SECONDS(){return pc}static get DATETIME_MED_WITH_WEEKDAY(){return Wc}static get DATETIME_FULL(){return qc}static get DATETIME_FULL_WITH_SECONDS(){return rc}static get DATETIME_HUGE(){return sc}static get DATETIME_HUGE_WITH_SECONDS(){return tc}}
e.DateTime=Ha;e.Info=Bb;e.Interval=Za})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(e,l,k){function g(d){d||(d=k.getLocale());let c=d in F;if(!c){const n=d.split("-");1<n.length&&n[0]in F&&(d=n[0],c=!0);c||(d="en")}const [m,h,b="#,##0.###"]=F[d];return{decimal:m,group:h,pattern:b}}function q(d,c,m){m=m||{};!0===m.places&&(m.places=0);Infinity===m.places&&(m.places=6);c=c.split(".");var h="string"===typeof m.places&&m.places.indexOf(","),b=m.places;h?b=m.places.substring(h+
1):0<=b||(b=(c[1]||[]).length);0>m.round||(d=Number(d.toFixed(Number(b))));d=String(Math.abs(d)).split(".");const n=d[1]||"";c[1]||m.places?(h&&(m.places=m.places.substring(0,h)),h=void 0!==m.places?m.places:c[1]&&c[1].lastIndexOf("0")+1,h>n.length&&(d[1]=n.padEnd(Number(h),"0")),b<n.length&&(d[1]=n.substr(0,Number(b)))):d[1]&&d.pop();b=c[0].replace(",","");h=b.indexOf("0");-1!==h&&(h=b.length-h,h>d[0].length&&(d[0]=d[0].padStart(h,"0")),-1===b.indexOf("#")&&(d[0]=d[0].substr(d[0].length-h)));b=c[0].lastIndexOf(",");
let t,r;-1!==b&&(t=c[0].length-b-1,c=c[0].substr(0,b),b=c.lastIndexOf(","),-1!==b&&(r=c.length-b-1));c=[];for(b=d[0];b;)h=b.length-t,c.push(0<h?b.substr(h):b),b=0<h?b.slice(0,h):"",r&&(t=r,r=void 0);d[0]=c.reverse().join(m.group||",");return d.join(m.decimal||".")}function x(d){d=d||{};var c=g(d.locale);const m=d.pattern||c.pattern,h=c.group,b=c.decimal;let n=1;if(-1!==m.indexOf("%"))n/=100;else if(-1!==m.indexOf("\u2030"))n/=1E3;else if(-1!==m.indexOf("\u00a4"))throw Error("currency notation not supported");
c=m.split(";");1===c.length&&c.push("-"+c[0]);return{regexp:p(c,function(t){t="(?:"+l.escapeRegExpString(t,".")+")";return t.replace(z,function(r){const u={signed:!1,separator:d.strict?h:[h,""],fractional:d.fractional,decimal:b,exponent:!1};r=r.split(".");let C=d.places;1===r.length&&1!==n&&(r[1]="###");1===r.length||0===C?u.fractional=!1:(void 0===C&&(C=d.pattern?r[1].lastIndexOf("0")+1:Infinity),C&&null==d.fractional&&(u.fractional=!0),!d.places&&C<r[1].length&&(C+=","+r[1].length),u.places=C);
r=r[0].split(",");1<r.length&&(u.groupSize=r.pop().length,1<r.length&&(u.groupSize2=r.pop().length));return"("+y(u)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:h,decimal:b,factor:n}}function y(d){d=d||{};"places"in d||(d.places=Infinity);"string"!==typeof d.decimal&&(d.decimal=".");"fractional"in d&&!/^0/.test(String(d.places))||(d.fractional=[!0,!1]);"exponent"in d||(d.exponent=[!0,!1]);"eSigned"in d||(d.eSigned=[!0,!1]);var c=D(d);const m=p(d.fractional,function(b){let n="";b&&0!==d.places&&
(n="\\"+d.decimal,n=Infinity===d.places?"(?:"+n+"\\d+)?":n+("\\d{"+d.places+"}"));return n},!0),h=p(d.exponent,function(b){return b?"([eE]"+D({signed:d.eSigned})+")":""});c+=m;m&&(c="(?:(?:"+c+")|(?:"+m+"))");return c+h}function D(d){d=d||{};"signed"in d||(d.signed=[!0,!1]);"separator"in d?"groupSize"in d||(d.groupSize=3):d.separator="";const c=p(d.signed,function(h){return h?"[-+]":""},!0),m=p(d.separator,function(h){if(!h)return"(?:\\d+)";h=l.escapeRegExpString(h);" "===h?h="\\s":"\u00a0"===h&&
(h="\\s\\xa0");const b=d.groupSize,n=d.groupSize2;return n?(h="(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+h+"]\\d{"+n+"})*["+h+"]\\d{"+b+"})",0<b-n?"(?:"+h+"|(?:0|[1-9]\\d{0,"+(b-1)+"}))":h):"(?:0|[1-9]\\d{0,"+(b-1)+"}(?:["+h+"]\\d{"+b+"})*)"},!0);return c+m}const F={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],
"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},z=/[#0,]*[#0](?:\.0*#*)?/,p=function(d,
c,m){if(!(d instanceof Array))return c(d);const h=[];for(let b=0;b<d.length;b++)h.push(c(d[b]));d=h.join("|");return"("+(m?"?:":"")+d+")"};e._parseInfo=x;e.format=function(d,c){c={...c};var m=g(c.locale);c.customs=m;var h=c.pattern||m.pattern;if(isNaN(d)||Infinity===Math.abs(d))return null;{c=c||{};m=c.customs.group;const n=c.customs.decimal;h=h.split(";");var b=h[0];h=h[0>d?1:0]||"-"+b;if(-1!==h.indexOf("%"))d*=100;else if(-1!==h.indexOf("\u2030"))d*=1E3;else{if(-1!==h.indexOf("\u00a4"))throw Error("currency notation not supported");
if(-1!==h.indexOf("E"))throw Error("exponential notation not supported");}const t=z;b=b.match(t);if(!b)throw Error("unable to find a number expression in pattern: "+h);!1===c.fractional&&(c.places=0);d=h.replace(t,q(d,b[0],{decimal:n,group:m,places:c.places,round:c.round}))}return d};e.getCustoms=g;e.parse=function(d,c){c=x(c);d=(new RegExp("^"+c.regexp+"$")).exec(d);if(!d)return NaN;let m=d[1];if(!d[1]){if(!d[2])return NaN;m=d[2];c.factor*=-1}m=m.replace(new RegExp("["+c.group+"\\s\\xa0]","g"),"").replace(c.decimal,
".");return Number(m)*c.factor};e.regexp=function(d){return x(d).regexp};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/arcade/featureset/support/shared":function(){define(["exports","../../../core/promiseUtils","../../../geometry/Extent","../../../layers/support/Field"],function(e,l,k,g){function q(x){return x instanceof Date}e.FeatureServiceDatabaseType=void 0;(function(x){x[x.Standardised=0]="Standardised";x[x.StandardisedNoInterval=1]="StandardisedNoInterval";x[x.SqlServer=2]="SqlServer";
x[x.Oracle=3]="Oracle";x[x.Postgres=4]="Postgres";x[x.PGDB=5]="PGDB";x[x.FILEGDB=6]="FILEGDB";x[x.NotEvaluated=7]="NotEvaluated"})(e.FeatureServiceDatabaseType||(e.FeatureServiceDatabaseType={}));e.IdState=void 0;(function(x){x[x.InFeatureSet=0]="InFeatureSet";x[x.NotInFeatureSet=1]="NotInFeatureSet";x[x.Unknown=2]="Unknown"})(e.IdState||(e.IdState={}));e.callback=function(x,y){return function(){try{x.apply(null,arguments)}catch(D){y.reject(D)}}};e.cloneAttributes=function(x){const y={};for(const D in x)y[D]=
x[D];return y};e.cloneField=function(x){return g.fromJSON(x.toJSON())};e.convertLinearUnitsToCode=function(x){if(void 0===x)return null;if("number"===typeof x||"number"===typeof x)return x;switch(x.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};e.convertSquareUnitsToCode=function(x){if(void 0===x)return null;if("number"===typeof x)return x;switch(x.toLowerCase()){case "meters":case "meter":return 109404;
case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};e.defaultMaxRecords=1E3;e.equalityTest=function(x,y){return x===y?!0:q(x)&&q(y)?x.getTime()===y.getTime():!1};e.errback=function(x){return function(y){x.reject(y)}};e.esriFieldToJson=function(x){return x.toJSON?x.toJSON():x};e.extractServiceUrl=function(x){if(void 0===x)return"";x=x.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");x=x.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return x=
x.split("?")[0]};e.isArray=function(x){return x instanceof Array};e.isBoolean=function(x){return"boolean"===typeof x};e.isDate=q;e.isNumber=function(x){return"number"===typeof x};e.isString=function(x){return"string"===typeof x||x instanceof String};e.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",
geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",
esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};e.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",
envelope:"extent"};e.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};e.reduceArrayWithPromises=function(x,y){return l.create((D,
F)=>{const z=l.resolve(!0);x.reduce((p,d,c,m)=>p.then(h=>{try{return y(h,d,c,m)}catch(b){return l.reject(b)}},h=>l.reject(h)),z).then(D,F)})};e.sameGeomType=function(x,y){return x===y||"point"===x&&"esriGeometryPoint"===y||"polyline"===x&&"esriGeometryPolyline"===y||"polygon"===x&&"esriGeometryPolygon"===y||"extent"===x&&"esriGeometryEnvelope"===y||"multipoint"===x&&"esriGeometryMultipoint"===y||"point"===y&&"esriGeometryPoint"===x||"polyline"===y&&"esriGeometryPolyline"===x||"polygon"===y&&"esriGeometryPolygon"===
x||"extent"===y&&"esriGeometryEnvelope"===x||"multipoint"===y&&"esriGeometryMultipoint"===x?!0:!1};e.shapeExtent=function(x){if(null===x)return null;switch(x.type){case "polygon":case "multipoint":case "polyline":return x.extent;case "point":return new k({xmin:x.x,ymin:x.y,xmax:x.x,ymax:x.y,spatialReference:x.spatialReference});case "extent":return x}return null};e.stableStringify=function(x,y){y||(y={});"function"===typeof y&&(y={cmp:y});const D="boolean"===typeof y.cycles?y.cycles:!1,F=y.cmp&&function(p){return function(d){return function(c,
m){return p({key:c,value:d[c]},{key:m,value:d[m]})}}}(y.cmp),z=[];return function c(d){d&&d.toJSON&&"function"===typeof d.toJSON&&(d=d.toJSON());if(void 0!==d){if("number"===typeof d)return isFinite(d)?""+d:"null";if("object"!==typeof d)return JSON.stringify(d);var m;if(Array.isArray(d)){var h="[";for(m=0;m<d.length;m++)m&&(h+=","),h+=c(d[m])||"null";return h+"]"}if(null===d)return"null";if(-1!==z.indexOf(d)){if(D)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");
}var b=z.push(d)-1,n=Object.keys(d).sort(F&&F(d));h="";for(m=0;m<n.length;m++){const t=n[m],r=c(d[t]);r&&(h&&(h+=","),h+=JSON.stringify(t)+":"+r)}z.splice(b,1);return"{"+h+"}"}}(x)};e.toEsriGeometryType=function(x){switch(x){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),
function(e,l,k,g,q,x,y){function D(r){return`<ul class="esri-widget__list">${r.map(u=>`<li>${"string"===typeof u?y.applyTextFormattingHTML(y.htmlEntities(u)):u}</li>`).join("")}</ul>`}function F(r){return`<table class="esri-widget__table">${r.keys().map(u=>{var C=r.field(u);C="string"===typeof C?y.applyTextFormattingHTML(y.htmlEntities(C)):C;return`<tr><th>${u}</th><td>${C}</td></tr>`}).join("")}</table>`}function z({aggregatedFeatures:r,arcadeUtils:u,featureSetVars:C,context:I,viewInfo:w,map:f,graphic:B,
interceptor:K}){C.forEach(P=>{P=P.toLowerCase();var T={map:f,spatialReference:w.sr,interceptor:K};"$map"===P&&(I.vars[P]=u.convertMapToFeatureSetCollection(T));"$layer"===P&&(I.vars[P]=u.convertFeatureLayerToFeatureSet({layer:B.sourceLayer,spatialReference:w.sr,interceptor:K}));"$datastore"===P&&(I.vars[P]=u.convertServiceUrlToWorkspace({url:B.sourceLayer.url,spatialReference:w.sr,interceptor:K}));if("$aggregatedfeatures"===P){T=B.layer;const {fields:X,objectIdField:W,geometryType:L,spatialReference:R,
displayField:aa}=T;T=new x({fields:X,objectIdField:W,geometryType:L,spatialReference:R,displayField:aa,..."feature"===T.type?{templates:T.templates,typeIdField:T.typeIdField,types:T.types}:null,source:r});I.vars[P]=u.convertFeatureLayerToFeatureSet({layer:T,spatialReference:w.sr,interceptor:K})}})}function p(){return new Promise((r,u)=>e(["../../../support/arcadeUtils"],r,u))}function d(r){return c.apply(this,arguments)}function c(){c=k._asyncToGenerator(function*({graphic:r,view:u}){const {isAggregate:C,
layer:I}=r;if(!C||!I||"2d"!==(null==u?void 0:u.type))return[];u=yield u.whenLayerView(I);if(!u.createQuery||!u.queryFeatures)return[];const w=u.createQuery();w.aggregateIds=[r.getObjectId()];({features:r}=yield u.queryFeatures(w));return r});return c.apply(this,arguments)}function m(r){return h.apply(this,arguments)}function h(){h=k._asyncToGenerator(function*({expressionInfo:r,arcadeUtils:u,interceptor:C,spatialReference:I,map:w,graphic:f,view:B}){if(!r||!r.expression)return null;const K=u.createSyntaxTree(r.expression),
P=n.filter(X=>u.hasVariable(K,X));[B]=yield q.all([d({graphic:f,view:B}),u.loadScriptDependencies(K,!0,P)]);const T=u.getViewInfo({spatialReference:I});I=u.createExecContext(f,T);I.interceptor=C;I.useAsync=!0;z({aggregatedFeatures:B,arcadeUtils:u,featureSetVars:P,context:I,viewInfo:T,map:w,graphic:f,interceptor:C});C=u.createFunction(K,I);return u.executeAsyncFunction(C,I).catch(X=>t.error("arcade-execution-error",{error:X,graphic:f,expressionInfo:r}))});return h.apply(this,arguments)}function b(){b=
k._asyncToGenerator(function*({expressionInfos:r,spatialReference:u,graphic:C,interceptor:I,map:w,view:f}){if(!r||!r.length)return{};const B=yield p(),K={};for(const P of r)K[`expression/${P.name}`]=m({expressionInfo:P,arcadeUtils:B,interceptor:I,spatialReference:u,map:w,graphic:C,view:f});r=yield q.eachAlways(K);u={};for(const P in r)C=r[P].value,C="string"===typeof C?y.applyTextFormattingHTML(y.htmlEntities(C)):Array.isArray(C)?D(C):"esri.arcade.Dictionary"===(null==C?void 0:C.declaredClass)?F(C):
C,u[P]=C;return u});return b.apply(this,arguments)}const n=["$datastore","$map","$layer","$aggregatedfeatures"],t=g.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");l.createCompiledExpression=m;l.createCompiledExpressions=function(r){return b.apply(this,arguments)};l.loadArcadeUtils=p;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/throttle ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n,t,r,u,C,I,w,f,B){var K;const P=y.getLogger("esri.widgets.FeatureViewModel"),T={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};q=K=function(X){function W(R){var aa=X.call(this,R)||this;aa._handles=new x;aa._error=null;aa._featureAbortController=null;aa.graphicChangedThrottled=z.throttle(aa._graphicChanged,1,e._assertThisInitialized(aa));aa._expressionAttributes=null;aa._graphicExpressionAttributes=
null;aa.abilities={...T};aa.content=null;aa.contentViewModels=[];aa.defaultPopupTemplateEnabled=!1;aa.formattedAttributes=null;aa.lastEditInfo=null;aa.relatedInfos=new Map;aa.title="";aa.view=null;aa._isAllowedContentType=H=>{const {abilities:N}=e._assertThisInitialized(aa);return"attachments"===H.type&&N.attachmentsContent||"custom"===H.type&&N.customContent||"fields"===H.type&&N.fieldsContent||"media"===H.type&&N.mediaContent||"text"===H.type&&N.textContent||"expression"===H.type&&N.expressionContent};
aa._handles.add(p.init(e._assertThisInitialized(aa),["graphic","_effectivePopupTemplate","abilities"],()=>aa.graphicChangedThrottled()));return aa}e._inheritsLoose(W,X);var L=W.prototype;L.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};L.castAbilities=function(R){return{...T,...R}};L.setActiveMedia=function(R,aa){R=this.contentViewModels[R];R instanceof
I&&R.setActiveMedia(aa)};L.nextMedia=function(R){R=this.contentViewModels[R];R instanceof I&&R.next()};L.previousMedia=function(R){R=this.contentViewModels[R];R instanceof I&&R.previous()};L._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};L._graphicChanged=function(){var R=e._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:aa}=this;if(aa){var H=new AbortController;this._featureAbortController=
H;try{yield this._queryFeature({signal:H.signal})}catch(N){F.isAbortError(N)||(this._error=N,P.error("error","The popupTemplate could not be displayed for this feature.",{error:N,graphic:aa,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===H&&(this._featureAbortController=null)}});return function(){return R.apply(this,arguments)}}();L._cancelFeatureQuery=function(){const {_featureAbortController:R}=this;R&&R.abort();this._featureAbortController=null};L._compileContentElement=
function(R,aa){if("attachments"===R.type)return this._compileAttachments(R,aa);if("custom"===R.type)return this._compileCustom(R,aa);if("fields"===R.type)return this._compileFields(R,aa);if("media"===R.type)return this._compileMedia(R,aa);if("text"===R.type)return this._compileText(R,aa);if("expression"===R.type)return this._compileExpression(R,aa)};L._compileContent=function(R){this._destroyContentViewModels();if(this.graphic)return Array.isArray(R)?R.filter(this._isAllowedContentType).map((aa,H)=>
this._compileContentElement(aa,H)):"string"===typeof R?this._compileText(new n({text:R}),0).text:R};L._destroyContentViewModels=function(){var R;null==(R=this._handles)?void 0:R.remove("content-view-models");this.contentViewModels.forEach(aa=>aa&&!aa.destroyed&&aa.destroy());this._set("contentViewModels",[])};L._setExpressionContentVM=function(R,aa){const {formattedAttributes:H}=this,{contentElement:N,contentElementViewModel:Q}=R;R=null==N?void 0:N.type;Q&&R&&("fields"===R&&(this._createFieldsFormattedAttributes({contentElement:N,
contentElementIndex:aa,formattedAttributes:H}),Q.set(this._createFieldsVMParams(N,aa))),"media"===R&&(this._createMediaFormattedAttributes({contentElement:N,contentElementIndex:aa,formattedAttributes:H}),Q.set(this._createMediaVMParams(N,aa))),"text"===R&&Q.set(this._createTextVMParams(N)))};L._compileExpression=function(R,aa){const {expressionInfo:H}=R,{graphic:N,map:Q,spatialReference:v,view:E}=this,G=new u({expressionInfo:H,graphic:N,interceptor:K.interceptor,map:Q,spatialReference:v,view:E});
this.contentViewModels[aa]=G;this._handles.add(p.init(G,"contentElementViewModel",()=>this._setExpressionContentVM(G,aa)),"content-view-models");return R};L._compileAttachments=function(R,aa){const {graphic:H}=this,{description:N,title:Q}=R;this.contentViewModels[aa]=new t({graphic:H,...this._compileTitleAndDesc({title:Q,description:N})});return R};L._compileCustom=function(R,aa){const {graphic:H}=this,{creator:N,destroyer:Q}=R;this.contentViewModels[aa]=new r({graphic:H,creator:N,destroyer:Q});return R};
L._compileTitleAndDesc=function({title:R,description:aa}){const {_fieldInfoMap:H,_sourceLayer:N,graphic:Q,formattedAttributes:v,_expressionAttributes:E}=this,{attributes:G}=Q,S=v.global;return{title:f.substituteFieldsInLinksAndAttributes({attributes:G,fieldInfoMap:H,globalAttributes:S,expressionAttributes:E,layer:N,text:R}),description:f.substituteFieldsInLinksAndAttributes({attributes:G,fieldInfoMap:H,globalAttributes:S,expressionAttributes:E,layer:N,text:aa})}};L._createFieldsVMParams=function(R,
aa){const {_effectivePopupTemplate:H,formattedAttributes:N}=this,Q={...N.global,...N.content[aa]};aa=(null==R?void 0:R.fieldInfos)||(null==H?void 0:H.fieldInfos);aa=null==aa?void 0:aa.filter(({fieldName:S})=>f.isExpressionField(S)||f.isRelatedField(S)||Q.hasOwnProperty(S));const v=null==H?void 0:H.expressionInfos,{description:E,title:G}=R;return{attributes:Q,expressionInfos:v,fieldInfos:aa,...this._compileTitleAndDesc({title:G,description:E})}};L._compileFields=function(R,aa){const H=R.clone();R=
new C(this._createFieldsVMParams(R,aa));this.contentViewModels[aa]=R;H.fieldInfos=R.formattedFieldInfos.slice(0);return H};L._createMediaVMParams=function(R,aa){const {abilities:H,graphic:N,_fieldInfoMap:Q,formattedAttributes:v,_effectivePopupTemplate:E,relatedInfos:G,_sourceLayer:S,_expressionAttributes:da}=this,{attributes:fa}=N,{description:la,mediaInfos:na,title:oa}=R;return{abilities:{chartAnimation:H.chartAnimation},activeMediaInfoIndex:R.activeMediaInfoIndex||0,attributes:fa,layer:S,fieldInfoMap:Q,
formattedAttributes:{...v.global,...v.content[aa]},expressionAttributes:da,mediaInfos:na,popupTemplate:E,relatedInfos:G,...this._compileTitleAndDesc({title:oa,description:la})}};L._compileMedia=function(R,aa){const H=R.clone();R=new I(this._createMediaVMParams(R,aa));H.mediaInfos=R.formattedMediaInfos.slice(0);this.contentViewModels[aa]=R;return H};L._createTextVMParams=function(R){const {graphic:aa,_fieldInfoMap:H,_sourceLayer:N,_expressionAttributes:Q}=this;if(R&&R.text){const {attributes:v}=aa;
R.text=f.substituteFieldsInLinksAndAttributes({attributes:v,fieldInfoMap:H,globalAttributes:this.formattedAttributes.global,expressionAttributes:Q,layer:N,text:R.text})}return{graphic:aa,creator:R.text}};L._compileText=function(R,aa){R=R.clone();this.contentViewModels[aa]=new r(this._createTextVMParams(R));return R};L._compileLastEditInfo=function(){const {_effectivePopupTemplate:R,_sourceLayer:aa,graphic:H}=this;if(R){var {lastEditInfoEnabled:N}=R,Q=null==aa?void 0:aa.editFieldsInfo;if(N&&Q)return f.formatEditInfo(Q,
H.attributes)}};L._compileTitle=function(R){const {_fieldInfoMap:aa,_sourceLayer:H,graphic:N,_expressionAttributes:Q}=this,{attributes:v}=N;return f.substituteFieldsInLinksAndAttributes({attributes:v,fieldInfoMap:aa,globalAttributes:this.formattedAttributes.global,expressionAttributes:Q,layer:H,text:R})};L._getTitle=function(){var R=e._asyncToGenerator(function*(){const {_effectivePopupTemplate:aa,graphic:H}=this;return f.graphicCallback(null==aa?void 0:aa.title,{graphic:H})});return function(){return R.apply(this,
arguments)}}();L._getContent=function(){var R=e._asyncToGenerator(function*(){const {_effectivePopupTemplate:aa,graphic:H}=this;return f.graphicCallback(null==aa?void 0:aa.content,{graphic:H})});return function(){return R.apply(this,arguments)}}();L._queryFeature=function(){var R=e._asyncToGenerator(function*(aa){const {_featureAbortController:H,_sourceLayer:N,graphic:Q,_effectivePopupTemplate:v,spatialReference:E,map:G,view:S}=this,{content:{value:da},title:{value:fa}}=yield F.eachAlways({content:this._getContent(),
title:this._getTitle()});H===this._featureAbortController&&Q&&(yield f.queryUpdatedFeature({graphic:Q,popupTemplate:v,layer:N,spatialReference:E},aa),{expressionAttributes:{value:aa}}=yield F.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(aa),expressionAttributes:w.createCompiledExpressions({expressionInfos:null==v?void 0:v.expressionInfos,spatialReference:E,graphic:Q,map:G,interceptor:K.interceptor,view:S})}),H===this._featureAbortController&&Q&&(this._expressionAttributes=aa,
this._graphicExpressionAttributes={...Q.attributes,...aa},this._set("formattedAttributes",this._createFormattedAttributes(da)),this._set("title",this._compileTitle(fa)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(da)||null)))});return function(aa){return R.apply(this,arguments)}}();L._createMediaFormattedAttributes=function({contentElement:R,contentElementIndex:aa,formattedAttributes:H}){const {_effectivePopupTemplate:N,graphic:Q,relatedInfos:v,
_sourceLayer:E,_fieldInfoMap:G,_graphicExpressionAttributes:S}=this;H.content[aa]=f.formatAttributes({fieldInfos:null==N?void 0:N.fieldInfos,graphic:Q,attributes:{...S,...R.attributes},layer:E,fieldInfoMap:G,relatedInfos:v})};L._createFieldsFormattedAttributes=function({contentElement:R,contentElementIndex:aa,formattedAttributes:H}){if(R.fieldInfos){const {graphic:N,relatedInfos:Q,_sourceLayer:v,_fieldInfoMap:E,_graphicExpressionAttributes:G}=this;H.content[aa]=f.formatAttributes({fieldInfos:R.fieldInfos,
graphic:N,attributes:{...G,...R.attributes},layer:v,fieldInfoMap:E,relatedInfos:Q})}};L._createFormattedAttributes=function(R){const {_effectivePopupTemplate:aa,graphic:H,relatedInfos:N,_sourceLayer:Q,_fieldInfoMap:v,_graphicExpressionAttributes:E}=this,G={global:f.formatAttributes({fieldInfos:null==aa?void 0:aa.fieldInfos,graphic:H,attributes:E,layer:Q,fieldInfoMap:v,relatedInfos:N}),content:[]};Array.isArray(R)&&R.forEach((S,da)=>{"fields"===S.type&&this._createFieldsFormattedAttributes({contentElement:S,
contentElementIndex:da,formattedAttributes:G});"media"===S.type&&this._createMediaFormattedAttributes({contentElement:S,contentElementIndex:da,formattedAttributes:G})});return G};L._checkForRelatedFeatures=function(R){const {graphic:aa,_effectivePopupTemplate:H}=this;return this._queryRelatedInfos(aa,f.getAllFieldInfos(H),R)};L._queryRelatedInfos=function(){var R=e._asyncToGenerator(function*(aa,H,N){const {relatedInfos:Q,_sourceLayer:v}=this;Q.clear();const E=D.isSome(v.associatedLayer)?yield v.associatedLayer.load(N):
v;if(E){var G=H.filter(fa=>fa&&f.isRelatedField(fa.fieldName));if(G&&G.length){H.forEach(fa=>this._configureRelatedInfo(fa,E));var S=yield B.queryLayerInfos({relatedInfos:Q,layer:E},N);Object.keys(S).forEach(fa=>{var la;const na=Q.get(fa.toString());fa=null==(la=S[fa])?void 0:la.value;na&&fa&&(na.layerInfo=fa.data)});var da=yield B.queryRelatedFeatures({graphic:aa,relatedInfos:Q,layer:E},N);Object.keys(da).forEach(fa=>{var la;B.setRelatedFeatures(null==(la=da[fa])?void 0:la.value,Q.get(fa.toString()))})}}});
return function(aa,H,N){return R.apply(this,arguments)}}();L._configureRelatedInfo=function(R,aa){const {relatedInfos:H}=this,N=B.getRelatedFieldInfo(R.fieldName);if(N){var {layerId:Q,fieldName:v}=N;Q&&(aa=H.get(Q.toString())||B.createRelatedInfo(Q,aa))&&(B.updateRelatedInfo({relatedInfo:aa,fieldName:v,fieldInfo:R}),this.relatedInfos.set(Q,aa))}};e._createClass(W,[{key:"_effectivePopupTemplate",get:function(){return D.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):
null}},{key:"_fieldInfoMap",get:function(){return f.createfieldInfoMap(f.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return f.getSourceLayer(this.graphic)}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(R){this._set("graphic",R?R.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(R){void 0===
R?this._clearOverride("spatialReference"):this._override("spatialReference",R)}},{key:"map",get:function(){return this.get("view.map")||null},set:function(R){void 0===R?this._clearOverride("map"):this._override("map",R)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return W}(q);q.interceptor=new g.FeatureSetQueryInterceptor(f.preLayerQueryCallback,f.preRequestCallback);l.__decorate([d.property()],q.prototype,"_error",void 0);l.__decorate([d.property()],q.prototype,
"_featureAbortController",void 0);l.__decorate([d.property({readOnly:!0})],q.prototype,"_effectivePopupTemplate",null);l.__decorate([d.property({readOnly:!0})],q.prototype,"_fieldInfoMap",null);l.__decorate([d.property({readOnly:!0})],q.prototype,"_sourceLayer",null);l.__decorate([d.property()],q.prototype,"abilities",void 0);l.__decorate([h.cast("abilities")],q.prototype,"castAbilities",null);l.__decorate([d.property({readOnly:!0})],q.prototype,"content",void 0);l.__decorate([d.property({readOnly:!0})],
q.prototype,"contentViewModels",void 0);l.__decorate([d.property({type:Boolean})],q.prototype,"defaultPopupTemplateEnabled",void 0);l.__decorate([d.property({readOnly:!0})],q.prototype,"state",null);l.__decorate([d.property({readOnly:!0})],q.prototype,"formattedAttributes",void 0);l.__decorate([d.property({type:k,value:null})],q.prototype,"graphic",null);l.__decorate([d.property({readOnly:!0})],q.prototype,"lastEditInfo",void 0);l.__decorate([d.property({readOnly:!0})],q.prototype,"relatedInfos",
void 0);l.__decorate([d.property()],q.prototype,"spatialReference",null);l.__decorate([d.property({readOnly:!0})],q.prototype,"title",void 0);l.__decorate([d.property()],q.prototype,"map",null);l.__decorate([d.property({readOnly:!0})],q.prototype,"waitingForContent",null);l.__decorate([d.property()],q.prototype,"view",void 0);return q=K=l.__decorate([b.subclass("esri.widgets.FeatureViewModel")],q)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(e){e.FeatureSetQueryInterceptor=
function(l,k){this.preLayerQueryCallback=l;this.preRequestCallback=k;this.preLayerQueryCallback||(this.preLayerQueryCallback=g=>{});this.preRequestCallback||(this.preLayerQueryCallback=g=>{})};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p){e.FeatureContentMixin=d=>{d=function(c){function m(){var h=c.apply(this,arguments)||this;h.renderNodeContent=b=>z.isWidget(b)&&!b.destroyed?p.tsx("div",{key:b},b.render()):b instanceof HTMLElement?p.tsx("div",{key:b,bind:b,afterCreate:h._attachToNode}):z.hasDomNode(b)?p.tsx("div",{key:b,bind:b.domNode,afterCreate:h._attachToNode}):null;return h}l._inheritsLoose(m,c);m.prototype._attachToNode=function(h){h.appendChild(this)};return m}(d);return d=k.__decorate([F.subclass("esri.widgets.Feature.ContentMixin")],
d)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ../core/Logger ./support/jsxFactory".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b){y=function(n){function t(u,C){u=n.call(this,u,C)||this;u._animationDelay=500;u._animationPromise=null;u.location=null;u.view=null;u.viewModel=new c;u.visible=!1;return u}e._inheritsLoose(t,n);var r=t.prototype;r.initialize=function(){this.own([q.watch(this,"visible",u=>this._visibleChange(u))])};r.destroy=function(){this._animationPromise=null};r.show=function(u){const {location:C,promise:I}=u;C&&(this.viewModel.location=C);this.visible=!0;u=()=>this.hide();
I&&I.catch(()=>{}).then(u)};r.hide=function(){this.visible=!1};r.render=function(){var {visible:u}=this,{screenLocation:C}=this.viewModel;C=!!C;u={["esri-spinner--start"]:u&&C,["esri-spinner--finish"]:!u&&C};C=this._getPositionStyles();return b.tsx("div",{class:this.classes("esri-spinner",u),styles:C})};r._visibleChange=function(u){if(u)this.viewModel.screenLocationEnabled=!0;else{var C=g.after(this._animationDelay);this._animationPromise=C;C.catch(()=>{}).then(()=>{this._animationPromise===C&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};r._getPositionStyles=function(){const {screenLocation:u,view:C}=this.viewModel;if(!C||k.isNone(u))return{};const {padding:I}=C;return{left:`${u.x-I.left}px`,top:`${u.y-I.top}px`}};return t}(d);l.__decorate([x.aliasOf("viewModel.location")],y.prototype,"location",void 0);l.__decorate([x.aliasOf("viewModel.view")],y.prototype,"view",void 0);l.__decorate([z.property({type:c})],y.prototype,"viewModel",void 0);l.__decorate([x.aliasOf("viewModel.visible")],y.prototype,
"visible",void 0);return y=l.__decorate([p.subclass("esri.widgets.Spinner")],y)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(e,l,k,g,q,x,y,D){g=function(F){function z(p){p=F.call(this,p)||this;p.visible=
!1;return p}e._inheritsLoose(z,F);return z}(D);l.__decorate([k.property()],g.prototype,"visible",void 0);return g=l.__decorate([y.subclass("esri.widgets.CompassViewModel")],g)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p){k=function(d){function c(h){var b=d.call(this,h)||this;b._anchorHandles=new g;b.location=null;b.screenLocation=null;b.screenLocationEnabled=!1;b.view=null;b._anchorHandles.add([x.watch(e._assertThisInitialized(b),["screenLocationEnabled","location","view.size","view.stationary"],()=>b._updateScreenPointAndHandle()),x.watch(e._assertThisInitialized(b),["view","view.ready"],()=>b._wireUpView())]);return b}e._inheritsLoose(c,d);var m=c.prototype;m.destroy=function(){this.view=
null;this._anchorHandles&&this._anchorHandles.destroy();this._viewpointHandle=this._anchorHandles=null};m._wireUpView=function(){this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var {view:h}=this;h=x.pausable(h,"3d"===h.type?"camera":"viewpoint",()=>this._viewpointChange());this._anchorHandles.add(h,"view");this._viewpointHandle=h;this._toggleWatchingViewpoint()}};m._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};
m._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()};m._toggleWatchingViewpoint=function(){const {_viewpointHandle:h,location:b,screenLocationEnabled:n}=this;h&&(b&&n?h.resume():h.pause())};m._setScreenLocation=function(){const {location:h,view:b,screenLocationEnabled:n}=this;var t=this.get("view.ready");t=n&&t&&q.isSome(h)?b.toScreen(h):null;this._set("screenLocation",t)};return c}(k.EventedAccessor);l.__decorate([y.property()],k.prototype,"location",
void 0);l.__decorate([y.property({readOnly:!0})],k.prototype,"screenLocation",void 0);l.__decorate([y.property()],k.prototype,"screenLocationEnabled",void 0);l.__decorate([y.property()],k.prototype,"view",void 0);return k=l.__decorate([p.subclass("esri.widgets.support.AnchorElementViewModel")],k)})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../geometry/Point ../../symbols/SimpleFillSymbol".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n,t,r,u,C,I,w,f,B,K,P,T,X,W,L){const R=x.ofType({key:"type",defaultKeyValue:"button",base:r,typeMap:{button:u,toggle:C}}),aa=F.getLogger("esri.widgets.Popup.PopupViewModel");k=function(H){function N(v){v=H.call(this,v)||this;v._handles=new D;v._pendingPromises=new Set;v._fetchFeaturesController=null;v._selectedClusterFeature=null;v.featurePage=null;v.actions=new R;v.defaultPopupTemplateEnabled=!1;v.autoCloseEnabled=!1;v.autoOpenEnabled=!0;v.browseClusterEnabled=
!1;v.content=null;v.featuresPerPage=20;v.featureViewModelAbilities=null;v.featureViewModels=[];v.highlightEnabled=!0;v.includeDefaultActions=!0;v.selectedClusterBoundaryFeature=new g({symbol:new L({outline:{width:1.5,color:"cyan"},style:"none"})});v.title=null;v.updateLocationEnabled=!1;v.view=null;v.visible=!1;v.zoomFactor=4;v.zoomToLocation=null;return v}e._inheritsLoose(N,H);var Q=N.prototype;Q.initialize=function(){this._handles.add([p.init(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),
this.on("view-change",()=>this._autoClose()),p.watch(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),p.watch(this,"view.animation.state",v=>this._animationStateChange(v)),p.watch(this,"location",v=>this._locationChange(v)),p.watch(this,"selectedFeature",v=>this._selectedFeatureChange(v)),p.watch(this,["selectedFeatureIndex","featureCount","featuresPerPage"],()=>this._selectedFeatureIndexChange()),p.watch(this,["featurePage","selectedFeatureIndex","featureCount",
"featuresPerPage, featureViewModels"],()=>this._setGraphicOnFeatureViewModels()),p.watch(this,"featureViewModels",()=>this._featureViewModelsChange()),this.on("trigger-action",v=>P.triggerAction({event:v,view:this.view})),p.whenFalse(this,"waitingForResult",()=>this._waitingForResultChange(),!0),p.watch(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs()),p.watch(this,["view.scale"],this._viewScaleChange),p.whenFalse(this,"visible",()=>this.browseClusterEnabled=
!1),p.watch(this,"browseClusterEnabled",v=>v?this.enableClusterBrowsing():this.disableClusterBrowsing())])};Q.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};Q.centerAtLocation=function(){var {view:v}=this;const E=P.getSelectedTarget(this);return E?this.callGoTo({target:{target:E,scale:v.scale}}):(v=new y("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",
{target:E,view:v}),aa.error(v),Promise.reject(v))};Q.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};Q.fetchFeatures=function(v,E){const {view:G}=this;return G&&v?G.fetchPopupFeatures(v,{event:E&&E.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:E&&E.signal}):(v=new y("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:v,view:G}),aa.error(v),Promise.reject(v))};Q.open=
function(v){v={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...v,visible:!0};var {fetchFeatures:E}=v;delete v.fetchFeatures;E&&this._setFetchFeaturesPromises(v.location);E=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const G of E)delete v[G];this.set(v)};Q.triggerAction=function(v){(v=this.allActions.getItemAt(v))&&!v.disabled&&this.emit("trigger-action",{action:v})};Q.next=function(){this.selectedFeatureIndex+=1;return this};Q.previous=function(){--this.selectedFeatureIndex;return this};
Q.disableClusterBrowsing=function(){P.removeClusteredFeaturesForBrowsing(this);this._clearBrowsedClusterGraphics()};Q.enableClusterBrowsing=function(){var v=e._asyncToGenerator(function*(){yield P.displayClusterExtent(this);yield P.browseAggregateFeatures(this)});return function(){return v.apply(this,arguments)}}();Q._animationStateChange=function(v){this.zoomToLocation||(K.zoomToFeature.disabled="waiting-for-target"===v)};Q._clearBrowsedClusterGraphics=function(){var v;const E=null==(v=this.view)?
void 0:v.graphics;E&&(E.remove(this.selectedClusterBoundaryFeature),E.remove(this._selectedClusterFeature));this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};Q._viewScaleChange=function(){var v;null!=(v=this.selectedFeature)&&v.isAggregate?(this.visible=this.browseClusterEnabled=!1,this.clear()):this.browseClusterEnabled&&(this.browseClusterEnabled=!1,this.features=[this.selectedFeature])};Q._locationChange=function(v){const {selectedFeature:E,updateLocationEnabled:G}=
this;G&&v&&(!E||E.geometry)&&this.centerAtLocation()};Q._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null};Q._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};Q._setGraphicOnFeatureViewModels=function(){const {features:v,featureCount:E,featurePage:G,featuresPerPage:S,featureViewModels:da}=this;if(null!==G){var fa=((G-1)*S+E)%E;da.slice(fa,fa+S).forEach((la,na)=>{la&&!la.graphic&&
(la.graphic=v[fa+na])})}};Q._selectedFeatureChange=function(){var v=e._asyncToGenerator(function*(E){if(E){var {location:G,updateLocationEnabled:S,view:da}=this;this.browseClusterEnabled?(this._selectedClusterFeature&&(da.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),E.isAggregate||(E.symbol=yield I.getDisplayedSymbol(E),this._selectedClusterFeature=E,da.graphics.add(this._selectedClusterFeature))):!S&&G||!E.geometry?S&&!E.geometry&&this.centerAtLocation().then(()=>
{this.location=da.center.clone()}):this.location=z.unwrap(this._getPointFromGeometry(E.geometry))}});return function(E){return v.apply(this,arguments)}}();Q._waitingForResultChange=function(){!this.featureCount&&this.promises&&(this.visible=!1)};Q._setFetchFeaturesPromises=function(v){return this._fetchFeaturesWithController(this._getScreenPoint(v||this.location)).then(E=>{const {clientOnlyGraphics:G,promisesPerLayerView:S}=E;E=Promise.resolve(G);const da=S.map(fa=>fa.promise);this.promises=[E,...da]})};
Q._destroyFeatureVMs=function(){this.featureViewModels.forEach(v=>v&&!v.destroyed&&v.destroy());this._set("featureViewModels",[])};Q._updateFeatureVMs=function(){const {selectedFeature:v,features:E,featureViewModels:G}=this;null!=v&&v.isAggregate||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(E&&E.length){var S=G.slice(0),da=[];E.forEach((fa,la)=>{if(fa){var na=null;S.some((ta,M)=>{ta&&ta.graphic===fa&&(na=ta,S.splice(M,1));return!!na});if(na)da[la]=na;else{var oa,sa;const ta=new B({abilities:this.featureViewModelAbilities,
defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(oa=this.view)?void 0:oa.spatialReference,graphic:fa===v?fa:null,map:null==(sa=this.view)?void 0:sa.map,view:this.view});da[la]=ta}}});S.forEach(fa=>fa&&!fa.destroyed&&fa.destroy());this._set("featureViewModels",da)}};Q._getScreenPoint=function(v){const {view:E}=this;return E&&v&&"function"===typeof E.toScreen?E.toScreen(v):null};Q._autoOpenEnabledChange=function(){const {_handles:v,autoOpenEnabled:E}=this;v.remove("auto-fetch-features");
if(E&&this.view){const G=this.view.on("click",S=>{"mouse"===S.pointerType&&0!==S.button||this._fetchFeaturesAndOpen(S)},w.ViewEventPriorities.WIDGET);v.add(G,"auto-fetch-features")}};Q._cancelFetchingFeatures=function(){const v=this._fetchFeaturesController;v&&v.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};Q._fetchFeaturesWithController=function(v,E){this._cancelFetchingFeatures();const G=new AbortController,{signal:S}=G;this._fetchFeaturesController=G;this.notifyChange("waitingForResult");
v=this.fetchFeatures(v,{signal:S,event:E});v.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});return v};Q._fetchFeaturesAndOpen=function(v){const {screenPoint:E,mapPoint:G}=v,{view:S}=this;this._fetchFeaturesWithController(E,v).then(da=>{const {clientOnlyGraphics:fa,promisesPerLayerView:la,location:na}=da,oa=[Promise.resolve(fa),...la.map(sa=>sa.promise)];S.popup.open({location:na||G,promises:oa});return da})};Q._updatePendingPromises=function(v){v&&
this._pendingPromises.has(v)&&(this._pendingPromises.delete(v),this.notifyChange("pendingPromisesCount"))};Q._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};Q._getPointFromGeometry=function(v){return z.isNone(v)?null:"point"===v.type?v:"extent"===v.type?v.center:"polygon"===v.type?v.centroid:"multipoint"===v.type||"polyline"===v.type?v.extent.center:null};Q._getLayerView=function(){var v=e._asyncToGenerator(function*(E,G){yield E.when();return E.whenLayerView(G)});return function(E,
G){return v.apply(this,arguments)}}();Q._highlightFeature=function(){var v=e._asyncToGenerator(function*(){this._handles.remove("highlight");const {selectedFeature:E,highlightEnabled:G,view:S,visible:da}=this;if(E&&S&&G&&da){var {layer:fa,sourceLayer:la}=E;if("map-notes"===(null==la?void 0:la.type)||"subtype-group"===(null==la?void 0:la.type))fa=la;if(fa&&fa instanceof t){var na=this._getLayerView(S,fa);this._highlightPromise=na;var oa=yield na;if(oa&&f.highlightsSupported(oa)&&this._highlightPromise===
na&&this.selectedFeature&&this.highlightEnabled&&this.visible){na="imagery"===fa.type?void 0:"objectIdField"in fa&&fa.objectIdField;var sa=E.attributes;oa=oa.highlight(sa&&na&&sa[na]||E);this._handles.add(oa,"highlight")}}}});return function(){return v.apply(this,arguments)}}();Q._updateFeatures=function(v){const {features:E}=this;v&&v.length&&(E.length?(v=v.filter(G=>-1===E.indexOf(G)),this.features=E.concat(v)):this.features=v)};e._createClass(N,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(v=>
v.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const v=this._get("allActions")||new R;v.removeAll();const {actions:E,defaultActions:G,defaultPopupTemplateEnabled:S,includeDefaultActions:da,selectedFeature:fa}=this;var la=da?G.concat(E):E;const na=fa&&("function"===typeof fa.getEffectivePopupTemplate&&fa.getEffectivePopupTemplate(S)||fa.popupTemplate),oa=na&&na.actions;(la=na&&na.overwriteActions?oa:oa?oa.concat(la):
la)&&la.filter(Boolean).forEach(sa=>v.add(sa));return v}},{key:"defaultActions",get:function(){var v;const E=this._get("defaultActions")||new R;E.removeAll();E.addMany(null!=(v=this.selectedFeature)&&v.isAggregate?[K.zoomToClusteredFeatures.clone(),K.browseClusteredFeatures.clone()]:[K.zoomToFeature.clone()]);return E}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(v){v=v||[];this._set("features",v);const {pendingPromisesCount:E,
promiseCount:G,selectedFeatureIndex:S}=this,da=G&&v.length;da&&E&&-1===S?this.selectedFeatureIndex=0:da&&-1!==S||(this.selectedFeatureIndex=v.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(v){const E=this.get("view.spatialReference.isWebMercator");v&&v.get("spatialReference.isWGS84")&&E&&(v=n.geographicToWebMercator(v));this._set("location",v)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||
0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},{key:"promises",get:function(){return this._get("promises")||[]},set:function(v){this._pendingPromises.clear();this.features=[];Array.isArray(v)&&v.length?(this._set("promises",v),v=v.slice(0),v.forEach(E=>{this._pendingPromises.add(E);E.then(G=>{this._pendingPromises.has(E)&&this._updateFeatures(G);this._updatePendingPromises(E)},()=>this._updatePendingPromises(E))})):this._set("promises",
[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:v,selectedFeatureIndex:E}=this;return-1===E?null:v[E]||null}},{key:"selectedFeatureIndex",get:function(){const v=this._get("selectedFeatureIndex");return"number"===typeof v?v:-1},set:function(v){const {featureCount:E}=this;v=isNaN(v)||-1>v||!E?-1:(v+E)%E;this._set("selectedFeatureIndex",v)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},
{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return N}(X.GoToMixin(T));l.__decorate([d.property()],k.prototype,"featurePage",void 0);l.__decorate([d.property()],k.prototype,"isLoadingFeature",null);l.__decorate([d.property({type:R})],k.prototype,"actions",void 0);l.__decorate([d.property({readOnly:!0})],k.prototype,"active",null);l.__decorate([d.property({readOnly:!0})],k.prototype,"allActions",null);l.__decorate([d.property({type:Boolean})],k.prototype,"defaultPopupTemplateEnabled",
void 0);l.__decorate([d.property()],k.prototype,"autoCloseEnabled",void 0);l.__decorate([d.property()],k.prototype,"autoOpenEnabled",void 0);l.__decorate([d.property()],k.prototype,"browseClusterEnabled",void 0);l.__decorate([d.property()],k.prototype,"content",void 0);l.__decorate([d.property({type:R,readOnly:!0})],k.prototype,"defaultActions",null);l.__decorate([d.property({readOnly:!0})],k.prototype,"featureCount",null);l.__decorate([d.property()],k.prototype,"features",null);l.__decorate([d.property()],
k.prototype,"featuresPerPage",void 0);l.__decorate([d.property()],k.prototype,"featureViewModelAbilities",void 0);l.__decorate([d.property({readOnly:!0})],k.prototype,"featureViewModels",void 0);l.__decorate([d.property()],k.prototype,"highlightEnabled",void 0);l.__decorate([d.property()],k.prototype,"includeDefaultActions",void 0);l.__decorate([d.property({type:W})],k.prototype,"location",null);l.__decorate([d.property({readOnly:!0})],k.prototype,"pendingPromisesCount",null);l.__decorate([d.property({readOnly:!0})],
k.prototype,"selectedClusterBoundaryFeature",void 0);l.__decorate([d.property({readOnly:!0})],k.prototype,"waitingForResult",null);l.__decorate([d.property({readOnly:!0})],k.prototype,"promiseCount",null);l.__decorate([d.property()],k.prototype,"promises",null);l.__decorate([d.property({value:null,readOnly:!0})],k.prototype,"selectedFeature",null);l.__decorate([d.property({value:-1})],k.prototype,"selectedFeatureIndex",null);l.__decorate([d.property({readOnly:!0})],k.prototype,"selectedFeatureViewModel",
null);l.__decorate([d.property({readOnly:!0})],k.prototype,"state",null);l.__decorate([d.property()],k.prototype,"title",void 0);l.__decorate([d.property()],k.prototype,"updateLocationEnabled",void 0);l.__decorate([d.property()],k.prototype,"view",void 0);l.__decorate([d.property()],k.prototype,"visible",void 0);l.__decorate([d.property()],k.prototype,"zoomFactor",void 0);l.__decorate([d.property()],k.prototype,"zoomToLocation",void 0);l.__decorate([d.property()],k.prototype,"centerAtLocation",null);
return k=l.__decorate([b.subclass("esri.widgets.Popup.PopupViewModel")],k)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./previewUtils ./utils".split(" "),function(e,l,k,g,q,x,y,D){function F(b,n){if(n&&(b.style.filter=D.getCSSFilterFromEffectList(n),n=n.effects))for(const t of n)if("drop-shadow"===(null==t?void 0:t.type)){0>t.offsetX?b.style.marginLeft=`${Math.abs(t.offsetX)}px`:
b.style.marginRight=`${t.offsetX}px`;break}}function z(b,n){return p.apply(this,arguments)}function p(){p=k._asyncToGenerator(function*(b,n){switch(b.type){case "web-style":var {previewWebStyleSymbol:t}=yield new Promise((r,u)=>e(["./previewWebStyleSymbol"],r,u));return t(b,z,n);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:t}=yield new Promise((r,u)=>e(["./previewSymbol3D"],r,u)),t(b,n);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:t}=
yield new Promise((r,u)=>e(["./previewSymbol2D"],r,u)),t(b,n);case "cim":return{previewCIMSymbol:t}=yield new Promise((r,u)=>e(["./previewCIMSymbol"],r,u)),t(b,n)}});return p.apply(this,arguments)}function d(b){return b&&"opacity"in b?b.opacity*d(b.parent):1}function c(){c=k._asyncToGenerator(function*(b,n){var t,r;if(b){var u=b.sourceLayer;u=null!=(t=q.isSome(n)&&null!=(r=n.useSourceLayer)&&r?u:b.layer)?t:u;t=d(u);if(q.isSome(b.symbol)&&(!q.isSome(n)||!0!==n.ignoreGraphicSymbol))return b="web-style"===
b.symbol.type?yield b.symbol.fetchSymbol(q.isSome(n)?n.abortOptions:null):b.symbol.clone(),D.applyColorToSymbol(b,null,t),b;var C=q.isSome(n)&&n.renderer||u&&"renderer"in u&&u.renderer;if(r=C&&"getSymbolAsync"in C?yield C.getSymbolAsync(b,n):null){r="web-style"===r.type?yield r.fetchSymbol(q.isSome(n)?n.abortOptions:null):r.clone();if(!("visualVariables"in C&&C.visualVariables&&C.visualVariables.length))return D.applyColorToSymbol(r,null,t),r;"arcadeRequiredForVisualVariables"in C&&C.arcadeRequiredForVisualVariables&&
(q.isNone(n)||q.isNone(n.arcade))&&(n={...q.unwrap(n)},n.arcade=yield x.loadArcade());u=yield new Promise((P,T)=>e(["../../renderers/visualVariables/support/visualVariableUtils"],P,T));var I=[],w=[],f=[],B=[];for(var K of C.visualVariables)switch(K.type){case "color":I.push(K);break;case "opacity":w.push(K);break;case "rotation":B.push(K);break;case "size":K.target||f.push(K)}K=(K=!!I.length&&I[I.length-1])?u.getColor(K,b,n):null;w=(w=!!w.length&&w[w.length-1])?u.getOpacity(w,b,n):null;null!=t&&(w=
null!=w?w*t:t);D.applyColorToSymbol(r,K,w);f.length&&(t=u.getAllSizes(f,b,n),yield D.applySizesToSymbol(r,t));for(const P of B)D.applyRotationToSymbol(r,u.getRotationAngle(P,b,n),P.axis);return r}}});return c.apply(this,arguments)}function m(){m=k._asyncToGenerator(function*(b,n){var t;if(b){var r=d(b.layer||b.sourceLayer);if(q.isSome(b.symbol)&&(!q.isSome(n)||!0!==n.ignoreGraphicSymbol))return b="web-style"===b.symbol.type?yield b.symbol.fetchSymbol(q.isSome(n)?n.abortOptions:null):b.symbol.clone(),
D.getColorFromSymbol(b,r);var u=q.isSome(n)&&n.renderer||b.get("layer.renderer")||b.get("sourceLayer.renderer"),C=yield u.getSymbolAsync(b,n);if(C){C="web-style"===C.type?yield C.fetchSymbol(q.isSome(n)?n.abortOptions:null):C.clone();C=D.getColorFromSymbol(C,r);if(!("visualVariables"in u)||"visualVariables"in u&&!u.visualVariables||"visualVariables"in u&&(null==(t=u.visualVariables)||!t.length))return C;u.arcadeRequiredForVisualVariables&&(q.isNone(n)||q.isNone(n.arcade))&&(n={...q.unwrap(n)},n.arcade=
yield x.loadArcade());t=yield new Promise((f,B)=>e(["../../renderers/visualVariables/support/visualVariableUtils"],f,B));var I=[],w=[];for(const f of u.visualVariables)switch(f.type){case "color":I.push(f);break;case "opacity":w.push(f)}u=(u=0<I.length?I[I.length-1]:null)?t.getColor(u,b,n):C;b=(C=0<w.length?w[w.length-1]:null)?t.getOpacity(C,b,n):null;null!=r&&(b=null!=b?b*r:r);return u?D.applyOpacityToColor(u,b):null}}});return m.apply(this,arguments)}let h=null;l.getDisplayedColor=function(b,n){return m.apply(this,
arguments)};l.getDisplayedSymbol=function(b,n){return c.apply(this,arguments)};l.renderColorRampPreviewHTML=function(b,n={}){var t="horizontal"===n.align;const {width:r=t?75:24,height:u=t?24:75,gradient:C=!0}=n;var I=window.devicePixelRatio,w=r*I,f=u*I;I=document.createElement("canvas");I.width=w;I.height=f;I.style.width=`${r}px`;I.style.height=`${u}px`;const B=I.getContext("2d");var K=t?w:0,P=t?0:f;if(C){const T=B.createLinearGradient(0,0,K,P);t=b.length;const X=1===t?0:1/(t-1);b.forEach((W,L)=>
T.addColorStop(L*X,W.toString()));B.fillStyle=T;B.fillRect(0,0,w,f)}else{w=t?w/b.length:w;f=t?f:f/b.length;P=K=0;for(const T of b)B.fillStyle=T.toString(),B.fillRect(K,P,w,f),K=t?K+w:0,P=t?0:P+f}b=document.createElement("div");b.style.width=`${r}px`;b.style.height=`${u}px`;F(b,null==n?void 0:n.effectList);b.appendChild(I);return b};l.renderDotDensityPreviewHTML=function(b,n,t){const {backgroundColor:r,outline:u,dotSize:C}=b;t=t&&t.swatchSize||y.SymbolSizeDefaults.size;const I=Math.round(t*t/C**2*
.8),w=window.devicePixelRatio;b=document.createElement("canvas");const f=t*w;b.width=f;b.height=f;b.style.width=`${b.width/w}px`;b.style.height=`${b.height/w}px`;const B=b.getContext("2d");r&&(B.fillStyle=r.toCss(!0),B.fillRect(0,0,f,f),B.fill());B.fillStyle=n.toCss(!0);if(h&&h.length/2===I)for(n=0;n<2*I;n+=2)B.fillRect(h[n],h[n+1],C*w,C*w),B.fill();else for(h=[],n=0;n<2*I;n+=2){const K=Math.floor(Math.random()*(f-0+1)),P=Math.floor(Math.random()*(f-0+1));h.push(K,P);B.fillRect(K,P,C*w,C*w);B.fill()}u&&
(u.color&&(B.strokeStyle=u.color.toCss(!0)),B.lineWidth=u.width,B.strokeRect(0,0,f,f));t=new Image(t,t);t.src=b.toDataURL();return t};l.renderPreviewHTML=z;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(e,l){function k(g,q){return Math.round(Math.min(Math.max(g+191.25*q,0),255))}e.SymbolSizeDefaults=void 0;(function(g){g[g.size=22]="size";g[g.lineWidth=50]="lineWidth";g[g.maxSize=120]="maxSize";g[g.maxOutlineSize=
80]="maxOutlineSize";g[g.tallSymbolWidth=20]="tallSymbolWidth"})(e.SymbolSizeDefaults||(e.SymbolSizeDefaults={}));e.adjustColorBrightness=function(g,q){if("type"in g&&("linear"===g.type||"pattern"===g.type))return g;g=new l(g);return new l([k(g.r,q),k(g.g,q),k(g.b,q),g.a])};e.adjustColorComponentBrightness=k;e.getConeShapes=function(g,q){let x=q?e.SymbolSizeDefaults.tallSymbolWidth:g;q=q?4:6;x=x<=e.SymbolSizeDefaults.size?x-.5*q:x-q;q=.15*x;const y=x;g-=q;return[{type:"ellipse",cx:.5*x,cy:g,rx:.5*
x,ry:q},{type:"path",path:[{command:"M",values:[.5*y,0]},{command:"L",values:[y,g]},{command:"L",values:[0,g]},{command:"Z",values:[]}]}]};e.getCubeShapes=function(g,q){let x=q?e.SymbolSizeDefaults.tallSymbolWidth:g;var y=q?4:6;y=x=x<=e.SymbolSizeDefaults.size?x-.5*y:x-y;q=q?.35*x:.5*x;return[{type:"path",path:[{command:"M",values:[.5*y,0]},{command:"L",values:[y,.5*q]},{command:"L",values:[.5*y,q]},{command:"L",values:[0,.5*q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,
.5*q]},{command:"L",values:[.5*y,q]},{command:"L",values:[.5*y,g]},{command:"L",values:[0,g-.5*q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*y,q]},{command:"L",values:[.5*y,g]},{command:"L",values:[y,g-.5*q]},{command:"L",values:[y,.5*q]},{command:"Z",values:[]}]}]};e.getCylinderShapes=function(g,q){var x=q?e.SymbolSizeDefaults.tallSymbolWidth:g;q=q?4:6;x=x<=e.SymbolSizeDefaults.size?x-.5*q:x-q;q=.5*x;const y=.15*x;g-=y;return[{type:"ellipse",cx:.5*x,cy:g,rx:q,ry:y},{type:"path",
path:[{command:"M",values:[0,y]},{command:"L",values:[0,g]},{command:"L",values:[x,g]},{command:"L",values:[x,y]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*x,cy:y,rx:q,ry:y}]};e.getDiamondShapes=function(g){var q=g;q=q<e.SymbolSizeDefaults.size?q-2:q-4;const x=Math.floor(g/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*q,0]},{command:"L",values:[q,.5*g-x]},{command:"L",values:[.45*q-x,.5*g+x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*q,0]},{command:"L",
values:[.45*q-x,.5*g+x]},{command:"L",values:[0,.5*g-x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*g-x]},{command:"L",values:[.45*q-x,.5*g+x]},{command:"L",values:[.45*q,g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*q,g]},{command:"L",values:[q,.5*g-x]},{command:"L",values:[.45*q-x,.5*g+x]},{command:"Z",values:[]}]}]};e.getExtrudeSymbolShapes=function(g){const q=e.SymbolSizeDefaults.size;g*=.5;return[{type:"path",path:[{command:"M",values:[0,
.35*q]},{command:"L",values:[.3*q,.7*q]},{command:"L",values:[.3*q,.7*q+g]},{command:"L",values:[0,.7*q+g-.35*q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*q,.7*q]},{command:"L",values:[.3*q,.7*q+g]},{command:"L",values:[q,g]},{command:"L",values:[q,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*q,0]},{command:"L",values:[q,0]},{command:"L",values:[.3*q,.7*q]},{command:"L",values:[0,.35*q]},{command:"Z",values:[]}]}]};e.getInvertedConeShapes=function(g){let q=
g;q=q<e.SymbolSizeDefaults.size?q-3:q-6;const x=.15*q,y=q;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[y,0]},{command:"L",values:[.5*y,g-x]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*q,cy:0,rx:.5*q,ry:x}]};e.getPathSymbolShapes=function(g,q,x){var y=e.SymbolSizeDefaults.size;let D=y,F=y;1>g?D*=.75:1<g&&(F*=1.25);g=y;q&&x&&(D=F=g=y=0);return[{type:"path",path:[{command:"M",values:[g,0]},{command:"L",values:[x?g:.875*g,0]},{command:"L",values:[x?D-.5*g:0,F-.5*y]},
{command:"L",values:[D-.5*g,F-.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[g,0]},{command:"L",values:[g,q?0:.125*y]},{command:"L",values:[D-.5*g,q?F-.5*y:y]},{command:"L",values:[D-.5*g,F-.5*y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[D-.5*g,F-.5*y]},{command:"L",values:[x?D-.5*g:0,F-.5*y]},{command:"L",values:[x?D-.5*g:0,q?F-.5*y:y]},{command:"L",values:[D-.5*g,q?F-.5*y:y]},{command:"Z",values:[]}]}]};e.getTetrahedronShapes=function(g){var q=
g;q=q<e.SymbolSizeDefaults.size?q-1:q-2;return[{type:"path",path:[{command:"M",values:[.45*g,0]},{command:"L",values:[g,q]},{command:"L",values:[.45*g,.6*q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*g,0]},{command:"L",values:[.45*g,.6*q]},{command:"L",values:[0,q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,q]},{command:"L",values:[.45*g,.6*q]},{command:"L",values:[g,q]},{command:"Z",values:[]}]}]};e.getWaterSymbolShapes=function(){return[{type:"path",
path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
e.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c){function m(L){L=L.symbolLayers;if(!L)return null;let R=null;L.forEach(aa=>{if("object"!==aa.type||null==aa.resource.href)R="water"===aa.type?D.unwrap(aa.color):D.isSome(aa.material)?D.unwrap(aa.material.color):null});return R?new g(R):null}function h(L,R){if(null==R)return L;L=L.toRgba();L[3]*=R;return new g(L)}function b(L,R,aa){if(L=L.symbolLayers){var H=N=>{N=D.isSome(N)?N:null;R=R||N||null!=aa&&W;return h(R,aa)};L.forEach(N=>{if("object"!==N.type||null==N.resource.href||
R)if("water"===N.type)N.color=H(N.color);else{var Q=D.isSome(N.material)?N.material.color:null;Q=H(Q);D.isNone(N.material)?N.material=new c.Symbol3DMaterial({color:Q}):N.material.color=Q;null!=aa&&"outline"in N&&D.isSome(N.outline)&&D.isSome(N.outline.color)&&(N.outline.color=h(N.outline.color,aa))}})}}function n(L,R){return t.apply(this,arguments)}function t(){t=k._asyncToGenerator(function*(L,R){(L=L.symbolLayers)&&(yield x.forEach(L,function(){var aa=k._asyncToGenerator(function*(H){return r(H,
R)});return function(H){return aa.apply(this,arguments)}}()))});return t.apply(this,arguments)}function r(L,R){return u.apply(this,arguments)}function u(){u=k._asyncToGenerator(function*(L,R){switch(L.type){case "extrude":L.size="number"===typeof R[2]?R[2]:0;break;case "icon":case "line":case "text":R=C(R);D.isSome(R)&&(L.size=R);break;case "path":{const aa=f(R,z.ONES,[L.width,void 0,L.height]);L.width=P(R[0],L.width,1,aa);L.height=P(R[2],L.height,1,aa)}break;case "object":yield I(L,R)}});return u.apply(this,
arguments)}function C(L){for(const R of L)if("number"===typeof R)return R;return null}function I(L,R){return w.apply(this,arguments)}function w(){w=k._asyncToGenerator(function*(L,R){const {resourceSize:aa,symbolSize:H}=yield B(L),N=f(R,aa,H);L.width=P(R[0],H[0],aa[0],N);L.depth=P(R[1],H[1],aa[1],N);L.height=P(R[2],H[2],aa[2],N)});return w.apply(this,arguments)}function f(L,R,aa){for(let H=0;3>H;H++){const N=L[H];switch(N){case "symbol-value":return null!=aa[H]?aa[H]/R[H]:1;case "proportional":break;
default:if(N&&R[H])return N/R[H]}}return 1}function B(L){return K.apply(this,arguments)}function K(){K=k._asyncToGenerator(function*(L){const R=yield(yield new Promise((E,G)=>e(["./symbolLayerUtils"],E,G))).computeObjectLayerResourceSize(L,10),{width:aa,height:H,depth:N}=L;L=[aa,N,H];let Q=1;for(var v=0;3>v;v++)if(null!=L[v]){Q=L[v]/R[v];break}for(v=0;3>v;v++)null==L[v]&&(L[v]=R[v]*Q);return{resourceSize:R,symbolSize:L}});return K.apply(this,arguments)}function P(L,R,aa,H){switch(L){case "proportional":return aa*
H;case "symbol-value":return null!=R?R:aa;default:return L}}function T(){T=k._asyncToGenerator(function*(L,R){if(L&&R){if(q.isSymbol3D(L))return n(L,R);if(q.isSymbol2D(L)&&(R=C(R),!D.isNone(R)))switch(L.type){case "simple-marker":L.size=R;break;case "picture-marker":{const aa=L.width/L.height;1<aa?(L.width=R,L.height=R*aa):(L.width=R*aa,L.height=R);break}case "simple-line":L.width=R;break;case "text":L.font.size=R}}});return T.apply(this,arguments)}const X=/\/resource\/(.*?)\.svg$/,W=new g("white");
l.applyColorToSymbol=function(L,R,aa){if(L&&(R||null!=aa))if(R&&(R=new g(R)),q.isSymbol3D(L))b(L,R,aa);else if(q.isSymbol2D(L)){if(R=R||L.color)L.color=h(R,aa);null!=aa&&"outline"in L&&L.outline&&L.outline.color&&(L.outline.color=h(L.outline.color,aa))}};l.applyOpacityToColor=h;l.applyRotationToSymbol=function(L,R,aa){L&&null!=R&&(q.isSymbol3D(L)?(L=L.symbolLayers)&&L.forEach(H=>{if(H&&"object"===H.type)switch(aa){case "tilt":H.tilt=R;break;case "roll":H.roll=R;break;default:H.heading=R}}):!q.isSymbol2D(L)||
"simple-marker"!==L.type&&"picture-marker"!==L.type&&"text"!==L.type||(L.angle=R))};l.applySizesToSymbol=function(L,R){return T.apply(this,arguments)};l.getCSSFilterFromEffectList=function(L){if(!L)return null;L=L.effects.filter(R=>"bloom"!==R.type).map(R=>R.toJSON());return p.effectFunctionsFromJSON(L)};l.getColorFromSymbol=function(L,R){if(!L)return null;let aa=null;q.isSymbol3D(L)?aa=m(L):q.isSymbol2D(L)&&(aa=L.color?new g(L.color):null);return aa?h(aa,R):null};l.getIconHref=function(L,R){R=R.resource.href;
return!y("esri-canvas-svg-support")&&L.styleOrigin&&X.test(R)?R.replace(X,"/resource/png/$1.png"):R};l.getSymbolOutlineSize=function(L){if(!L)return 0;if(q.isSymbol3D(L)){{const R=L.symbolLayers&&L.symbolLayers.length;R?(L=L.symbolLayers.getItemAt(R-1),L="outline"in L?D.get(L,"outline","size"):void 0):L=void 0}return D.isSome(L)?L:0}return(L=d.getStroke(L))&&F.px2pt(L.width)||0};l.isVolumetricSymbol=function(L){if(D.isNone(L)||!("symbolLayers"in L)||D.isNone(L.symbolLayers))return!1;switch(L.type){case "point-3d":return L.symbolLayers.some(R=>
"object"===R.type);case "line-3d":return L.symbolLayers.some(R=>"path"===R.type);case "polygon-3d":return L.symbolLayers.some(R=>"object"===R.type||"extrude"===R.type);default:return!1}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(e,l,k,g,q,x,y){function D(c){if(!c)return null;let m;switch(c.type){case "simple-fill":case "picture-fill":case "simple-marker":m=
D(c.outline);break;case "simple-line":{const h=x.pt2px(c.width);"none"!==c.style&&0!==h&&(m={color:c.color,style:d(c.style),width:h,cap:c.cap,join:"miter"===c.join?x.pt2px(c.miterLimit):c.join});break}default:m=null}return m}const F={left:"start",center:"middle",right:"end",justify:"start"},z={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},p=new q(1E3),d=function(){const c={};return function(m){if(c[m])return c[m];const h=m.replace(/-/g,"");return c[m]=h}}();
k=new k([128,128,128]);e.defaultThematicColor=k;e.dekebabifyLineStyle=d;e.getFill=function(c){const m=c.style;let h=null;if(c)switch(c.type){case "simple-marker":"cross"!==m&&"x"!==m&&(h=c.color);break;case "simple-fill":"solid"===m?h=c.color:"none"!==m&&(h={type:"pattern",x:0,y:0,src:l.getAssetUrl(`esri/symbols/patterns/${m}.png`),width:5,height:5});break;case "picture-fill":h={type:"pattern",src:c.url,width:x.pt2px(c.width)*c.xscale,height:x.pt2px(c.height)*c.yscale,x:x.pt2px(c.xoffset),y:x.pt2px(c.yoffset)};
break;case "text":h=c.color;break;case "cim":h=y.getCIMSymbolColor(c)}return h};e.getPatternUrlWithColor=function(c,m){const h=c+"-"+m;return void 0!==p.get(h)?Promise.resolve(p.get(h)):g(c,{responseType:"image"}).then(b=>{b=b.data;const n=b.naturalWidth,t=b.naturalHeight,r=document.createElement("canvas");r.width=n;r.height=t;const u=r.getContext("2d");u.fillStyle=m;u.fillRect(0,0,n,t);u.globalCompositeOperation="destination-in";u.drawImage(b,0,0);b=r.toDataURL();p.put(h,b);return b})};e.getSVGAlign=
function(c){return c=(c=c.horizontalAlignment)&&F[c.toLowerCase()]||"middle"};e.getSVGBaseline=function(c){return(c=c.verticalAlignment)&&z[c.toLowerCase()]||"alphabetic"};e.getSVGBaselineShift=function(c){return"bottom"===c.verticalAlignment?"super":null};e.getStroke=D;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(e){return function(){function l(g,q){this._storage=new e.MemCacheStorage;this._storage.maxSize=g;q&&this._storage.registerRemoveFunc("",
q)}var k=l.prototype;k.put=function(g,q){this._storage.put(g,q,1,1)};k.pop=function(g){return this._storage.pop(g)};k.get=function(g){return this._storage.get(g)};k.clear=function(){this._storage.clearAll()};k.destroy=function(){this._storage.destroy()};return l}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(e,l,k){function g(d){d=k.toCIMSymbolJSON(d);if("CIMTextSymbol"===d.type)return d.height;let c=0;if(d.symbolLayers)for(const m of d.symbolLayers)k.isCIMMarker(m)&&
m.size>c?c=m.size:k.isCIMStroke(m)&&m.width>c?c=m.width:k.isCIMFill(m);return c}function q(d,c,m,h){if("CIMTextSymbol"===d.type)d.height*=c;else{if(m&&d.effects)for(const b of d.effects)D(b,c);if(d.symbolLayers)for(const b of d.symbolLayers)switch(b.type){case "CIMPictureMarker":case "CIMVectorMarker":x(b,c,h);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=h&&h.preserveOutlineWidth||!b.width||(b.width*=c);break;case "CIMPictureFill":b.height&&(b.height*=c);b.offsetX&&(b.offsetX*=c);b.offsetY&&
(b.offsetY*=c);break;case "CIMHatchFill":q(b.lineSymbol,c,!0,{...h,preserveOutlineWidth:!1}),b.offsetX&&(b.offsetX*=c),b.offsetY&&(b.offsetY*=c),b.separation&&(b.separation*=c)}}}function x(d,c,m){d.markerPlacement&&y(d.markerPlacement,c);d.offsetX&&(d.offsetX*=c);d.offsetY&&(d.offsetY*=c);d.anchorPoint&&"Absolute"===d.anchorPointUnits&&(d.anchorPoint={x:d.anchorPoint.x*c,y:d.anchorPoint.y*c});d.size*=c;if("CIMVectorMarker"===d.type&&d.markerGraphics)for(const h of d.markerGraphics)d.scaleSymbolsProportionally||
q(h.symbol,c,!0,m)}function y(d,c){k.isCIMMarkerStrokePlacement(d)&&d.offset&&(d.offset*=c);switch(d.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":d.customEndingOffset&&(d.customEndingOffset*=c);d.offsetAlongLine&&(d.offsetAlongLine*=c);if(d.placementTemplate&&d.placementTemplate.length){var m=d.placementTemplate.map(h=>h*c);d.placementTemplate=m}break;case "CIMMarkerPlacementAlongLineVariableSize":d.maxRandomOffset&&(d.maxRandomOffset*=c);d.placementTemplate&&
d.placementTemplate.length&&(m=d.placementTemplate.map(h=>h*c),d.placementTemplate=m);break;case "CIMMarkerPlacementOnLine":d.startPointOffset&&(d.startPointOffset*=c);break;case "CIMMarkerPlacementAtExtremities":d.offsetAlongLine&&(d.offsetAlongLine*=c);break;case "CIMMarkerPlacementAtRatioPositions":d.beginPosition&&(d.beginPosition*=c);d.endPosition&&(d.endPosition*=c);break;case "CIMMarkerPlacementPolygonCenter":d.offsetX&&(d.offsetX*=c);d.offsetY&&(d.offsetY*=c);break;case "CIMMarkerPlacementInsidePolygon":d.offsetX&&
(d.offsetX*=c),d.offsetY&&(d.offsetY*=c),d.stepX&&(d.stepX*=c),d.stepY&&(d.stepY*=c)}}function D(d,c){switch(d.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":d.width&&(d.width*=c);break;case "CIMGeometricEffectBuffer":d.size&&(d.size*=c);break;case "CIMGeometricEffectCut":d.beginCut&&(d.beginCut*=c);d.endCut&&(d.endCut*=c);d.middleCut&&(d.middleCut*=c);break;case "CIMGeometricEffectDashes":d.customEndingOffset&&(d.customEndingOffset*=c);d.offsetAlongLine&&(d.offsetAlongLine*=
c);if(d.dashTemplate&&d.dashTemplate.length){const m=d.dashTemplate.map(h=>h*c);d.dashTemplate=m}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":d.length&&(d.length*=c);break;case "CIMGeometricEffectMove":d.offsetX&&(d.offsetX*=c);d.offsetY&&(d.offsetY*=c);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":d.offset&&(d.offset*=c);break;case "CIMGeometricEffectRegularPolygon":d.radius&&(d.radius*=c);break;case "CIMGeometricEffectTaperedPolygon":d.fromWidth&&
(d.fromWidth*=c);d.length&&(d.length*=c);d.toWidth&&(d.toWidth*=c);break;case "CIMGeometricEffectWave":d.amplitude&&(d.amplitude*=c),d.period&&(d.period*=c)}}function F(d,c){let m;m="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===d.type;if(m.symbolLayers)for(const h of m.symbolLayers)if(!(h.colorLocked||d&&(k.isCIMStroke(h)||k.isCIMMarker(h)&&h.markerPlacement&&k.isCIMMarkerStrokePlacement(h.markerPlacement))))switch(h.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":h.tintColor&&
z(c,h.tintColor);break;case "CIMVectorMarker":h.markerGraphics.forEach(b=>{F(b.symbol,c)});break;case "CIMSolidStroke":case "CIMSolidFill":z(c,h.color);break;case "CIMHatchFill":F(h.lineSymbol,c)}}function z(d,c){for(const m of d)if(m.join(".")===c.join("."))return;d.push(c)}function p(d,c,m){var h="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===h.type?!0:!1;if(h.symbolLayers)for(const b of h.symbolLayers)if(!b.colorLocked){if(d)if(m){if({layersToColor:h}=m,(k.isCIMStroke(b)||k.isCIMMarker(b)&&
b.markerPlacement&&k.isCIMMarkerStrokePlacement(b.markerPlacement))&&"fill"===h||k.isCIMFill(b)&&"outline"===h)continue}else if(k.isCIMStroke(b)||k.isCIMMarker(b)&&b.markerPlacement&&k.isCIMMarkerStrokePlacement(b.markerPlacement))continue;h=c.toArray();switch(b.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":b.tintColor=h;break;case "CIMVectorMarker":b.markerGraphics.forEach(n=>{p(n.symbol,c,m)});break;case "CIMSolidStroke":case "CIMSolidFill":b.color=h;break;case "CIMHatchFill":p(b.lineSymbol,
c,m)}}}e.applyCIMSymbolColor=function(d,c,m){c instanceof l||(c=new l(c));(d=k.toCIMSymbolJSON(d))&&p(d,c,m)};e.applyCIMSymbolRotation=function(d,c,m=!1){d=k.toCIMSymbolJSON(d);m&&0!==c&&(c=360-c);if("CIMTextSymbol"===d.type)d.angle=c;else if("CIMPointSymbol"===d.type&&d.symbolLayers){m=c-(d.angle||0);for(const h of d.symbolLayers)if(k.isCIMMarker(h)){let b=h.rotation||0;b=h.rotateClockwise?b-m:b+m;h.rotation=b}d.angle=c}};e.getCIMSymbolColor=function(d){d=k.toCIMSymbolJSON(d);const c=[];F(d,c);return c.length?
new l(k.fromCIMColor(c[0])):null};e.getCIMSymbolRotation=function(d,c=!1){d=k.toCIMSymbolJSON(d);return"CIMTextSymbol"===d.type||"CIMPointSymbol"===d.type?c&&0!==d.angle?360-d.angle:d.angle||0:0};e.getCIMSymbolSize=g;e.scaleCIMMarker=x;e.scaleCIMSymbolTo=function(d,c,m){const h=k.toCIMSymbolJSON(d);d=g(d);if(0===d)if("CIMTextSymbol"===h.type)h.height=c;else{if(h.symbolLayers)for(const b of h.symbolLayers)switch(b.type){case "CIMPictureMarker":case "CIMVectorMarker":b.size=c;break;case "CIMPictureStroke":case "CIMSolidStroke":b.width=
c}}else q(h,c/d,!1,m)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(e,l){function k(g,q){"string"!==typeof g&&(g=String(g));switch(q){case "LowerCase":return g.toLowerCase();case "Allcaps":return g.toUpperCase();default:return g}}l._adjustTextCase=k;l.colorToArray=function(g){return[g.r,g.g,g.b,g.a]};l.createLabelOverrideFunction=function(g,q,x){const y=p=>{let d=p.length;for(;d--;)if(-1===" /-,\n".indexOf(p.charAt(d)))return!1;
return!0},D=[];var F=0;let z=-1;do z=q.indexOf("[",F),z>=F&&(z>F&&(F=q.substr(F,z-F),D.push([F,null,y(F)])),F=z+1,z=q.indexOf("]",F),z>=F&&(z>F&&(F=q.substr(F,z-F),(F=g[F])&&D.push([null,F,!1])),F=z+1));while(-1!==z);F<q.length-1&&(g=q.substr(F),D.push([g,null,y(g)]));return p=>{let d="",c=null;for(const m of D){const [h,b,n]=m;if(h)n?c=h:(c&&(d+=c,c=null),d+=h);else{const t=p.attributes[b];t&&(c&&(d+=c,c=null),d+=t)}}return k(d,x)}};l.evaluateValueOrFunction=function(g,q,x,y){return"function"===
typeof g?g(q,x,y):g};l.fromCIMColor=function(g){return g?{r:g[0],g:g[1],b:g[2],a:g[3]/255}:{r:0,g:0,b:0,a:0}};l.getValue=g=>isNaN(g)||!g?0:g;l.importGeometryEngine=function(){return new Promise((g,q)=>e(["../../geometry/geometryEngineJSON"],g,q))};l.isCIMFill=function(g){return"CIMGradientFill"===g.type||"CIMHatchFill"===g.type||"CIMPictureFill"===g.type||"CIMSolidFill"===g.type||"CIMWaterFill"===g.type};l.isCIMMarker=function(g){return"CIMVectorMarker"===g.type||"CIMPictureMarker"===g.type||"CIMBarChartMarker"===
g.type||"CIMCharacterMarker"===g.type||"CIMPieChartMarker"===g.type||"CIMStackedBarChartMarker"===g.type};l.isCIMMarkerStrokePlacement=function(g){return"CIMMarkerPlacementAlongLineRandomSize"===g.type||"CIMMarkerPlacementAlongLineSameSize"===g.type||"CIMMarkerPlacementAlongLineVariableSize"===g.type||"CIMMarkerPlacementAtExtremities"===g.type||"CIMMarkerPlacementAtMeasuredUnits"===g.type||"CIMMarkerPlacementAtRatioPositions"===g.type||"CIMMarkerPlacementOnLine"===g.type||"CIMMarkerPlacementOnVertices"===
g.type};l.isCIMStroke=function(g){return"CIMGradientStroke"===g.type||"CIMPictureStroke"===g.type||"CIMSolidStroke"===g.type};l.isGeometryEngineRequired=g=>{if(!g)return!1;for(const q of g)switch(q.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};l.resampleHermite=function(g,q,x,y,D,F,z=!0){const p=q/D;x/=F;const d=Math.ceil(p/2),c=Math.ceil(x/2);for(let b=0;b<F;b++)for(let n=0;n<D;n++){const t=4*(n+(z?F-b-1:b)*D);var m=0;let r=0,u=0,C=0,I=0,w=0,f=0;const B=
(b+.5)*x;for(let K=Math.floor(b*x);K<(b+1)*x;K++){var h=Math.abs(B-(K+.5))/c;const P=(n+.5)*p;h*=h;for(let T=Math.floor(n*p);T<(n+1)*p;T++){let X=Math.abs(P-(T+.5))/d;m=Math.sqrt(h+X*X);-1<=m&&1>=m&&(m=2*m*m*m-3*m*m+1,0<m&&(X=4*(T+K*q),f+=m*g[X+3],u+=m,255>g[X+3]&&(m=m*g[X+3]/250),C+=m*g[X],I+=m*g[X+1],w+=m*g[X+2],r+=m))}}y[t]=C/r;y[t+1]=I/r;y[t+2]=w/r;y[t+3]=f/u}};l.toCIMSymbolJSON=function(g){var q;return null==(q=g.data)?void 0:q.symbol};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/views/support/layerViewUtils":function(){define(["exports",
"../../core/maybe"],function(e,l){e.extractSafeScaleBounds=function(k){var g,q;const x=k.effectiveScaleRange;k=null!=(g=null==x?void 0:x.minScale)?g:0;g=null!=(q=null==x?void 0:x.maxScale)?q:0;return{minScale:k,maxScale:g}};e.highlightsSupported=function(k){return k&&"function"===typeof k.highlight};e.isScaleRangeActive=function(k,g){return 0<k||0<g};e.occludeesSupported=function(k){return k&&"function"===typeof k.maskOccludee};e.scaleBoundsPredicate=function(k,g,q){return l.isNone(k)||k>q&&(0===
g||k<g)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(e,l){const k=new l({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),g=new l({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),q=new l({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});l=new l({id:"browse-clustered-features",
title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});e.all=[k,g,l,q];e.browseClusteredFeatures=l;e.removeSelectedFeature=g;e.zoomToClusteredFeatures=q;e.zoomToFeature=k;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Popup/actionUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/Logger ../../core/promiseUtils ./actions".split(" "),function(e,l,k,g,q,x){function y(b){const {selectedFeature:n,location:t,view:r}=
b;return r?"3d"===r.type?n||t:b.get("selectedFeature.geometry")||t:null}function D(b,n){if("3d"!==(null==n?void 0:n.type)||!b||"esri.Graphic"!==b.declaredClass)return!0;if((n=n.getViewForGraphic(b))&&"whenGraphicBounds"in n){let t=!1;n.whenGraphicBounds(b,{useViewElevation:!0}).then(r=>{t=!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}).catch(()=>{const r=new k("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",
{graphic:b});h.error(r)});return t}return!0}function F(b){return z.apply(this,arguments)}function z(){z=l._asyncToGenerator(function*(b){const {location:n,selectedFeature:t,view:r,zoomFactor:u}=b,C=y(b);if(!C)return b=new k("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:C,view:r}),h.error(b),Promise.reject(b);const I=r.scale/u,w=b.get("selectedFeature.geometry")||n,f=w&&"point"===w.type&&D(t,r);x.zoomToFeature.active=!0;x.zoomToFeature.disabled=!0;try{yield b.view.goTo({target:C,
scale:f?I:void 0})}finally{x.zoomToFeature.active=!1,x.zoomToFeature.disabled=!1,b.zoomToLocation=null,f&&(b.location=w)}});return z.apply(this,arguments)}function p(b){return d.apply(this,arguments)}function d(){d=l._asyncToGenerator(function*(b){const {selectedFeature:n,view:t}=b;if("2d"!==(null==t?void 0:t.type))throw b=new k("zoomToCluster:invalid-view","View must be 2d MapView.",{view:t}),h.error(b),b;if(!n.isAggregate)throw b=new k("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",
{selectedFeature:n}),h.error(b),b;b=yield t.whenLayerView(n.sourceLayer);const r=b.createQuery();r.aggregateIds=[n.getObjectId()];x.zoomToClusteredFeatures.active=!0;x.zoomToClusteredFeatures.disabled=!0;({extent:b}=yield b.queryExtent(r));yield t.goTo({target:b});x.zoomToClusteredFeatures.active=!1;x.zoomToClusteredFeatures.disabled=!1});return d.apply(this,arguments)}function c(){c=l._asyncToGenerator(function*(b){const {selectedFeature:n,view:t}=b;if("2d"!==(null==t?void 0:t.type))throw b=new k("displayClusterExtent:invalid-view",
"View must be 2d MapView.",{view:t}),h.error(b),b;if(!n.isAggregate)throw b=new k("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:n}),h.error(b),b;var r=yield t.whenLayerView(n.sourceLayer);const u=r.createQuery();u.aggregateIds=[n.getObjectId()];({extent:r}=yield r.queryExtent(u));b.selectedClusterBoundaryFeature.geometry=r;t.graphics.add(b.selectedClusterBoundaryFeature)});return c.apply(this,arguments)}function m(){m=l._asyncToGenerator(function*(b){const {selectedFeature:n,
view:t}=b;if("2d"!==(null==t?void 0:t.type))throw b=new k("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:t}),h.error(b),b;if(!n.isAggregate)throw b=new k("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:n}),h.error(b),b;b=yield t.whenLayerView(n.sourceLayer);const r=b.createQuery();r.aggregateIds=[n.getObjectId()];x.browseClusteredFeatures.active=!0;x.browseClusteredFeatures.disabled=!0;({features:b}=
yield b.queryFeatures(r));x.browseClusteredFeatures.active=!1;x.browseClusteredFeatures.disabled=!1;t.popup.open({features:[n].concat(b),featureMenuOpen:!0})});return m.apply(this,arguments)}const h=g.getLogger("esri.widgets.Popup.PopupViewModel");e.browseAggregateFeatures=function(b){return m.apply(this,arguments)};e.displayClusterExtent=function(b){return c.apply(this,arguments)};e.getSelectedTarget=y;e.isZoomScreenSize=D;e.removeClusteredFeaturesForBrowsing=function(b){var n;null!=(n=b.selectedFeature)&&
n.isAggregate&&(b.features=b.features.filter(t=>t.isAggregate))};e.triggerAction=function(b){const {event:n,view:t}=b;({action:b}=n);var r=t&&t.popup;if(!b)return Promise.reject(new k("trigger-action:missing-arguments","Event has no action"));if(!r)return Promise.reject(new k("trigger-action:missing-arguments","view.popup is missing"));const {disabled:u,id:C}=b;if(!C)return Promise.reject(new k("trigger-action:invalid-action","action.id is missing"));if(u)return Promise.reject(new k("trigger-action:invalid-action",
"Action is disabled"));if(C===x.zoomToFeature.id)return F(r.viewModel).catch(q.throwIfNotAbortError);if(C===x.zoomToClusteredFeatures.id)return p(r.viewModel);if(C===x.browseClusteredFeatures.id)return r.featureMenuOpen=!r.featureMenuOpen,r.viewModel.browseClusterEnabled=!r.viewModel.browseClusterEnabled,Promise.resolve();r.viewModel.browseClusterEnabled=!1;if(C===x.removeSelectedFeature.id){r.close();({selectedFeature:b}=r);if(!b)return Promise.reject(new k(`trigger-action:${x.removeSelectedFeature.id}`,
"selectedFeature is required",{selectedFeature:b}));({sourceLayer:r}=b);r?r.remove(b):t.graphics.remove(b)}return Promise.resolve()};e.zoomToClusterExtent=p;e.zoomToLocation=F;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,k,g,q,x,y,D){e.GoToMixin=F=>{F=function(z){function p(...d){d=z.call(this,...d)||this;d.goToOverride=null;d.view=null;return d}l._inheritsLoose(p,z);p.prototype.callGoTo=function(d){const {view:c}=this;return this.goToOverride?this.goToOverride(c,d):c.goTo(d.target,d.options)};return p}(F);k.__decorate([g.property()],F.prototype,"goToOverride",void 0);k.__decorate([g.property()],F.prototype,"view",void 0);return F=k.__decorate([D.subclass("esri.widgets.support.GoTo")],F)};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/PopupView":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/Logger ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/set ../core/accessorSupport/decorators/subclass".split(" "),function(e,l,k,g,q,x,y,D,F,z,p){e.PopupView=d=>{d=function(c){function m(){return c.apply(this,arguments)||this}l._inheritsLoose(m,c);var h=m.prototype;h.fetchPopupFeatures=
function(){var b=l._asyncToGenerator(function*(n,t){yield this.when();const {location:r,queryArea:u,layerViewsAndGraphics:C,clientOnlyGraphics:I}=yield this._prepareFetchPopupFeatures(n,t);n=Promise.resolve(I);t=this._queryLayerPopupFeatures(u,C,t);const w=t.map(f=>f.promise);n=q.eachAlwaysValues([n,...w]).then(f=>Array.from(new Set(f.flat())));return{location:r,clientOnlyGraphics:I,allGraphicsPromise:n,promisesPerLayerView:t}});return function(n,t){return b.apply(this,arguments)}}();h._queryLayerPopupFeatures=
function(b,n,t){return n.map(({layerView:r,graphics:u})=>{u={clientGraphics:u,event:g.isSome(t)?t.event:null,signal:g.isSome(t)?t.signal:null,defaultPopupTemplateEnabled:g.isSome(t)?!!t.defaultPopupTemplateEnabled:!1};u=r.fetchPopupFeatures(b,u);return{layerView:r,promise:u}})};h._isValidPopupGraphic=function(b,n){return b&&!!b.getEffectivePopupTemplate(g.isSome(n)&&n.defaultPopupTemplateEnabled)};h._prepareFetchPopupFeatures=function(){var b=l._asyncToGenerator(function*(n,t){const {clientGraphics:r,
queryArea:u,location:C}=yield this._popupHitTestGraphics(n,t);n=this._getFetchPopupLayerViews();const {layerViewsAndGraphics:I,clientOnlyGraphics:w}=this._graphicsPerFetchPopupLayerView(r,n);return{clientOnlyGraphics:w,layerViewsAndGraphics:I,queryArea:u,location:C}});return function(n,t){return b.apply(this,arguments)}}();h._popupHitTestGraphics=function(){var b=l._asyncToGenerator(function*(n,t){const {results:r,mapPoint:u}=yield this.popupHitTest(n);n=r.filter(I=>this._isValidPopupGraphic(I.graphic,
t));const C=n.length?n[0].mapPoint:null;return{clientGraphics:n.map(I=>I.graphic),queryArea:u,location:u||C}});return function(n,t){return b.apply(this,arguments)}}();h._getFetchPopupLayerViews=function(){const b=[];this.allLayerViews.forEach(n=>{this._isValidPopupLayerView(n)&&b.push(n)});g.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);return b.reverse()};h._isValidPopupLayerView=function(b){return g.isSome(b)&&(!("layer"in b)||!b.suspended)&&
"fetchPopupFeatures"in b};h._graphicsPerFetchPopupLayerView=function(b,n){const t=[],r=new Map;n=n.map(u=>{const C=[];"layer"in u?r.set(u.layer,C):r.set(u.graphics,C);return{layerView:u,graphics:C}});for(const u of b)(b=r.get(u.layer)||r.get(u.sourceLayer)||null)?b.push(u):t.push(u);return{layerViewsAndGraphics:n,clientOnlyGraphics:t}};return m}(d);return d=k.__decorate([p.subclass("esri.views.PopupView")],d)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/AnimationManager":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./unitBezier ./viewpointUtils ../../geometry/Point".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h){let b=function(){function n(t,r,u,C){const I=t.targetGeometry,w=r.targetGeometry;C?"string"===typeof C&&(C=c.parse(C)||c.easingFunctions.ease):C=c.easingFunctions.ease;this.easing=C;this.duration=u;this.sCenterX=I.x;this.sCenterY=I.y;this.sScale=t.scale;this.sRotation=t.rotation;this.tCenterX=w.x;this.tCenterY=w.y;this.tScale=r.scale;this.tRotation=r.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-
this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}n.prototype.applyRatio=function(t,r){var u=this.easing(r);let C,I;1<=r?(r=this.tCenterX,C=this.tCenterY,I=this.tRotation,u=this.tScale):(r=this.sCenterX+u*this.dCenterX,C=this.sCenterY+u*this.dCenterY,I=this.sRotation+u*this.dRotation,u=this.sScale+u*this.dScale);t.targetGeometry.x=r;t.targetGeometry.y=C;t.scale=u;t.rotation=I};return n}();k=function(n){function t(u){u=
n.call(this,u)||this;u.duration=200;u.transition=null;u.easing=c.easingFunctions.ease;u.view=null;u.viewpoint=null;u.viewpoint=new g({targetGeometry:new h,scale:0,rotation:0});u._updateTask=x.addFrameTask({postRender:u._postRender.bind(e._assertThisInitialized(u))});u._updateTask.pause();return u}e._inheritsLoose(t,n);var r=t.prototype;r.destroy=function(){this._updateTask.remove();this._updateTask=null};r.animate=function(u,C,I){this.stop();m.copy(this.viewpoint,C);this.transition=new b(this.viewpoint,
u.target,I&&I.duration||this.duration,I&&I.easing||this.easing);C=()=>{this.animation===u&&this._updateTask&&("finished"===u.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};u.when(C,C);this._startTime=performance.now();this._updateTask.resume();return this.animation=u};r.animateContinous=function(u,C){this.stop();this.updateFunction=C;this.viewpoint=u;const I=new d({target:u.clone()});
u=()=>{this.animation===I&&this._updateTask&&(this.updateFunction=this.animation=null)};I.when(u,u);this._startTime=performance.now();this._updateTask.resume();return this.animation=I};r.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};r._postRender=function(u){var C=this.animation;C&&C.state!==d.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,u.deltaTime):(u=(performance.now()-this._startTime)/this.transition.duration,C=1<=u,this.transition.applyRatio(this.viewpoint,
u),C&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};return t}(q);l.__decorate([y.property()],k.prototype,"animation",void 0);l.__decorate([y.property()],k.prototype,"duration",void 0);l.__decorate([y.property()],k.prototype,"transition",void 0);l.__decorate([y.property()],k.prototype,"easing",void 0);l.__decorate([y.property()],k.prototype,"view",void 0);l.__decorate([y.property()],k.prototype,"viewpoint",void 0);return k=l.__decorate([p.subclass("esri.views.2d.AnimationManager")],
k)})},"esri/views/2d/unitBezier":function(){define(["exports"],function(e){function l(q,x,y,D){function F(b,n){var t;let r,u;r=b;for(t=0;8>t;t++){u=((d*r+p)*r+z)*r-b;if(Math.abs(u)<n)return r;var C=(3*d*r+2*p)*r+z;if(1E-6>Math.abs(C))break;r-=u/C}C=0;t=1;r=b;if(r<C)return C;if(r>t)return t;for(;C<t;){u=((d*r+p)*r+z)*r;if(Math.abs(u-b)<n)break;b>u?C=r:t=r;r=.5*(t-C)+C}return r}const z=3*q,p=3*(y-q)-z,d=1-z-p,c=3*x,m=3*(D-x)-c,h=1-c-m;return function(b,n=1E-6){b=F(b,n);return((h*b+m)*b+c)*b}}const k=
/^cubic-bezier\((.*)\)/,g={};g.ease=l(.25,.1,.25,1);g.linear=l(0,0,1,1);g.easeIn=g["ease-in"]=l(.42,0,1,1);g.easeOut=g["ease-out"]=l(0,0,.58,1);g.easeInOut=g["ease-in-out"]=l(.42,0,.58,1);e.easingFunctions=g;e.parse=function(q){let x=g[q]||null;!x&&(q=k.exec(q))&&(q=q[1].split(",").map(y=>parseFloat(y.trim())),4!==q.length||q.some(y=>isNaN(y))||(x=l.apply(l,q)));return x};e.unitBezier=l;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/unitUtils ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/projection ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n){function t(M,V){return V.type?z.set(M,V.x,V.y):z.copy(M,V)}function r(M,V){return Math.max(M.width/V[0],M.height/V[1])*X(M.spatialReference)}function u(M,V,ca,ha){return C.apply(this,arguments)}function C(){C=l._asyncToGenerator(function*(M,V,ca,ha){if(!M||Array.isArray(M)&&!M.length)return null;g.isCollection(M)&&(M=M.toArray());if(Array.isArray(M)&&M.length&&"object"===typeof M[0]){var ka=M.every(Ka=>"attributes"in Ka);var pa=M.some(Ka=>!Ka.geometry),
za=M;if(ka&&pa&&V&&V.allLayerViews){ka=new Map;for(var Da of M)M=Da.layer,pa=ka.get(M)||[],za=Da.attributes[M.objectIdField],null!=za&&pa.push(za),ka.set(M,pa);const Ka=[];ka.forEach((Ea,Ia)=>{const kb=V.allLayerViews.find(Wa=>Wa.layer.id===Ia.id);if("queryFeatures"in kb){const Wa=Ia.createQuery();Wa.objectIds=Ea;Wa.returnGeometry=!0;Ka.push(kb.queryFeatures(Wa))}});Da=yield Promise.all(Ka);M=[];for(var Ba of Da)if(Ba&&Ba.features&&Ba.features.length)for(var Ga of Ba.features)q.isSome(Ga.geometry)&&
M.push(Ga.geometry);za=M}for(const Ka of za)ha=yield u(Ka,V,ca,ha);return ha}if(Array.isArray(M)&&2===M.length&&"number"===typeof M[0]&&"number"===typeof M[1])ka=new m(M);else if(M instanceof c)ka=M;else if("geometry"in M)if(M.geometry)ka=M.geometry;else if(M.layer){const Ka=M.layer;Ba=V.allLayerViews.find(Ea=>Ea.layer.id===Ka.id);"queryFeatures"in Ba&&(Ga=Ka.createQuery(),Ga.objectIds=[M.attributes[Ka.objectIdField]],Ga.returnGeometry=!0,Ba=yield Ba.queryFeatures(Ga),ka=q.get(Ba,"features",0,"geometry"))}if(q.isNone(ka))return null;
Ba="point"===ka.type?new d({xmin:ka.x,ymin:ka.y,xmax:ka.x,ymax:ka.y,spatialReference:ka.spatialReference}):ka.extent;if(!Ba)return null;h.isLoaded()||h.canProjectWithoutEngine(Ba.spatialReference,ca)||(yield h.load());ca=h.project(Ba,ca);return ca?ha=ha?ha.union(ca):ca:null});return C.apply(this,arguments)}function I(M){if(M&&(!Array.isArray(M)||"number"!==typeof M[0])&&("object"===typeof M||Array.isArray(M)&&"object"===typeof M[0])){if("layer"in M&&M.layer&&M.layer.minScale&&M.layer.maxScale){var V=
M.layer;return{min:V.minScale,max:V.maxScale}}if(Array.isArray(M)&&M.length&&M.every(ca=>"layer"in ca)){let ca=V=0;for(const ha of M)(M=ha.layer)&&M.minScale&&M.maxScale&&(V=M.minScale<V?M.minScale:V,ca=M.maxScale>ca?M.maxScale:ca);return V&&ca?{min:V,max:ca}:null}}}function w(M,V){return n.equals(M.wkid?M:M.spatialReference||b.WGS84,V)?M:h.project(M,V)}function f(){f=l._asyncToGenerator(function*(M,V){if(!M||!V)return new k({targetGeometry:new m,scale:0,rotation:0});let ca=V.spatialReference;const {constraints:ha,
padding:ka,viewpoint:pa,size:za}=V,Da=[ka?za[0]-ka.left-ka.right:za[0],ka?za[1]-ka.top-ka.bottom:za[1]];let Ba=null;M instanceof k?Ba=M:M.viewpoint?Ba=M.viewpoint:M.target&&"esri.Viewpoint"===M.target.declaredClass&&(Ba=M.target);let Ga=null;if(Ba&&Ba.targetGeometry)Ga=Ba.targetGeometry;else if(M instanceof d)Ga=M;else if(M||M&&("center"in M||"extent"in M||"target"in M))Ga=(yield u(M.center,V,ca))||(yield u(M.extent,V,ca))||(yield u(M.target,V,ca))||(yield u(M,V,ca));!Ga&&pa&&pa.targetGeometry?Ga=
pa.targetGeometry:!Ga&&V.extent&&(Ga=V.extent);if(!ca){var Ka=V.spatialReference||V.extent||Ga;ca=Ka.wkid?Ka:Ka.spatialReference||b.WGS84}h.isLoaded()||n.equals(Ga.spatialReference,ca)||h.canProjectWithoutEngine(Ga,ca)||(yield h.load());Ka=w(Ga.center?Ga.center:Ga,ca);var Ea=null;Ba&&q.isSome(Ba.targetGeometry)&&"point"===Ba.targetGeometry.type?Ea=Ba.scale:"scale"in M&&M.scale?Ea=M.scale:"zoom"in M&&-1!==M.zoom&&ha&&ha.effectiveLODs?Ea=ha.zoomToScale(M.zoom):Array.isArray(Ga)||"point"===Ga.type||
"extent"===Ga.type&&0===Ga.width&&0===Ga.height?(Ea=w(V.extent,ca),Ea=q.isSome(Ea)?r(Ea,Da):V.extent?r(V.extent,Da):pa.scale):Ea=r(w(Ga.extent,ca),Da);if(V=I(M))V.min&&V.min>Ea?Ea=V.min:V.max&&V.max<Ea&&(Ea=V.max);V=0;Ba?V=Ba.rotation:M.hasOwnProperty("rotation")?V=M.rotation:pa&&(V=pa.rotation);M=new k({targetGeometry:Ka,scale:Ea,rotation:V});ha&&(M=ha.fit(M),ha.constrainByGeometry(M),ha.rotationEnabled||(M.rotation=V));return M});return f.apply(this,arguments)}function B(M,V){const ca=M.targetGeometry,
ha=V.targetGeometry;ca.x=ha.x;ca.y=ha.y;ca.spatialReference=ha.spatialReference;M.scale=V.scale;M.rotation=V.rotation;return M}function K(M,V,ca){return ca?z.set(M,.5*(V[0]-ca.right+ca.left),.5*(V[1]-ca.bottom+ca.top)):z.scale(M,V,.5)}function P(M,V,ca,ha){Q(M,V,ca,ha);return D.invert(M,M)}function T(M){var V=M.scale;M=M.targetGeometry;M=q.isSome(M)&&n.isValid(M.spatialReference)?1/(39.37*x.getMetersPerUnitForSR(M.spatialReference)*96):1;return V*M}function X(M){return n.isValid(M)?39.37*x.getMetersPerUnitForSR(M)*
96:1}function W(M){return M.isWrappable?(M=n.getInfo(M),M.valid[1]-M.valid[0]):0}const L=180/Math.PI,R=function(){const M=p.create();return function(V,ca,ha){const ka=ca.targetGeometry;t(M,ka);ca=.5*T(ca);V.xmin=M[0]-ca*ha[0];V.ymin=M[1]-ca*ha[1];V.xmax=M[0]+ca*ha[0];V.ymax=M[1]+ca*ha[1];V.spatialReference=ka.spatialReference;return V}}(),aa=function(){const M=p.create();return function(V,ca,ha){return z.sub(V,z.scale(V,ca,.5),K(M,ca,ha))}}(),H=function(){const M=F.create(),V=p.create();return function(ca,
ha,ka,pa){const za=T(ha);ha=y.toRadian(ha.rotation)||0;z.set(V,za,za);D.fromScaling(M,V);D.rotate(M,M,ha);D.translate(M,M,aa(V,ka,pa));D.translate(M,M,[0,pa.top-pa.bottom]);return z.set(ca,M[4],M[5])}}(),N=function(){const M=p.create(),V=p.create(),ca=p.create();return function(ha,ka,pa,za,Da,Ba){z.negate(M,ka);z.scale(V,pa,.5*Ba);z.set(ca,1/za*Ba,-1/za*Ba);D.fromTranslation(ha,V);Da&&D.rotate(ha,ha,Da);D.scale(ha,ha,ca);D.translate(ha,ha,M);return ha}}(),Q=function(){const M=p.create();return function(V,
ca,ha,ka){const pa=T(ca),za=y.toRadian(ca.rotation)||0;t(M,ca.targetGeometry);return N(V,M,ha,pa,za,ka)}}(),v=function(){const M=p.create();return function(V,ca,ha,ka){const pa=T(ca);t(M,ca.targetGeometry);return N(V,M,ha,pa,0,ka)}}(),E=function(){const M=p.create(),V=p.create(),ca=[0,0,0];return function(ha,ka,pa){z.subtract(M,ha,ka);z.normalize(M,M);z.subtract(V,ha,pa);z.normalize(V,V);z.cross(ca,M,V);ha=Math.acos(z.dot(M,V)/(z.length(M)*z.length(V)))*L;0>ca[2]&&(ha=-ha);isNaN(ha)&&(ha=0);return ha}}(),
G=function(){const M=p.create();return function(V,ca,ha,ka){const pa=V.targetGeometry;B(V,ca);H(M,ca,ha,ka);pa.x+=M[0];pa.y+=M[1];return V}}(),S=function(){return function(M,V,ca){B(M,V);V=M.targetGeometry;V.x=ca.x;V.y=ca.y;V.spatialReference=ca.spatialReference;return M}}(),da=function(){const M=p.create();return function(V,ca,ha,ka,pa){pa||(pa="center");z.sub(M,ha,ka);z.scale(M,M,.5);ha=M[0];ka=M[1];switch(pa){case "center":z.set(M,0,0);break;case "left":z.set(M,-ha,0);break;case "top":z.set(M,
0,ka);break;case "right":z.set(M,ha,0);break;case "bottom":z.set(M,0,-ka);break;case "top-left":z.set(M,-ha,ka);break;case "bottom-left":z.set(M,-ha,-ka);break;case "top-right":z.set(M,ha,ka);break;case "bottom-right":z.set(M,ha,-ka)}ta(V,ca,M);return V}}(),fa=function(){const M=p.create();return function(V,ca,ha,ka,pa){B(V,ca);isNaN(ha)||0===ha||(oa(M,ka,ca,pa),V.scale=ca.scale*ha,sa(M,M,V,pa),ta(V,V,z.set(M,M[0]-ka[0],ka[1]-M[1])));return V}}(),la=function(){const M=p.create();return function(V,
ca,ha,ka,pa,za){B(V,ca);isNaN(ha)||0===ha||(oa(M,pa,ca,za),V.scale=ca.scale*ha,V.rotation+=ka,sa(M,M,V,za),ta(V,V,z.set(M,M[0]-pa[0],pa[1]-M[1])));return V}}(),na=function(){const M=p.create(),V=p.create();return function(ca,ha,ka,pa,za,Da,Ba){aa(V,Da,Ba);z.add(M,za,V);return pa?la(ca,ha,ka,pa,M,Da):fa(ca,ha,ka,M,Da)}}(),oa=function(){const M=F.create();return function(V,ca,ha,ka){return z.transformMat2d(V,ca,P(M,ha,ka,1))}}(),sa=function(){const M=F.create();return function(V,ca,ha,ka){return z.transformMat2d(V,
ca,Q(M,ha,ka,1))}}(),ta=function(){const M=p.create(),V=F.create();return function(ca,ha,ka){B(ca,ha);const pa=T(ha),za=ca.targetGeometry;D.fromRotation(V,y.toRadian(ha.rotation)||0);D.scale(V,V,p.fromValues(pa,pa));z.transformMat2d(M,ka,V);za.x+=M[0];za.y+=M[1];return ca}}();e.addPadding=G;e.angleBetween=E;e.centerAt=S;e.copy=B;e.create=function(M,V){return f.apply(this,arguments)};e.extentToScale=r;e.getAnchor=K;e.getExtent=R;e.getMatrix=N;e.getPaddingMapTranslation=H;e.getPaddingScreenTranslation=
aa;e.getResolution=T;e.getResolutionToScaleFactor=X;e.getTransform=Q;e.getTransformNoRotation=v;e.getWorldScreenWidth=function(M,V){return Math.round(W(M)/V)};e.getWorldWidth=W;e.padAndScaleAndRotateBy=na;e.resize=da;e.rotateBy=function(M,V,ca){B(M,V);M.rotation+=ca;return M};e.rotateTo=function(M,V,ca){B(M,V);M.rotation=ca;return M};e.scaleAndRotateBy=la;e.scaleTo=function(M,V,ca){B(M,V);M.scale=ca;return M};e.setExtent=function(M,V,ca,ha,ka){S(M,V,ca.center);M.scale=r(ca,ha);ka&&ka.constraints&&
ka.constraints.constrain(M);return M};e.toMap=oa;e.toScreen=sa;e.translateBy=ta;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(e,l){function k(f,B){f[0]=B[0];f[1]=B[1];f[2]=B[2];f[3]=B[3];f[4]=B[4];f[5]=B[5];return f}function g(f){f[0]=1;f[1]=0;f[2]=0;f[3]=1;f[4]=0;f[5]=0;return f}function q(f,B,K,P,T,X,W){f[0]=B;f[1]=K;f[2]=P;f[3]=T;f[4]=X;f[5]=W;return f}function x(f,B){const K=B[0],P=B[1],T=B[2],X=B[3],W=B[4];B=B[5];let L=
K*X-P*T;if(!L)return null;L=1/L;f[0]=X*L;f[1]=-P*L;f[2]=-T*L;f[3]=K*L;f[4]=(T*B-X*W)*L;f[5]=(P*W-K*B)*L;return f}function y(f){return f[0]*f[3]-f[1]*f[2]}function D(f,B,K){const P=B[0],T=B[1],X=B[2],W=B[3],L=B[4];B=B[5];const R=K[0],aa=K[1],H=K[2],N=K[3],Q=K[4];K=K[5];f[0]=P*R+X*aa;f[1]=T*R+W*aa;f[2]=P*H+X*N;f[3]=T*H+W*N;f[4]=P*Q+X*K+L;f[5]=T*Q+W*K+B;return f}function F(f,B,K){const P=B[0],T=B[1],X=B[2],W=B[3],L=B[4];B=B[5];const R=Math.sin(K);K=Math.cos(K);f[0]=P*K+X*R;f[1]=T*K+W*R;f[2]=P*-R+X*K;
f[3]=T*-R+W*K;f[4]=L;f[5]=B;return f}function z(f,B,K){const P=B[1],T=B[2],X=B[3],W=B[4],L=B[5],R=K[0];K=K[1];f[0]=B[0]*R;f[1]=P*R;f[2]=T*K;f[3]=X*K;f[4]=W;f[5]=L;return f}function p(f,B,K){const P=B[0],T=B[1],X=B[2],W=B[3],L=B[4];B=B[5];const R=K[0];K=K[1];f[0]=P;f[1]=T;f[2]=X;f[3]=W;f[4]=P*R+X*K+L;f[5]=T*R+W*K+B;return f}function d(f,B){const K=Math.sin(B);B=Math.cos(B);f[0]=B;f[1]=K;f[2]=-K;f[3]=B;f[4]=0;f[5]=0;return f}function c(f,B){f[0]=B[0];f[1]=0;f[2]=0;f[3]=B[1];f[4]=0;f[5]=0;return f}function m(f,
B){f[0]=1;f[1]=0;f[2]=0;f[3]=1;f[4]=B[0];f[5]=B[1];return f}function h(f){return"mat2d("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+")"}function b(f){return Math.sqrt(f[0]**2+f[1]**2+f[2]**2+f[3]**2+f[4]**2+f[5]**2+1)}function n(f,B,K){f[0]=B[0]+K[0];f[1]=B[1]+K[1];f[2]=B[2]+K[2];f[3]=B[3]+K[3];f[4]=B[4]+K[4];f[5]=B[5]+K[5];return f}function t(f,B,K){f[0]=B[0]-K[0];f[1]=B[1]-K[1];f[2]=B[2]-K[2];f[3]=B[3]-K[3];f[4]=B[4]-K[4];f[5]=B[5]-K[5];return f}function r(f,B,K){f[0]=B[0]*K;f[1]=B[1]*
K;f[2]=B[2]*K;f[3]=B[3]*K;f[4]=B[4]*K;f[5]=B[5]*K;return f}function u(f,B,K,P){f[0]=B[0]+K[0]*P;f[1]=B[1]+K[1]*P;f[2]=B[2]+K[2]*P;f[3]=B[3]+K[3]*P;f[4]=B[4]+K[4]*P;f[5]=B[5]+K[5]*P;return f}function C(f,B){return f[0]===B[0]&&f[1]===B[1]&&f[2]===B[2]&&f[3]===B[3]&&f[4]===B[4]&&f[5]===B[5]}function I(f,B){const K=f[0],P=f[1],T=f[2],X=f[3],W=f[4];f=f[5];const L=B[0],R=B[1],aa=B[2],H=B[3],N=B[4];B=B[5];return Math.abs(K-L)<=l.EPSILON*Math.max(1,Math.abs(K),Math.abs(L))&&Math.abs(P-R)<=l.EPSILON*Math.max(1,
Math.abs(P),Math.abs(R))&&Math.abs(T-aa)<=l.EPSILON*Math.max(1,Math.abs(T),Math.abs(aa))&&Math.abs(X-H)<=l.EPSILON*Math.max(1,Math.abs(X),Math.abs(H))&&Math.abs(W-N)<=l.EPSILON*Math.max(1,Math.abs(W),Math.abs(N))&&Math.abs(f-B)<=l.EPSILON*Math.max(1,Math.abs(f),Math.abs(B))}const w=Object.freeze({__proto__:null,copy:k,identity:g,set:q,invert:x,determinant:y,multiply:D,rotate:F,scale:z,translate:p,fromRotation:d,fromScaling:c,fromTranslation:m,str:h,frob:b,add:n,subtract:t,multiplyScalar:r,multiplyScalarAndAdd:u,
exactEquals:C,equals:I,mul:D,sub:t});e.add=n;e.copy=k;e.determinant=y;e.equals=I;e.exactEquals=C;e.frob=b;e.fromRotation=d;e.fromScaling=c;e.fromTranslation=m;e.identity=g;e.invert=x;e.mat2d=w;e.mul=D;e.multiply=D;e.multiplyScalar=r;e.multiplyScalarAndAdd=u;e.rotate=F;e.scale=z;e.set=q;e.str=h;e.sub=t;e.subtract=t;e.translate=p})},"esri/chunks/mat2df64":function(){define(["exports"],function(e){function l(){return[1,0,0,1,0,0]}function k(y){return[y[0],y[1],y[2],y[3],y[4],y[5]]}function g(y,D,F,z,
p,d){return[y,D,F,z,p,d]}function q(y,D){return new Float64Array(y,D,6)}const x=Object.freeze({__proto__:null,create:l,clone:k,fromValues:g,createView:q});e.clone=k;e.create=l;e.createView=q;e.fromValues=g;e.mat2df64=x})},"esri/chunks/vec2":function(){define(["exports","./common"],function(e,l){function k(E,G){E[0]=G[0];E[1]=G[1];return E}function g(E,G,S){E[0]=G;E[1]=S;return E}function q(E,G,S){E[0]=G[0]+S[0];E[1]=G[1]+S[1];return E}function x(E,G,S){E[0]=G[0]-S[0];E[1]=G[1]-S[1];return E}function y(E,
G,S){E[0]=G[0]*S[0];E[1]=G[1]*S[1];return E}function D(E,G,S){E[0]=G[0]/S[0];E[1]=G[1]/S[1];return E}function F(E,G){E[0]=Math.ceil(G[0]);E[1]=Math.ceil(G[1]);return E}function z(E,G){E[0]=Math.floor(G[0]);E[1]=Math.floor(G[1]);return E}function p(E,G,S){E[0]=Math.min(G[0],S[0]);E[1]=Math.min(G[1],S[1]);return E}function d(E,G,S){E[0]=Math.max(G[0],S[0]);E[1]=Math.max(G[1],S[1]);return E}function c(E,G){E[0]=Math.round(G[0]);E[1]=Math.round(G[1]);return E}function m(E,G,S){E[0]=G[0]*S;E[1]=G[1]*S;
return E}function h(E,G,S,da){E[0]=G[0]+S[0]*da;E[1]=G[1]+S[1]*da;return E}function b(E,G){const S=G[0]-E[0];E=G[1]-E[1];return Math.sqrt(S*S+E*E)}function n(E,G){const S=G[0]-E[0];E=G[1]-E[1];return S*S+E*E}function t(E){const G=E[0];E=E[1];return Math.sqrt(G*G+E*E)}function r(E){const G=E[0];E=E[1];return G*G+E*E}function u(E,G){E[0]=-G[0];E[1]=-G[1];return E}function C(E,G){E[0]=1/G[0];E[1]=1/G[1];return E}function I(E,G){var S=G[0];const da=G[1];S=S*S+da*da;0<S&&(S=1/Math.sqrt(S),E[0]=G[0]*S,
E[1]=G[1]*S);return E}function w(E,G){return E[0]*G[0]+E[1]*G[1]}function f(E,G,S){G=G[0]*S[1]-G[1]*S[0];E[0]=E[1]=0;E[2]=G;return E}function B(E,G,S,da){const fa=G[0];G=G[1];E[0]=fa+da*(S[0]-fa);E[1]=G+da*(S[1]-G);return E}function K(E,G){G=G||1;const S=2*l.RANDOM()*Math.PI;E[0]=Math.cos(S)*G;E[1]=Math.sin(S)*G;return E}function P(E,G,S){const da=G[0];G=G[1];E[0]=S[0]*da+S[2]*G;E[1]=S[1]*da+S[3]*G;return E}function T(E,G,S){const da=G[0];G=G[1];E[0]=S[0]*da+S[2]*G+S[4];E[1]=S[1]*da+S[3]*G+S[5];return E}
function X(E,G,S){const da=G[0];G=G[1];E[0]=S[0]*da+S[3]*G+S[6];E[1]=S[1]*da+S[4]*G+S[7];return E}function W(E,G,S){const da=G[0];G=G[1];E[0]=S[0]*da+S[4]*G+S[12];E[1]=S[1]*da+S[5]*G+S[13];return E}function L(E,G,S,da){const fa=G[0]-S[0];G=G[1]-S[1];const la=Math.sin(da);da=Math.cos(da);E[0]=fa*da-G*la+S[0];E[1]=fa*la+G*da+S[1];return E}function R(E,G){var S=E[0];E=E[1];const da=G[0];G=G[1];let fa=S*S+E*E;0<fa&&(fa=1/Math.sqrt(fa));let la=da*da+G*G;0<la&&(la=1/Math.sqrt(la));S=(S*da+E*G)*fa*la;return 1<
S?0:-1>S?Math.PI:Math.acos(S)}function aa(E){return"vec2("+E[0]+", "+E[1]+")"}function H(E,G){return E[0]===G[0]&&E[1]===G[1]}function N(E,G){const S=E[0];E=E[1];const da=G[0];G=G[1];return Math.abs(S-da)<=l.EPSILON*Math.max(1,Math.abs(S),Math.abs(da))&&Math.abs(E-G)<=l.EPSILON*Math.max(1,Math.abs(E),Math.abs(G))}function Q(E,G,S,da,fa){let la=G[0]-S[0];S=G[1]-S[1];fa=(da[0]*la+da[1]*S)*(fa-1);la=da[0]*fa;S=da[1]*fa;E[0]=G[0]+la;E[1]=G[1]+S;return E}const v=Object.freeze({__proto__:null,copy:k,set:g,
add:q,subtract:x,multiply:y,divide:D,ceil:F,floor:z,min:p,max:d,round:c,scale:m,scaleAndAdd:h,distance:b,squaredDistance:n,length:t,squaredLength:r,negate:u,inverse:C,normalize:I,dot:w,cross:f,lerp:B,random:K,transformMat2:P,transformMat2d:T,transformMat3:X,transformMat4:W,rotate:L,angle:R,str:aa,exactEquals:H,equals:N,projectAndScale:Q,len:t,sub:x,mul:y,div:D,dist:b,sqrDist:n,sqrLen:r});e.add=q;e.angle=R;e.ceil=F;e.copy=k;e.cross=f;e.dist=b;e.distance=b;e.div=D;e.divide=D;e.dot=w;e.equals=N;e.exactEquals=
H;e.floor=z;e.inverse=C;e.len=t;e.length=t;e.lerp=B;e.max=d;e.min=p;e.mul=y;e.multiply=y;e.negate=u;e.normalize=I;e.projectAndScale=Q;e.random=K;e.rotate=L;e.round=c;e.scale=m;e.scaleAndAdd=h;e.set=g;e.sqrDist=n;e.sqrLen=r;e.squaredDistance=n;e.squaredLength=r;e.str=aa;e.sub=x;e.subtract=x;e.transformMat2=P;e.transformMat2d=T;e.transformMat3=X;e.transformMat4=W;e.vec2=v})},"esri/chunks/vec2f64":function(){define(["exports"],function(e){function l(){return[0,0]}function k(b){return[b[0],b[1]]}function g(b,
n){return[b,n]}function q(b){const n=[0,0],t=Math.min(2,b.length);for(let r=0;r<t;++r)n[r]=b[r];return n}function x(b,n){return new Float64Array(b,n,2)}function y(){return[0,0]}function D(){return[1,1]}function F(){return[1,0]}function z(){return[0,1]}const p=[0,0],d=[1,1],c=[1,0],m=[0,1],h=Object.freeze({__proto__:null,create:l,clone:k,fromValues:g,fromArray:q,createView:x,zeros:y,ones:D,unitX:F,unitY:z,ZEROS:p,ONES:d,UNIT_X:c,UNIT_Y:m});e.ONES=d;e.UNIT_X=c;e.UNIT_Y=m;e.ZEROS=p;e.clone=k;e.create=
l;e.createView=x;e.fromArray=q;e.fromValues=g;e.ones=D;e.unitX=F;e.unitY=z;e.vec2f64=h;e.zeros=y})},"esri/views/2d/FrameTask":function(){define(["../../core/maybe","../../core/scheduling"],function(e,l){return function(){function k(q){this.view=q;this._frameTaskHandle=null;this._updateRequested=!1;this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters.state=this.view.state;this._updateParameters.stationary=this.view.stationary;this._updateParameters.pixelRatio=window.devicePixelRatio;
this._updateParameters.renderingOptions=this.view.renderingOptions};this.update=()=>{this._updateRequested=!1;const {basemapView:x,graphicsView:y,labelManager:D,layerViews:F,state:{id:z}}=this.view;x.baseLayerViews.forEach(this._updateLayerView,this);F.forEach(this._updateLayerView,this);x.referenceLayerViews.forEach(this._updateLayerView,this);e.isSome(D)&&(D.lastUpdateId!==z&&(D.viewChange(),D.lastUpdateId=z),D.updateRequested&&D.processUpdate(this._updateParameters));e.isSome(y)&&(y.lastUpdateId!==
z&&(y.viewChange(),y.lastUpdateId=z),y.updateRequested&&y.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}var g=k.prototype;g.destroy=function(){this.stop()};g.start=function(){this._frameTaskHandle||(this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},
this._stationaryHandle=this.view.watch("stationary",q=>{this.stationary=q;this.requestFrame()}),this._frameTaskHandle=l.addFrameTask(this),this.requestUpdate())};g.stop=function(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};g.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};
g.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};g._updateLayerView=function(q){const x=this.view.state,y=q.lastUpdateId;if(null==y||!this.stationary&&!q.moving)q.moving=!0,q.moveStart();y!==x.id&&q.viewChange();this.stationary&&q.moving&&(q.moving=!1,q.moveEnd());q.lastUpdateId=x.id;q.updateRequested&&q.processUpdate(this._updateParameters);"layerViews"in q&&q.layerViews.forEach(this._updateLayerView,this)};return k}()})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require",
"exports","../../core/Error","../../core/maybe"],function(e,l,k,g){function q(){return Promise.all([new Promise((z,p)=>e(["./webglDeps"],z,p)),new Promise((z,p)=>e(["./mapViewDeps"],z,p))])}const x=z=>Object.freeze({__proto__:null,default:z}),y=()=>q().then(()=>new Promise((z,p)=>e(["./layers/TileLayerView2D"],d=>z(x(d)),p))),D=()=>q().then(()=>new Promise((z,p)=>e(["./layers/FeatureLayerView2D"],d=>z(x(d)),p))),F={"base-dynamic":()=>q().then(()=>new Promise((z,p)=>e(["./layers/BaseDynamicLayerView2D"],
d=>z(x(d)),p))),"base-tile":y,"bing-maps":y,csv:D,"geo-rss":()=>q().then(()=>new Promise((z,p)=>e(["./layers/GeoRSSLayerView2D"],d=>z(x(d)),p))),feature:D,geojson:D,graphics:()=>q().then(()=>new Promise((z,p)=>e(["./layers/GraphicsLayerView2D"],d=>z(x(d)),p))),group:()=>q().then(()=>new Promise((z,p)=>e(["./layers/GroupLayerView2D"],d=>z(x(d)),p))),imagery:()=>q().then(()=>new Promise((z,p)=>e(["./layers/ImageryLayerView2D"],d=>z(x(d)),p))),"imagery-tile":()=>q().then(()=>new Promise((z,p)=>e(["./layers/ImageryTileLayerView2D"],
d=>z(x(d)),p))),kml:()=>q().then(()=>new Promise((z,p)=>e(["./layers/KMLLayerView2D"],d=>z(x(d)),p))),"map-image":()=>q().then(()=>new Promise((z,p)=>e(["./layers/MapImageLayerView2D"],d=>z(x(d)),p))),"map-notes":()=>q().then(()=>new Promise((z,p)=>e(["./layers/MapNotesLayerView2D"],d=>z(x(d)),p))),"ogc-feature":()=>q().then(()=>new Promise((z,p)=>e(["./layers/OGCFeatureLayerView2D"],d=>z(x(d)),p))),"open-street-map":y,route:()=>q().then(()=>new Promise((z,p)=>e(["./layers/RouteLayerView2D"],d=>z(x(d)),
p))),stream:()=>q().then(()=>new Promise((z,p)=>e(["./layers/StreamLayerView2D"],d=>z(x(d)),p))),"subtype-group":()=>q().then(()=>new Promise((z,p)=>e(["./layers/SubtypeGroupLayerView2D"],d=>z(x(d)),p))),tile:y,"vector-tile":()=>q().then(()=>new Promise((z,p)=>e(["./layers/VectorTileLayerView2D"],d=>z(x(d)),p))),wcs:()=>q().then(()=>new Promise((z,p)=>e(["./layers/ImageryTileLayerView2D"],d=>z(x(d)),p))),"web-tile":y,wfs:D,wms:()=>q().then(()=>new Promise((z,p)=>e(["./layers/WMSLayerView2D"],d=>z(x(d)),
p))),wmts:()=>q().then(()=>new Promise((z,p)=>e(["./layers/WMTSLayerView2D"],d=>z(x(d)),p))),analysis:null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};l.layerView2DImporter={hasLayerViewModule:z=>g.isSome(F[z.type]),importLayerView:z=>{var p=F[z.type];if(!g.isSome(p))throw z=z.declaredClass?z.declaredClass.slice(z.declaredClass.lastIndexOf(".")+1):"Unknown",p=z.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),
z=new k(`${p}:view-not-supported`,`${z} is not supported in 2D`),z;return p(z)}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h){k={base:null,key:"type",typeMap:{extent:m,polygon:h}};g=function(b){function n(r){r=b.call(this,r)||this;r.lods=null;r.minScale=0;r.maxScale=0;r.minZoom=-1;r.maxZoom=-1;r.rotationEnabled=!0;r.snapToZoom=!0;return r}e._inheritsLoose(n,b);var t=n.prototype;t.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null);this._set("_geometry",null)};t.canZoomInTo=function(r){const u=this.effectiveMaxScale;return 0===u||r>=u};t.canZoomOutTo=
function(r){const u=this.effectiveMinScale;return 0===u||r<=u};t.constrain=function(r,u){this._zoom.constrain(r,u);this._rotation.constrain(r,u);this._geometry.constrain(r,u);return r};t.constrainByGeometry=function(r){return this._geometry.constrain(r)};t.fit=function(r){return this._zoom.fit(r)};t.zoomToScale=function(r){return this._zoom.zoomToScale(r)};t.scaleToZoom=function(r){return this._zoom.scaleToZoom(r)};t.snapScale=function(r){return this._zoom.snapToClosestScale(r)};t.snapToNextScale=
function(r){return this._zoom.snapToNextScale(r)};t.snapToPreviousScale=function(r){return this._zoom.snapToPreviousScale(r)};e._createClass(n,[{key:"geometry",set:function(r){r?this._set("geometry",r):this._set("geometry",null)}},{key:"version",get:function(){var r;this.commitProperty("_zoom");this.commitProperty("_rotation");this.commitProperty("_geometry");return(null!=(r=this._get("version"))?r:0)+1}},{key:"_defaultLODs",get:function(){var r,u,C;const I=null==(r=this.view)?void 0:null==(u=r.defaultsFromMap)?
void 0:u.tileInfo;r=null==(C=this.view)?void 0:C.spatialReference;return I&&r&&I.spatialReference.equals(r)?I.lods:null}},{key:"_geometry",get:function(){var r;return new p.GeometryConstraint({geometry:this.geometry,spatialReference:null==(r=this.view)?void 0:r.spatialReference})}},{key:"_rotation",get:function(){return new d({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){const r=this._get("_zoom"),u=this.lods||this._defaultLODs,C=this.minZoom,I=this.maxZoom,w=this.minScale,
f=this.maxScale,B=this.snapToZoom;return r&&r.lods===u&&r.minZoom===C&&r.maxZoom===I&&r.minScale===w&&r.maxScale===f&&r.snapToZoom===B?r:new c({lods:u,minZoom:C,maxZoom:I,minScale:w,maxScale:f,snapToZoom:B})}}]);return n}(g);l.__decorate([q.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],g.prototype,"effectiveLODs",void 0);l.__decorate([q.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],g.prototype,"effectiveMinScale",void 0);l.__decorate([q.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],
g.prototype,"effectiveMaxScale",void 0);l.__decorate([q.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],g.prototype,"effectiveMinZoom",void 0);l.__decorate([q.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],g.prototype,"effectiveMaxZoom",void 0);l.__decorate([q.property({types:k,value:null})],g.prototype,"geometry",null);l.__decorate([q.property({type:[z]})],g.prototype,"lods",void 0);l.__decorate([q.property()],g.prototype,"minScale",void 0);l.__decorate([q.property()],g.prototype,
"maxScale",void 0);l.__decorate([q.property()],g.prototype,"minZoom",void 0);l.__decorate([q.property()],g.prototype,"maxZoom",void 0);l.__decorate([q.property()],g.prototype,"rotationEnabled",void 0);l.__decorate([q.property()],g.prototype,"snapToZoom",void 0);l.__decorate([q.property()],g.prototype,"view",void 0);l.__decorate([q.property({readOnly:!0})],g.prototype,"version",null);l.__decorate([q.property()],g.prototype,"_defaultLODs",null);l.__decorate([q.property({type:p.GeometryConstraint})],
g.prototype,"_geometry",null);l.__decorate([q.property({type:d})],g.prototype,"_rotation",null);l.__decorate([q.property({readOnly:!0,type:c})],g.prototype,"_zoom",null);return g=l.__decorate([F.subclass("esri.views.2d.MapViewConstraints")],g)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m){var h;const b=q.getLogger("esri.views.MapView");e.GeometryConstraint=h=function(n){function t(u){u=n.call(this,u)||this;u.geometry=null;u.spatialReference=null;return u}l._inheritsLoose(t,n);var r=t.prototype;r.constrain=function(u,C){if(x.isNone(this.normalizedGeometry))return u;C=u.targetGeometry;if("extent"===this.normalizedGeometry.type?c.extentContainsPoint(this.normalizedGeometry,C):c.polygonContainsPoint(this.normalizedGeometry,C))return u;({coordinate:C}=
m.nearestCoordinate(this.normalizedGeometry,C));if(!C)return u;u.targetGeometry=C;return u};r.clone=function(){var u,C;return new h({geometry:null==(u=this.geometry)?void 0:u.clone(),spatialReference:null==(C=this.spatialReference)?void 0:C.clone()})};l._createClass(t,[{key:"normalizedGeometry",get:function(){if(x.isNone(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return d.project(this.geometry,this.spatialReference)}catch(u){return b.error("#constraints.geometry",
"could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:u}),null}return this.geometry}}]);return t}(g);k.__decorate([y.property({constructOnly:!0})],e.GeometryConstraint.prototype,"geometry",void 0);k.__decorate([y.property({readOnly:!0})],e.GeometryConstraint.prototype,"normalizedGeometry",null);k.__decorate([y.property({constructOnly:!0})],e.GeometryConstraint.prototype,"spatialReference",void 0);e.GeometryConstraint=
h=k.__decorate([p.subclass("esri.views.2d.constraints.GeometryConstraint")],e.GeometryConstraint);Object.defineProperty(e,"__esModule",{value:!0})})},"esri/geometry/support/near":function(){define(["exports","../../geometry","../../chunks/vec2","./coordsUtils","../Point"],function(e,l,k,g,q){e.nearestCoordinate=function(x,y){const {spatialReference:D}=y;y=[y.x,y.y];let F=Number.POSITIVE_INFINITY,z=0,p=0;const d=[0,0];x="extent"===x.type?[[[x.xmin,x.ymin],[x.xmin,x.ymax],[x.xmax,x.ymax],[x.xmax,x.ymin],
[x.xmin,x.ymin]]]:x.rings;for(const c of x)for(x=0;x<c.length-1;x++){g.projectPointOnLine(d,y,c,x);const m=k.distance(y,d);m<F&&(F=m,z=d[0],p=d[1])}return{coordinate:new q({x:z,y:p,spatialReference:D}),distance:F}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,k,g,q,x,y,D){var F;k=F=function(z){function p(){var c=z.apply(this,arguments)||this;c.enabled=!0;c.rotationEnabled=!0;return c}e._inheritsLoose(p,z);var d=p.prototype;d.constrain=function(c,m){if(!this.enabled||!m)return c;this.rotationEnabled||(c.rotation=m.rotation);return c};d.clone=function(){return new F({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return p}(k);l.__decorate([g.property()],k.prototype,"enabled",void 0);l.__decorate([g.property()],k.prototype,"rotationEnabled",
void 0);return k=F=l.__decorate([D.subclass("esri.views.2d.constraints.RotationConstraint")],k)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),function(e,l,k,g,q,x,y,D){var F;k=F=function(z){function p(c){c=
z.call(this,c)||this;c._lodByScale={};c._scales=[];c.effectiveLODs=null;c.effectiveMinZoom=-1;c.effectiveMaxZoom=-1;c.effectiveMinScale=0;c.effectiveMaxScale=0;c.lods=null;c.minZoom=-1;c.maxZoom=-1;c.minScale=0;c.maxScale=0;c.snapToZoom=!0;return c}e._inheritsLoose(p,z);var d=p.prototype;d.initialize=function(){let {lods:c,minScale:m,maxScale:h,minZoom:b,maxZoom:n}=this,t=-1,r=-1,u=!1,C=!1;0!==m&&0!==h&&m<h&&([m,h]=[h,m]);if(c&&c.length){c=c.map(w=>w.clone());c.sort((w,f)=>f.scale-w.scale);c.forEach((w,
f)=>w.level=f);for(const w of c){!u&&0<m&&m>=w.scale&&(t=w.level,u=!0);!C&&0<h&&h>=w.scale&&(r=I?I.level:-1,C=!0);var I=w}-1===b&&(b=0===m?0:t);-1===n&&(n=0===h?c.length-1:r);b=Math.max(b,0);b=Math.min(b,c.length-1);n=Math.max(n,0);n=Math.min(n,c.length-1);b>n&&([b,n]=[n,b]);m=c[b].scale;h=c[n].scale;c.splice(0,b);c.splice(n-b+1,c.length);c.forEach((w,f)=>{this._lodByScale[w.scale]=w;this._scales[f]=w.scale});this._set("effectiveLODs",c);this._set("effectiveMinZoom",b);this._set("effectiveMaxZoom",
n)}this._set("effectiveMinScale",m);this._set("effectiveMaxScale",h)};d.constrain=function(c,m){if(m&&c.scale===m.scale)return c;var h=this.effectiveMinScale;const b=this.effectiveMaxScale,n=c.targetGeometry,t=m&&m.targetGeometry,r=0!==h&&c.scale>h;if(0!==b&&c.scale<b||r)h=r?h:b,t&&(m=(h-m.scale)/(c.scale-m.scale),n.x=t.x+(n.x-t.x)*m,n.y=t.y+(n.y-t.y)*m),c.scale=h;this.snapToZoom&&this.effectiveLODs&&(c.scale=this._getClosestScale(c.scale));return c};d.fit=function(c){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(c,
null);const m=this.scaleToZoom(c.scale);c.scale=this.zoomToScale(.99<Math.abs(m-Math.floor(m))?Math.round(m):Math.floor(m));return c};d.zoomToScale=function(c){if(!this.effectiveLODs)return 0;c-=this.effectiveMinZoom;c=Math.max(0,c);const m=this._scales;if(0>=c)return m[0];if(c>=m.length)return m[m.length-1];const h=Math.round(c);return m[h]+(h-c)*(m[Math.round(c-.5)]-m[h])};d.scaleToZoom=function(c){if(!this.effectiveLODs)return-1;const m=this._scales;let h,b;if(c>=m[0])return this.effectiveMinZoom;
if(c<=m[m.length-1])return this.effectiveMaxZoom;for(let n=0;n<m.length-1;n++){h=m[n];b=m[n+1];if(b===c)return n+this.effectiveMinZoom+1;if(h>c&&b<c)return n+this.effectiveMinZoom+1-(c-b)/(h-b)}};d.snapToClosestScale=function(c){if(!this.effectiveLODs)return c;c=this.scaleToZoom(c);return this.zoomToScale(Math.round(c))};d.snapToNextScale=function(c,m=.5){if(!this.effectiveLODs)return c*m;c=Math.round(this.scaleToZoom(c));return this.zoomToScale(c+1)};d.snapToPreviousScale=function(c,m=2){if(!this.effectiveLODs)return c*
m;c=Math.round(this.scaleToZoom(c));return this.zoomToScale(c-1)};d.clone=function(){return new F({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};d._getClosestScale=function(c){if(this._lodByScale[c])return this._lodByScale[c].scale;c=this._scales.reduce((m,h)=>Math.abs(h-c)<=Math.abs(m-c)?h:m,this._scales[0]);return this._lodByScale[c].scale};return p}(k);l.__decorate([g.property({readOnly:!0})],k.prototype,"effectiveLODs",void 0);l.__decorate([g.property({readOnly:!0})],
k.prototype,"effectiveMinZoom",void 0);l.__decorate([g.property({readOnly:!0})],k.prototype,"effectiveMaxZoom",void 0);l.__decorate([g.property({readOnly:!0})],k.prototype,"effectiveMinScale",void 0);l.__decorate([g.property({readOnly:!0})],k.prototype,"effectiveMaxScale",void 0);l.__decorate([g.property()],k.prototype,"lods",void 0);l.__decorate([g.property()],k.prototype,"minZoom",void 0);l.__decorate([g.property()],k.prototype,"maxZoom",void 0);l.__decorate([g.property()],k.prototype,"minScale",
void 0);l.__decorate([g.property()],k.prototype,"maxScale",void 0);l.__decorate([g.property()],k.prototype,"snapToZoom",void 0);return k=F=l.__decorate([D.subclass("esri.views.2d.constraints.ZoomConstraint")],k)})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d){var c,m;let h=c=function(b){function n(){var t=b.apply(this,arguments)||this;t.left=0;t.top=0;t.right=0;t.bottom=0;return t}e._inheritsLoose(n,b);n.prototype.clone=function(){return new c({left:this.left,top:this.top,right:this.right,bottom:this.bottom})};return n}(k);l.__decorate([g.property()],h.prototype,"left",void 0);l.__decorate([g.property()],h.prototype,"top",void 0);l.__decorate([g.property()],h.prototype,"right",void 0);l.__decorate([g.property()],h.prototype,
"bottom",void 0);h=c=l.__decorate([D.subclass("esri.views.2d.PaddedViewState.Padding")],h);k=m=function(b){function n(...t){var r=b.call(this,...t)||this;r.paddedViewState=new d;r._updateContent=(()=>{const u=z.create();return()=>{var C=r._get("size");const I=r._get("padding");if(C&&I){var w=r.paddedViewState;F.set(u,I.left+I.right,I.top+I.bottom);F.subtract(u,C,u);F.copy(w.size,u);if(C=w.viewpoint)r.viewpoint=C}}})();r.watch(["size","padding"],r._updateContent,!0);r.padding=new h;r.size=[0,0];return r}
e._inheritsLoose(n,b);n.prototype.clone=function(){return new m({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})};e._createClass(n,[{key:"padding",set:function(t){this._set("padding",t||new h)}},{key:"viewpoint",set:function(t){if(t){const r=t.clone();this.paddedViewState.viewpoint=t;p.addPadding(r,t,this._get("size"),this._get("padding"));t=this._viewpoint2D;const u=r.targetGeometry;t.center[0]=u.x;t.center[1]=u.y;
t.rotation=r.rotation;t.scale=r.scale;t.spatialReference=u.spatialReference;this._update()}}}]);return n}(d);l.__decorate([g.property()],k.prototype,"paddedViewState",void 0);l.__decorate([g.property({type:h})],k.prototype,"padding",null);l.__decorate([g.property()],k.prototype,"viewpoint",null);return k=m=l.__decorate([D.subclass("esri.views.2d.PaddedViewState")],k)})},"esri/views/2d/ViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df32 ../../chunks/mat2df64 ../../chunks/mat3 ../../chunks/mat3f32 ../../chunks/vec2 ../../chunks/vec2f32 ../../chunks/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n,t,r,u,C,I,w){var f;const B=[0,0];k=f=function(K){function P(X){X=K.call(this,X)||this;X._viewpoint2D={center:r.create(),rotation:0,scale:0,spatialReference:null};X.center=[0,0];X.extent=new I;X.id=0;X.inverseTransform=m.create();X.resolution=0;X.rotation=0;X.scale=0;X.transform=m.create();X.transformNoRotation=m.create();X.displayMat3=b.create();X.displayViewMat3=b.create();X.viewMat3=b.create();X.viewMat2d=c.create();X.worldScreenWidth=0;X.size=[0,0];return X}
e._inheritsLoose(P,K);var T=P.prototype;T.copy=function(X){const W=this.size,L=this.viewpoint;L&&W?(this.viewpoint=C.copy(L,X.viewpoint),this._set("size",n.copy(W,X.size))):(this.viewpoint=X.viewpoint.clone(),this._set("size",[X.size[0],X.size[1]]));this._set("pixelRatio",X.pixelRatio);return this};T.clone=function(){return new f({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};T.toMap=function(X,W,L){if(u.isVec2(W))return n.transformMat2d(X,W,this.inverseTransform);
B[0]=W;B[1]=L;return n.transformMat2d(X,B,this.inverseTransform)};T.toScreen=function(X,W,L){if(u.isVec2(W))return n.transformMat2d(X,W,this.transform);B[0]=W;B[1]=L;return n.transformMat2d(X,B,this.transform)};T.toScreenNoRotation=function(X,W,L){if(u.isVec2(W))return n.transformMat2d(X,W,this.transformNoRotation);B[0]=W;B[1]=L;return n.transformMat2d(X,B,this.transformNoRotation)};T.getScreenTransform=function(X,W){const {center:L}=this._viewpoint2D,R=this._get("pixelRatio")||1,aa=this._get("size");
C.getMatrix(X,L,aa,W,0,R);return X};T._update=function(){const {center:X,spatialReference:W,scale:L,rotation:R}=this._viewpoint2D,aa=this._get("pixelRatio")||1,H=this._get("size"),N=new g({targetGeometry:new w(X[0],X[1],W),scale:L,rotation:R});this._set("viewpoint",N);if(H&&W&&L){this.resolution=C.getResolution(N);this.rotation=R;this.scale=L;this.spatialReference=W;n.copy(this.center,X);h.set(this.displayMat3,0!==H[0]?2/H[0]:0,0,0,0,0!==H[1]?-2/H[1]:0,0,-1,1,1);var Q=h.identity(this.viewMat3),v=
t.fromValues(H[0]/2,H[1]/2),E=t.fromValues(-H[0]/2,-H[1]/2),G=p.toRadian(R);h.translate(Q,Q,v);h.rotate(Q,Q,G);h.translate(Q,Q,E);h.multiply(this.displayViewMat3,this.displayMat3,Q);Q=d.fromTranslation(this.viewMat2d,v);d.rotate(Q,Q,G);d.translate(Q,Q,E);C.getExtent(this.extent,N,H);C.getTransform(this.transform,N,H,aa);d.invert(this.inverseTransform,this.transform);C.getTransformNoRotation(this.transformNoRotation,N,H,aa);this.worldScreenWidth=C.getWorldScreenWidth(this.spatialReference,this.resolution);
this._set("id",this.id+1);return this}};e._createClass(P,[{key:"pixelRatio",set:function(X){this._set("pixelRatio",X);this._update()}},{key:"size",set:function(X){this._set("size",X);this._update()}},{key:"viewpoint",set:function(X){if(X){const W=this._viewpoint2D,L=X.targetGeometry;W.center[0]=L.x;W.center[1]=L.y;W.rotation=X.rotation;W.scale=X.scale;W.spatialReference=L.spatialReference}this._update()}}]);return P}(q.JSONSupport);l.__decorate([x.property({readOnly:!0})],k.prototype,"id",void 0);
l.__decorate([x.property({value:1,json:{write:!0}})],k.prototype,"pixelRatio",null);l.__decorate([x.property({json:{write:!0}})],k.prototype,"size",null);l.__decorate([x.property()],k.prototype,"spatialReference",void 0);l.__decorate([x.property({type:g,json:{write:!0}})],k.prototype,"viewpoint",null);return k=f=l.__decorate([z.subclass("esri.views.2d.ViewState")],k)})},"esri/chunks/mat2df32":function(){define(["exports"],function(e){function l(){const F=new Float32Array(6);F[0]=1;F[3]=1;return F}
function k(F){const z=new Float32Array(6);z[0]=F[0];z[1]=F[1];z[2]=F[2];z[3]=F[3];z[4]=F[4];z[5]=F[5];return z}function g(F,z,p,d,c,m){const h=new Float32Array(6);h[0]=F;h[1]=z;h[2]=p;h[3]=d;h[4]=c;h[5]=m;return h}function q(F,z){return new Float32Array(F,z,6)}function x(F,z,p,d){const c=z[d];z=z[d+1];F[d]=p[0]*c+p[2]*z+p[4];F[d+1]=p[1]*c+p[3]*z+p[5]}function y(F,z,p,d=0,c=0,m=2){for(c=c||z.length/m;d<c;d++)x(F,z,p,d*m)}const D=Object.freeze({__proto__:null,create:l,clone:k,fromValues:g,createView:q,
transform:x,transformMany:y});e.clone=k;e.create=l;e.createView=q;e.fromValues=g;e.mat2df32=D;e.transform=x;e.transformMany=y})},"esri/chunks/mat3":function(){define(["exports","./common"],function(e,l){function k(H,N){H[0]=N[0];H[1]=N[1];H[2]=N[2];H[3]=N[4];H[4]=N[5];H[5]=N[6];H[6]=N[8];H[7]=N[9];H[8]=N[10];return H}function g(H,N){H[0]=N[0];H[1]=N[1];H[2]=N[2];H[3]=N[3];H[4]=N[4];H[5]=N[5];H[6]=N[6];H[7]=N[7];H[8]=N[8];return H}function q(H,N,Q,v,E,G,S,da,fa,la){H[0]=N;H[1]=Q;H[2]=v;H[3]=E;H[4]=
G;H[5]=S;H[6]=da;H[7]=fa;H[8]=la;return H}function x(H){H[0]=1;H[1]=0;H[2]=0;H[3]=0;H[4]=1;H[5]=0;H[6]=0;H[7]=0;H[8]=1;return H}function y(H,N){if(H===N){const Q=N[1],v=N[2],E=N[5];H[1]=N[3];H[2]=N[6];H[3]=Q;H[5]=N[7];H[6]=v;H[7]=E}else H[0]=N[0],H[1]=N[3],H[2]=N[6],H[3]=N[1],H[4]=N[4],H[5]=N[7],H[6]=N[2],H[7]=N[5],H[8]=N[8];return H}function D(H,N){const Q=N[0],v=N[1],E=N[2],G=N[3],S=N[4],da=N[5],fa=N[6],la=N[7];N=N[8];const na=N*S-da*la,oa=-N*G+da*fa,sa=la*G-S*fa;let ta=Q*na+v*oa+E*sa;if(!ta)return null;
ta=1/ta;H[0]=na*ta;H[1]=(-N*v+E*la)*ta;H[2]=(da*v-E*S)*ta;H[3]=oa*ta;H[4]=(N*Q-E*fa)*ta;H[5]=(-da*Q+E*G)*ta;H[6]=sa*ta;H[7]=(-la*Q+v*fa)*ta;H[8]=(S*Q-v*G)*ta;return H}function F(H,N){const Q=N[0],v=N[1],E=N[2],G=N[3],S=N[4],da=N[5],fa=N[6],la=N[7];N=N[8];H[0]=S*N-da*la;H[1]=E*la-v*N;H[2]=v*da-E*S;H[3]=da*fa-G*N;H[4]=Q*N-E*fa;H[5]=E*G-Q*da;H[6]=G*la-S*fa;H[7]=v*fa-Q*la;H[8]=Q*S-v*G;return H}function z(H){const N=H[3],Q=H[4],v=H[5],E=H[6],G=H[7],S=H[8];return H[0]*(S*Q-v*G)+H[1]*(-S*N+v*E)+H[2]*(G*
N-Q*E)}function p(H,N,Q){const v=N[0],E=N[1],G=N[2],S=N[3],da=N[4],fa=N[5],la=N[6],na=N[7];N=N[8];const oa=Q[0],sa=Q[1],ta=Q[2],M=Q[3],V=Q[4],ca=Q[5],ha=Q[6],ka=Q[7];Q=Q[8];H[0]=oa*v+sa*S+ta*la;H[1]=oa*E+sa*da+ta*na;H[2]=oa*G+sa*fa+ta*N;H[3]=M*v+V*S+ca*la;H[4]=M*E+V*da+ca*na;H[5]=M*G+V*fa+ca*N;H[6]=ha*v+ka*S+Q*la;H[7]=ha*E+ka*da+Q*na;H[8]=ha*G+ka*fa+Q*N;return H}function d(H,N,Q){const v=N[0],E=N[1],G=N[2],S=N[3],da=N[4],fa=N[5],la=N[6],na=N[7];N=N[8];const oa=Q[0];Q=Q[1];H[0]=v;H[1]=E;H[2]=G;H[3]=
S;H[4]=da;H[5]=fa;H[6]=oa*v+Q*S+la;H[7]=oa*E+Q*da+na;H[8]=oa*G+Q*fa+N;return H}function c(H,N,Q){const v=N[0],E=N[1],G=N[2],S=N[3],da=N[4],fa=N[5],la=N[6],na=N[7];N=N[8];const oa=Math.sin(Q);Q=Math.cos(Q);H[0]=Q*v+oa*S;H[1]=Q*E+oa*da;H[2]=Q*G+oa*fa;H[3]=Q*S-oa*v;H[4]=Q*da-oa*E;H[5]=Q*fa-oa*G;H[6]=la;H[7]=na;H[8]=N;return H}function m(H,N,Q){const v=Q[0],E=Q[1];Q=Q[2];H[0]=v*N[0];H[1]=v*N[1];H[2]=v*N[2];H[3]=E*N[3];H[4]=E*N[4];H[5]=E*N[5];H[6]=Q*N[6];H[7]=Q*N[7];H[8]=Q*N[8];return H}function h(H,N,
Q){const v=Q[0];Q=Q[1];H[0]=v*N[0];H[1]=v*N[1];H[2]=v*N[2];H[3]=Q*N[3];H[4]=Q*N[4];H[5]=Q*N[5];return H}function b(H,N){H[0]=1;H[1]=0;H[2]=0;H[3]=0;H[4]=1;H[5]=0;H[6]=N[0];H[7]=N[1];H[8]=1;return H}function n(H,N){const Q=Math.sin(N);N=Math.cos(N);H[0]=N;H[1]=Q;H[2]=0;H[3]=-Q;H[4]=N;H[5]=0;H[6]=0;H[7]=0;H[8]=1;return H}function t(H,N){H[0]=N[0];H[1]=0;H[2]=0;H[3]=0;H[4]=N[1];H[5]=0;H[6]=0;H[7]=0;H[8]=1;return H}function r(H,N){H[0]=N[0];H[1]=N[1];H[2]=0;H[3]=N[2];H[4]=N[3];H[5]=0;H[6]=N[4];H[7]=N[5];
H[8]=1;return H}function u(H,N){var Q=N[0],v=N[1],E=N[2];N=N[3];var G=Q+Q,S=v+v;const da=E+E;Q*=G;const fa=v*G;v*=S;const la=E*G,na=E*S;E*=da;G*=N;S*=N;N*=da;H[0]=1-v-E;H[3]=fa-N;H[6]=la+S;H[1]=fa+N;H[4]=1-Q-E;H[7]=na-G;H[2]=la-S;H[5]=na+G;H[8]=1-Q-v;return H}function C(H,N){const Q=N[0],v=N[1],E=N[2],G=N[4],S=N[5],da=N[6],fa=N[8],la=N[9];N=N[10];const na=N*S-da*la,oa=-N*G+da*fa,sa=la*G-S*fa;var ta=Q*na+v*oa+E*sa;if(!ta)return null;ta=1/ta;H[0]=na*ta;H[1]=(-N*v+E*la)*ta;H[2]=(da*v-E*S)*ta;H[3]=oa*
ta;H[4]=(N*Q-E*fa)*ta;H[5]=(-da*Q+E*G)*ta;H[6]=sa*ta;H[7]=(-la*Q+v*fa)*ta;H[8]=(S*Q-v*G)*ta;return H}function I(H,N){const Q=N[0],v=N[1],E=N[2],G=N[3],S=N[4],da=N[5],fa=N[6],la=N[7];var na=N[8],oa=N[9],sa=N[10],ta=N[11];const M=N[12],V=N[13],ca=N[14];N=N[15];const ha=Q*da-v*S,ka=Q*fa-E*S,pa=Q*la-G*S,za=v*fa-E*da,Da=v*la-G*da,Ba=E*la-G*fa,Ga=na*V-oa*M,Ka=na*ca-sa*M;na=na*N-ta*M;const Ea=oa*ca-sa*V;oa=oa*N-ta*V;sa=sa*N-ta*ca;ta=ha*sa-ka*oa+pa*Ea+za*na-Da*Ka+Ba*Ga;if(!ta)return null;ta=1/ta;H[0]=(da*
sa-fa*oa+la*Ea)*ta;H[1]=(fa*na-S*sa-la*Ka)*ta;H[2]=(S*oa-da*na+la*Ga)*ta;H[3]=(E*oa-v*sa-G*Ea)*ta;H[4]=(Q*sa-E*na+G*Ka)*ta;H[5]=(v*na-Q*oa-G*Ga)*ta;H[6]=(V*Ba-ca*Da+N*za)*ta;H[7]=(ca*pa-M*Ba-N*ka)*ta;H[8]=(M*Da-V*pa+N*ha)*ta;return H}function w(H,N,Q){H[0]=2/N;H[1]=0;H[2]=0;H[3]=0;H[4]=-2/Q;H[5]=0;H[6]=-1;H[7]=1;H[8]=1;return H}function f(H){return"mat3("+H[0]+", "+H[1]+", "+H[2]+", "+H[3]+", "+H[4]+", "+H[5]+", "+H[6]+", "+H[7]+", "+H[8]+")"}function B(H){return Math.sqrt(H[0]**2+H[1]**2+H[2]**2+
H[3]**2+H[4]**2+H[5]**2+H[6]**2+H[7]**2+H[8]**2)}function K(H,N,Q){H[0]=N[0]+Q[0];H[1]=N[1]+Q[1];H[2]=N[2]+Q[2];H[3]=N[3]+Q[3];H[4]=N[4]+Q[4];H[5]=N[5]+Q[5];H[6]=N[6]+Q[6];H[7]=N[7]+Q[7];H[8]=N[8]+Q[8];return H}function P(H,N,Q){H[0]=N[0]-Q[0];H[1]=N[1]-Q[1];H[2]=N[2]-Q[2];H[3]=N[3]-Q[3];H[4]=N[4]-Q[4];H[5]=N[5]-Q[5];H[6]=N[6]-Q[6];H[7]=N[7]-Q[7];H[8]=N[8]-Q[8];return H}function T(H,N,Q){H[0]=N[0]*Q;H[1]=N[1]*Q;H[2]=N[2]*Q;H[3]=N[3]*Q;H[4]=N[4]*Q;H[5]=N[5]*Q;H[6]=N[6]*Q;H[7]=N[7]*Q;H[8]=N[8]*Q;return H}
function X(H,N,Q,v){H[0]=N[0]+Q[0]*v;H[1]=N[1]+Q[1]*v;H[2]=N[2]+Q[2]*v;H[3]=N[3]+Q[3]*v;H[4]=N[4]+Q[4]*v;H[5]=N[5]+Q[5]*v;H[6]=N[6]+Q[6]*v;H[7]=N[7]+Q[7]*v;H[8]=N[8]+Q[8]*v;return H}function W(H,N){return H[0]===N[0]&&H[1]===N[1]&&H[2]===N[2]&&H[3]===N[3]&&H[4]===N[4]&&H[5]===N[5]&&H[6]===N[6]&&H[7]===N[7]&&H[8]===N[8]}function L(H,N){const Q=H[0],v=H[1],E=H[2],G=H[3],S=H[4],da=H[5],fa=H[6],la=H[7];H=H[8];const na=N[0],oa=N[1],sa=N[2],ta=N[3],M=N[4],V=N[5],ca=N[6],ha=N[7];N=N[8];return Math.abs(Q-
na)<=l.EPSILON*Math.max(1,Math.abs(Q),Math.abs(na))&&Math.abs(v-oa)<=l.EPSILON*Math.max(1,Math.abs(v),Math.abs(oa))&&Math.abs(E-sa)<=l.EPSILON*Math.max(1,Math.abs(E),Math.abs(sa))&&Math.abs(G-ta)<=l.EPSILON*Math.max(1,Math.abs(G),Math.abs(ta))&&Math.abs(S-M)<=l.EPSILON*Math.max(1,Math.abs(S),Math.abs(M))&&Math.abs(da-V)<=l.EPSILON*Math.max(1,Math.abs(da),Math.abs(V))&&Math.abs(fa-ca)<=l.EPSILON*Math.max(1,Math.abs(fa),Math.abs(ca))&&Math.abs(la-ha)<=l.EPSILON*Math.max(1,Math.abs(la),Math.abs(ha))&&
Math.abs(H-N)<=l.EPSILON*Math.max(1,Math.abs(H),Math.abs(N))}function R(H){const N=l.EPSILON,Q=H[0],v=H[1],E=H[2],G=H[3],S=H[4],da=H[5],fa=H[6],la=H[7];H=H[8];return Math.abs(1-(Q*Q+G*G+fa*fa))<=N&&Math.abs(1-(v*v+S*S+la*la))<=N&&Math.abs(1-(E*E+da*da+H*H))<=N}const aa=Object.freeze({__proto__:null,fromMat4:k,copy:g,set:q,identity:x,transpose:y,invert:D,adjoint:F,determinant:z,multiply:p,translate:d,rotate:c,scale:m,scaleByVec2:h,fromTranslation:b,fromRotation:n,fromScaling:t,fromMat2d:r,fromQuat:u,
normalFromMat4Legacy:C,normalFromMat4:I,projection:w,str:f,frob:B,add:K,subtract:P,multiplyScalar:T,multiplyScalarAndAdd:X,exactEquals:W,equals:L,isOrthoNormal:R,mul:p,sub:P});e.add=K;e.adjoint=F;e.copy=g;e.determinant=z;e.equals=L;e.exactEquals=W;e.frob=B;e.fromMat2d=r;e.fromMat4=k;e.fromQuat=u;e.fromRotation=n;e.fromScaling=t;e.fromTranslation=b;e.identity=x;e.invert=D;e.isOrthoNormal=R;e.mat3=aa;e.mul=p;e.multiply=p;e.multiplyScalar=T;e.multiplyScalarAndAdd=X;e.normalFromMat4=I;e.normalFromMat4Legacy=
C;e.projection=w;e.rotate=c;e.scale=m;e.scaleByVec2=h;e.set=q;e.str=f;e.sub=P;e.subtract=P;e.translate=d;e.transpose=y})},"esri/chunks/mat3f32":function(){define(["exports"],function(e){function l(){const y=new Float32Array(9);y[0]=1;y[4]=1;y[8]=1;return y}function k(y){const D=new Float32Array(9);D[0]=y[0];D[1]=y[1];D[2]=y[2];D[3]=y[3];D[4]=y[4];D[5]=y[5];D[6]=y[6];D[7]=y[7];D[8]=y[8];return D}function g(y,D,F,z,p,d,c,m,h){const b=new Float32Array(9);b[0]=y;b[1]=D;b[2]=F;b[3]=z;b[4]=p;b[5]=d;b[6]=
c;b[7]=m;b[8]=h;return b}function q(y,D){return new Float32Array(y,D,9)}const x=Object.freeze({__proto__:null,create:l,clone:k,fromValues:g,createView:q});e.clone=k;e.create=l;e.createView=q;e.fromValues=g;e.mat3f32=x})},"esri/chunks/vec2f32":function(){define(["exports"],function(e){function l(){return new Float32Array(2)}function k(h){const b=new Float32Array(2);b[0]=h[0];b[1]=h[1];return b}function g(h,b){const n=new Float32Array(2);n[0]=h;n[1]=b;return n}function q(h,b){return new Float32Array(h,
b,2)}function x(){return l()}function y(){return g(1,1)}function D(){return g(1,0)}function F(){return g(0,1)}const z=l(),p=y(),d=D(),c=F(),m=Object.freeze({__proto__:null,create:l,clone:k,fromValues:g,createView:q,zeros:x,ones:y,unitX:D,unitY:F,ZEROS:z,ONES:p,UNIT_X:d,UNIT_Y:c});e.ONES=p;e.UNIT_X=d;e.UNIT_Y=c;e.ZEROS=z;e.clone=k;e.create=l;e.createView=q;e.fromValues=g;e.ones=y;e.unitX=D;e.unitY=F;e.vec2f32=m;e.zeros=x})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(e){function l(g){return g instanceof
Float32Array&&2<=g.length}function k(g){return Array.isArray(g)&&2<=g.length}e.isVec2=function(g){return l(g)||k(g)};e.isVec2f32=l;e.isVec2f64=k;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(e,l,k,g,q,x,y,D,F,z){function p(b,n){b.length=0;n.forEach(t=>b.push(t));return b}const d=new Set,c=[],m=new Map,h=[0,0];k=function(b){function n(r){r=b.call(this,r)||this;r._keyToItem=new Map;r.concurrency=6;r.strategy="scale-first";r.tileInfoView=null;return r}e._inheritsLoose(n,b);var t=n.prototype;t.initialize=function(){const {concurrency:r,process:u}=this;this._queue=new z.QueueProcessor({concurrency:r,process:(C,I)=>{C=this._keyToItem.get(C);return u(C,{signal:I})},peeker:C=>C.values().next().value})};
t.destroy=function(){this.clear();this._queue.destroy();this._queue=null};t.abort=function(r){this._queue.abort("string"===typeof r?r:r.id)};t.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};t.has=function(r){return"string"===typeof r?this._keyToItem.has(r):this._keyToItem.has(r.id)};t.isOngoing=function(r){r="string"===typeof r?r:r.id;return this.has(r)&&this._queue.isOngoing(r)};t.pause=function(){this._queue.pause()};t.push=function(r,u){const C=r.key.id+
"-"+u;if(this.has(C))return this.get(C);u=this._queue.push(C);const I=()=>{this._keyToItem.delete(C);this.notifyChange("updating")};this._keyToItem.set(C,r);u.then(I,I);this.notifyChange("updating");return u};t.reset=function(){this._queue.reset();this.notifyChange("updating")};t.resume=function(){this._queue.resume()};t._peekByScaleFirst=function(r){if(!this.state)return r.values().next().value;const u=this.tileInfoView;let C=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;r.forEach(P=>{P=this._keyToItem.get(P);
const T=this.tileInfoView.getTileScale(P.key);m.has(T)||(m.set(T,[]),C=Math.max(T,C),I=Math.min(T,I));m.get(T).push(P.key);d.add(T)});let w=this.state.scale;m.has(w)||(p(c,d),c.sort((P,T)=>P-T),w=c.reduce((P,T)=>Math.abs(T-w)<Math.abs(P-w)?T:P,c[0]));w=Math.min(w,C);w=Math.max(w,I);r=m.get(w);const f=u.getClosestInfoForScale(w),B=f.getColumnForX(this.state.center[0]),K=f.getRowForY(this.state.center[1]);r.sort((P,T)=>{const X=f.denormalizeCol(P.col,P.world),W=f.denormalizeCol(T.col,T.world);return Math.sqrt((B-
X)*(B-X)+(K-P.row)*(K-P.row))-Math.sqrt((B-W)*(B-W)+(K-T.row)*(K-T.row))});d.clear();m.clear();return r[0].id};t._peekByCenterFirst=function(r){if(!this.state)return r.values().next().value;const u=this.tileInfoView,C=this.state.center;let I=Number.POSITIVE_INFINITY,w=null;r.forEach(f=>{f=this._keyToItem.get(f);u.getTileCoords(h,f.key);const B=F.distance(h,C);B<I&&(I=B,w=f.key)});return w.id};e._createClass(n,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",
get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return n}(k);l.__decorate([g.property({constructOnly:!0})],k.prototype,"concurrency",void 0);l.__decorate([g.property({constructOnly:!0})],k.prototype,"process",void 0);l.__decorate([g.property()],k.prototype,"state",void 0);l.__decorate([g.property({constructOnly:!0})],k.prototype,"strategy",void 0);l.__decorate([g.property({constructOnly:!0})],k.prototype,"tileInfoView",void 0);
l.__decorate([g.property({readOnly:!0})],k.prototype,"updating",null);return k=l.__decorate([D.subclass("esri.views.2d.tiling.PagedTileQueue")],k)})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(e,l,k,g,q,x){let y=function(F,z){this.item=F;this.controller=z;this.promise=null},D=function(){function F(p){this._deferreds=new Map;this._controllers=
new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;p.concurrency&&(this.concurrency=p.concurrency);this._queue=new q(p.peeker);this.process=p.process;const d=p.scheduler;p.priority&&k.isSome(d)&&(this._task=d.registerTask(p.priority,this))}var z=F.prototype;z.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};z.abort=function(p){(p=this._controllers.get(p))&&
p.abort()};z.clear=function(){this._queue.clear();const p=[];this._controllers.forEach(d=>p.push(d));this._controllers.clear();p.forEach(d=>d.abort());this._processingItems.clear();this._cancelNext()};z.forEach=function(p){this._deferreds.forEach((d,c)=>p(c))};z.get=function(p){return(p=this._deferreds.get(p))?p.promise:void 0};z.isOngoing=function(p){return this._processingItems.has(p)};z.has=function(p){return this._deferreds.has(p)};z.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};
z.push=function(p,d){const c=this.get(p);if(c)return c;const m=new AbortController;let h=null;d&&(h=g.onAbort(d,()=>m.abort()));const b=()=>{n.remove();k.isSome(h)&&h.remove();this._deferreds.delete(p);this._controllers.delete(p);this._queue.remove(p);this._processingItems.delete(p);this._scheduleNext()},n=g.onAbortOrThrow(m.signal,()=>{const r=this._processingItems.get(p);r&&r.controller.abort();b();t.reject(g.createAbortError())}),t=g.createDeferred();this._deferreds.set(p,t);this._controllers.set(p,
m);t.promise.then(b,b);this._queue.push(p);this._scheduleNext();return t.promise};z.last=function(){return this._queue.last()};z.peek=function(){return this._queue.peek()};z.popLast=function(){return this._queue.popLast()};z.reset=function(){const p=[];this._processingItems.forEach(d=>p.push(d));this._processingItems.clear();for(const d of p)this._queue.push(d.item),d.controller.abort();this._scheduleNext()};z.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};z.takeAll=function(){const p=
[];for(;this._queue.length;)p.push(this._queue.pop());this.clear();return p};z.runTask=function(p){for(;!p.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),p.madeProgress()};z._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=x.schedule(()=>{this._schedule=null;this._next()}))};z._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};z._cancelNext=
function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};z._processResult=function(p,d){this._canProcessFulfillment(p)&&(this._scheduleNext(),this._deferreds.get(p.item).resolve(d))};z._processError=function(p,d){this._canProcessFulfillment(p)&&(this._scheduleNext(),this._deferreds.get(p.item).reject(d))};z._canProcessFulfillment=function(p){return this._deferreds.get(p.item)&&this._processingItems.get(p.item)===p?!0:!1};z._process=function(p){if(!k.isNone(p)){var d=new AbortController,
c=new y(p,d);this._processingItems.set(p,c);try{var m=this.process(p,d.signal)}catch(h){this._processError(c,h)}g.isPromiseLike(m)?(c.promise=m,m.then(h=>this._processResult(c,h),h=>this._processError(c,h))):this._processResult(c,m)}};l._createClass(F,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"running",get:function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency}},{key:"test",get:function(){return{update:p=>
this.runTask(p)}}}]);return F}();e.QueueProcessor=D;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(e,l,k,g,q,x){const y=new q("0/0/0/0");let D=function(){function z(d,c,m,h,b,n,t,r){this.x=d;this.ymin=c;this.ymax=m;this.invM=h;this.leftAdjust=b;this.rightAdjust=n;this.leftBound=t;this.rightBound=
r}z.create=function(d,c){d[1]>c[1]&&([d,c]=[c,d]);const [m,h]=d,[b,n]=c;d=b-m;c=n-h;c=0!==c?d/c:0;const t=(Math.ceil(h)-h)*c,r=(Math.floor(h)-h)*c;return new z(m,Math.floor(h),Math.ceil(n),c,0>d?t:r,0>d?r:t,0>d?b:m,0>d?m:b)};var p=z.prototype;p.incrRow=function(){this.x+=this.invM};p.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};p.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return z}();const F=[[0,0],[0,0],[0,0],[0,0]];return function(){function z(d,
c=null){this.tileInfo=d;this.fullExtent=c;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};const m=d.lods.slice();m.sort(function(b,n){return n.scale-b.scale});const h=this._lodInfos=m.map(b=>k.create(d,b,c));m.forEach((b,n)=>{this._infoByLevel[b.level]=h[n];this._infoByScale[b.scale]=h[n];this.scales[n]=b.scale},this);this._wrap=d.isWrappable}var p=z.prototype;p.getLODInfoAt=function(d){return this._infoByLevel["number"===typeof d?d:d.level]};p.getTileBounds=function(d,
c,m=!1){y.set(c);return(c=this._infoByLevel[y.level])?c.getTileBounds(d,y,m):d};p.getTileCoords=function(d,c,m=!1){y.set(c);return(c=this._infoByLevel[y.level])?c.getTileCoords(d,y,m):d};p.getTileCoverage=function(d,c=192,m="closest"){m="closest"===m?this.getClosestInfoForScale(d.scale):this.getSmallestInfoForScale(d.scale);const h=g.pool.acquire(m),b=this._wrap;var n=Infinity;let t=-Infinity;const r=h.spans;F[0][0]=F[0][1]=F[1][1]=F[3][0]=-c;F[1][0]=F[2][0]=d.size[0]+c;F[2][1]=F[3][1]=d.size[1]+
c;for(u of F)d.toMap(u,u),u[0]=m.getColumnForX(u[0]),u[1]=m.getRowForY(u[1]);d=[];var u=3;for(c=0;4>c;c++)F[c][1]===F[u][1]?u=c:(u=D.create(F[c],F[u]),n=Math.min(u.ymin,n),t=Math.max(u.ymax,t),void 0===d[u.ymin]&&(d[u.ymin]=[]),d[u.ymin].push(u),u=c);if(null==n||null==t||100<t-n)return null;for(c=[];n<t;){null!=d[n]&&(c=c.concat(d[n]));u=Infinity;var C=-Infinity;for(var I=c.length-1;0<=I;I--){var w=c[I];u=Math.min(u,w.getLeftCol());C=Math.max(C,w.getRightCol())}u=Math.floor(u);C=Math.floor(C);if(n>=
m.first[1]&&n<=m.last[1])if(b)if(m.size[0]<m.worldSize[0])for(I=Math.floor(C/m.worldSize[0]),w=Math.floor(u/m.worldSize[0]);w<=I;w++)r.push(new x(n,Math.max(m.getFirstColumnForWorld(w),u),Math.min(m.getLastColumnForWorld(w),C)));else r.push(new x(n,u,C));else u>m.last[0]||C<m.first[0]||(u=Math.max(u,m.first[0]),C=Math.min(C,m.last[0]),r.push(new x(n,u,C)));n+=1;for(u=c.length-1;0<=u;u--)C=c[u],C.ymax>=n?C.incrRow():c.splice(u,1)}return h};p.getTileParentId=function(d){y.set(d);d=this._lodInfos.indexOf(this._infoByLevel[y.level])-
1;if(0>d)return null;this._getTileIdAtLOD(y,this._lodInfos[d],y);return y.id};p.getTileResolution=function(d){return(d=this._infoByLevel["object"===typeof d?d.level:d])?d.resolution:-1};p.getTileScale=function(d){return(d=this._infoByLevel[d.level])?d.scale:-1};p.intersects=function(d,c){y.set(c);c=this._infoByLevel[y.level];const m=d.lodInfo;if(m.resolution>c.resolution){this._getTileIdAtLOD(y,m,y);var h=m.denormalizeCol(y.col,y.world);for(var b of d.spans)if(b.row===y.row&&b.colFrom<=h&&b.colTo>=
h)return!0}if(m.resolution<c.resolution){const [t,r,u,C]=d.spans.reduce((I,w)=>{I[0]=Math.min(I[0],w.row);I[1]=Math.max(I[1],w.row);I[2]=Math.min(I[2],w.colFrom);I[3]=Math.max(I[3],w.colTo);return I},[Infinity,-Infinity,Infinity,-Infinity]);h=c.denormalizeCol(y.col,y.world);d=m.getColumnForX(c.getXForColumn(h));b=m.getRowForY(c.getYForRow(y.row));h=m.getColumnForX(c.getXForColumn(h+1))-1;c=m.getRowForY(c.getYForRow(y.row+1))-1;return!(d>C||h<u||b>r||c<t)}const n=m.denormalizeCol(y.col,y.world);return d.spans.some(t=>
t.row===y.row&&t.colFrom<=n&&t.colTo>=n)};p.normalizeBounds=function(d,c,m){d[0]=c[0];d[1]=c[1];d[2]=c[2];d[3]=c[3];this._wrap&&(c=l.getInfo(this.tileInfo.spatialReference),m=-m*(c.valid[1]-c.valid[0]),d[0]+=m,d[2]+=m);return d};p.getSmallestInfoForScale=function(d){const c=this.scales;if(this._infoByScale[d])return this._infoByScale[d];if(d>c[0])return this._infoByScale[c[0]];for(let m=1;m<c.length-1;m++)if(d>c[m]+1E-6)return this._infoByScale[c[m-1]];return this._infoByScale[c[c.length-1]]};p.getClosestInfoForScale=
function(d){const c=this.scales;if(this._infoByScale[d])return this._infoByScale[d];d=c.reduce((m,h)=>Math.abs(h-d)<Math.abs(m-d)?h:m,c[0]);return this._infoByScale[d]};p.scaleToLevel=function(d){const c=this.scales;if(this._infoByScale[d])return this._infoByScale[d].level;for(let m=c.length-1;0<=m;m--)if(d<c[m])return m===c.length-1?this._infoByScale[c[c.length-1]].level:this._infoByScale[c[m]].level+(c[m]-d)/(c[m]-c[m+1]);return this._infoByScale[c[0]].level};p.scaleToZoom=function(d){return this.tileInfo.scaleToZoom(d)};
p._getTileIdAtLOD=function(d,c,m){const h=this._infoByLevel[m.level];d.set(m);if(c.resolution<h.resolution)return null;if(c.resolution===h.resolution)return d;d.level=c.level;d.col=Math.floor(m.col*h.resolution/c.resolution+.01);d.row=Math.floor(m.row*h.resolution/c.resolution+.01);return d};e._createClass(z,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return z}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../core/maybe","../../../geometry/support/spatialReferenceUtils",
"./TileKey"],function(e,l,k){function g(x,y,D){x[0]=y;x[1]=D;return x}const q=new k("0/0/0/0");return function(){function x(D,F,z,p,d,c,m,h,b,n,t,r){this.level=D;this.resolution=F;this.scale=z;this.origin=p;this.first=d;this.last=c;this.size=m;this.norm=h;this.worldStart=b;this.worldEnd=n;this.worldSize=t;this.wrap=r}x.create=function(D,F,z=null){var p=l.getInfo(D.spatialReference);const d=F.origin||[D.origin.x,D.origin.y],c=[D.size[0]*F.resolution,D.size[1]*F.resolution],m=[-Infinity,-Infinity],
h=[Infinity,Infinity],b=[Infinity,Infinity];e.isSome(z)&&(g(m,Math.max(0,Math.floor((z.xmin-d[0])/c[0])),Math.max(0,Math.floor((d[1]-z.ymax)/c[1]))),g(h,Math.max(0,Math.floor((z.xmax-d[0])/c[0])),Math.max(0,Math.floor((d[1]-z.ymin)/c[1]))),g(b,h[0]-m[0]+1,h[1]-m[1]+1));const {cols:n,rows:t}=F;!z&&n&&t&&(g(m,n[0],t[0]),g(h,n[1],t[1]),g(b,n[1]-n[0]+1,t[1]-t[0]+1));let r;D.isWrappable?(D=[Math.ceil(Math.round((p.valid[1]-p.valid[0])/F.resolution)/D.size[0]),b[1]],p=[Math.floor((p.origin[0]-d[0])/c[0]),
m[1]],z=[D[0]+p[0]-1,h[1]],r=!0):(p=m,z=h,D=b,r=!1);return new x(F.level,F.resolution,F.scale,d,m,h,b,c,p,z,D,r)};var y=x.prototype;y.normalizeCol=function(D){if(!this.wrap)return D;const F=this.worldSize[0];return 0>D?F-1-Math.abs((D+1)%F):D%F};y.denormalizeCol=function(D,F){return this.wrap?this.worldSize[0]*F+D:D};y.getWorldForColumn=function(D){return this.wrap?Math.floor(D/this.worldSize[0]):0};y.getFirstColumnForWorld=function(D){return D*this.worldSize[0]+this.first[0]};y.getLastColumnForWorld=
function(D){return D*this.worldSize[0]+this.first[0]+this.size[0]-1};y.getColumnForX=function(D){return(D-this.origin[0])/this.norm[0]};y.getXForColumn=function(D){return this.origin[0]+D*this.norm[0]};y.getRowForY=function(D){return(this.origin[1]-D)/this.norm[1]};y.getYForRow=function(D){return this.origin[1]-D*this.norm[1]};y.getTileBounds=function(D,F,z=!1){q.set(F);var p=z?q.col:this.denormalizeCol(q.col,q.world),d=q.row;F=this.getXForColumn(p);z=this.getYForRow(d+1);p=this.getXForColumn(p+1);
d=this.getYForRow(d);D[0]=F;D[1]=z;D[2]=p;D[3]=d;return D};y.getTileCoords=function(D,F,z=!1){q.set(F);F=z?q.col:this.denormalizeCol(q.col,q.world);Array.isArray(D)?g(D,this.getXForColumn(F),this.getYForRow(q.row)):(D.x=this.getXForColumn(F),D.y=this.getYForRow(q.row));return D};return x}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(e,l){let k=function(){function g(x,y,D,F){this.set(x,y,D,F)}g.getId=function(x,
y,D,F){return"object"===typeof x?`${x.level}/${x.row}/${x.col}/${x.world}`:`${x}/${y}/${D}/${F}`};var q=g.prototype;q.acquire=function(x,y,D,F){this.set(x,y,D,F)};q.contains=function(x){const y=x.level-this.level;return this.row===x.row>>y&&this.col===x.col>>y&&this.world===x.world};q.equals=function(x){return this.level===x.level&&this.row===x.row&&this.col===x.col&&this.world===x.world};q.clone=function(){return new g(this)};q.release=function(){this.world=this.col=this.row=this.level=0};q.set=
function(x,y,D,F){if(null==x)this.world=this.col=this.row=this.level=0;else if("object"===typeof x)this.level=x.level||0,this.row=x.row||0,this.col=x.col||0,this.world=x.world||0;else if("string"===typeof x){const [z,p,d,c]=x.split("/");this.level=parseFloat(z);this.row=parseFloat(p);this.col=parseFloat(d);this.world=parseFloat(c)}else this.level=+x,this.row=+y,this.col=+D,this.world=+F||0;return this};q.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};q.getParentKey=
function(){return 0>=this.level?null:new g(this.level-1,this.row>>1,this.col>>1,this.world)};q.getChildKeys=function(){const x=this.level+1,y=this.row<<1,D=this.col<<1,F=this.world;return[new g(x,y,D,F),new g(x,y,D+1,F),new g(x,y+1,D,F),new g(x,y+1,D+1,F)]};q.compareRowMajor=function(x){return this.row<x.row?-1:this.row>x.row?1:this.col<x.col?-1:this.col>x.col?1:0};e._createClass(g,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(x){this.set(x)}},
{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return g}();k.pool=new l(k,null,null,25,50);return k})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(e){let l=function(){function k(){this.spans=[]}var g=k.prototype;g.acquire=function(q){this.lodInfo=q};g.release=function(){this.lodInfo=null;this.spans.length=0};g.forEach=function(q,x){const {spans:y,lodInfo:D}=this,{level:F}=D;if(0!==y.length)for(const {row:z,
colFrom:p,colTo:d}of y)for(let c=p;c<=d;c++)q.call(x,F,z,D.normalizeCol(c),D.getWorldForColumn(c))};return k}();l.pool=new e(l);return l})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(e,l,k){this.row=e;this.colFrom=l;this.colTo=k}})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(e,l,k,g,q,x,y,D,F,z){function p(b,n){b.length=0;n.forEach(t=>b.push(t));return b}const d=new Set,c=[],m=new Map,h=[0,0];k=function(b){function n(r){r=b.call(this,r)||this;r._keyToItem=new Map;r.concurrency=6;r.strategy="scale-first";r.tileInfoView=null;return r}e._inheritsLoose(n,b);var t=n.prototype;t.initialize=function(){const {concurrency:r,process:u,strategy:C}=this;this._queue=new z.QueueProcessor({concurrency:r,process:(I,w)=>{I=this._keyToItem.get(I);return u(I,{signal:w})},peeker:"scale-first"===
C?I=>this._peekByScaleFirst(I):I=>this._peekByCenterFirst(I)})};t.destroy=function(){this.clear();this._queue.destroy();this._queue=null};t.abort=function(r){this._queue.abort("string"===typeof r?r:r.id)};t.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};t.has=function(r){return"string"===typeof r?this._keyToItem.has(r):this._keyToItem.has(r.id)};t.isOngoing=function(r){r="string"===typeof r?r:r.id;return this.has(r)&&this._queue.isOngoing(r)};t.pause=function(){this._queue.pause()};
t.push=function(r){const u=r.key.id;if(this._queue.has(u))return this._queue.get(u);const C=this._queue.push(u),I=()=>{this._keyToItem.delete(u);this.notifyChange("updating")};this._keyToItem.set(u,r);C.then(I,I);this.notifyChange("updating");return C};t.reset=function(){this._queue.reset()};t.resume=function(){this._queue.resume()};t._peekByScaleFirst=function(r){if(!this.state)return r.values().next().value;const u=this.tileInfoView;let C=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;r.forEach(P=>
{P=this._keyToItem.get(P);const T=this.tileInfoView.getTileScale(P.key);m.has(T)||(m.set(T,[]),C=Math.max(T,C),I=Math.min(T,I));m.get(T).push(P.key);d.add(T)});let w=this.state.scale;m.has(w)||(p(c,d),c.sort((P,T)=>P-T),w=c.reduce((P,T)=>Math.abs(T-w)<Math.abs(P-w)?T:P,c[0]));w=Math.min(w,C);w=Math.max(w,I);r=m.get(w);const f=u.getClosestInfoForScale(w),B=f.getColumnForX(this.state.center[0]),K=f.getRowForY(this.state.center[1]);r.sort((P,T)=>{const X=f.denormalizeCol(P.col,P.world),W=f.denormalizeCol(T.col,
T.world);return Math.sqrt((B-X)*(B-X)+(K-P.row)*(K-P.row))-Math.sqrt((B-W)*(B-W)+(K-T.row)*(K-T.row))});d.clear();m.clear();return r[0].id};t._peekByCenterFirst=function(r){if(!this.state)return r.values().next().value;const u=this.tileInfoView,C=this.state.center;let I=Number.POSITIVE_INFINITY,w=null;r.forEach(f=>{f=this._keyToItem.get(f);u.getTileCoords(h,f.key);const B=F.distance(h,C);B<I&&(I=B,w=f.key)});return w.id};e._createClass(n,[{key:"length",get:function(){return this._queue?this._queue.length:
0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return n}(k);l.__decorate([g.property({constructOnly:!0})],k.prototype,"concurrency",void 0);l.__decorate([g.property({constructOnly:!0})],k.prototype,"process",void 0);l.__decorate([g.property()],k.prototype,"state",void 0);l.__decorate([g.property({constructOnly:!0})],k.prototype,"strategy",void 0);l.__decorate([g.property({constructOnly:!0})],k.prototype,
"tileInfoView",void 0);l.__decorate([g.property({readOnly:!0})],k.prototype,"updating",null);return k=l.__decorate([D.subclass("esri.views.2d.tiling.TileQueue")],k)})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],function(e,l,k,g){const q=new g(0,0,0,0),x=new Map,y=[],D=[];return function(){function F(p){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";
this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=p.acquireTile;this.releaseTile=p.releaseTile;this.tileInfoView=p.tileInfoView;this.resampling=null==p.resampling||!!p.resampling;p.cachePolicy&&(this.cachePolicy=p.cachePolicy);p.coveragePolicy&&(this.coveragePolicy=p.coveragePolicy);null!=p.buffer&&(this.buffer=p.buffer);p.cacheSize&&(this._tileCache=new l(p.cacheSize,this.tileInfoView,d=>{this.releaseTile(d)}))}var z=F.prototype;z.destroy=function(){this.tileIndex.clear()};
z.update=function(p){const {resampling:d,tileIndex:c}=this,m=this.tileInfoView.getTileCoverage(p.state,this.buffer,this.coveragePolicy);D.length=0;y.length=0;x.clear();if(m){var {minScale:h,maxScale:b}=this.tileInfoView.tileInfo,{spans:n,lodInfo:t}=m,{level:r}=t,{scale:u,center:C,resolution:I}=p.state,w=!p.stationary&&u>this._previousScale;this._previousScale=u;this.tiles.length=0;if(!d&&(u>h||u<b))return this.tiles.length=0,x.clear(),c.forEach(T=>{this.releaseTile(T)}),c.clear(),D.length=0,y.length=
0,x.clear(),k.pool.release(m),!0;c.forEach(T=>T.visible=!0);var f=p=0;if(0<n.length)for(const {row:T,colFrom:X,colTo:W}of n)for(let L=X;L<=W;L++){p++;const R=q.set(r,T,t.normalizeCol(L),t.getWorldForColumn(L)).id;if(c.has(R)){var B=c.get(R);B.isReady?(x.set(R,B),f++):w||this._addParentTile(R,x)}else{if(this._tileCache&&this._tileCache.has(R)){if(B=this._tileCache.pop(R),this.tileIndex.set(R,B),B.isReady){x.set(R,B);f++;continue}}else B=this.acquireTile(q),this.tileIndex.set(R,B);w||this._addParentTile(R,
x)}}var K=f===p;c.forEach((T,X)=>{q.set(X);if(!x.has(X)){var W=this.tileInfoView.intersects(m,q),L="purge"===this.cachePolicy?q.level!==r:q.level>r;!W||!w&&K?!L&&W||y.push(X):T.isReady?L&&"purge"===this.cachePolicy&&this._hasReadyAncestor(q,r)?y.push(X):D.push(X):L&&y.push(X)}});for(var P of D)(p=c.get(P))&&p.isReady&&x.set(P,p);for(const T of y)P=c.get(T),this._tileCache?this._tileCache.add(P):this.releaseTile(P),c.delete(T);x.forEach(T=>this.tiles.push(T));c.forEach(T=>{x.has(T.key.id)||(T.visible=
!1)});this._tileCache&&this._tileCache.prune(r,C,I);k.pool.release(m);x.clear();return K}};z.clear=function(p=!0){const {tileIndex:d}=this;p&&d.forEach(c=>{this.releaseTile(c)});d.clear()};z.updateCacheSize=function(p){this._tileCache&&(this._tileCache.maxSize=p)};z._addParentTile=function(p,d){let c=null;for(;;){p=this.tileInfoView.getTileParentId(p);if(!p)break;if(this.tileIndex.has(p)){if((c=this.tileIndex.get(p))&&c.isReady){d.has(c.key.id)||d.set(c.key.id,c);break}}else if(this._tileCache&&this._tileCache.has(p)&&
(c=this._tileCache.pop(p),this.tileIndex.set(p,c),c&&c.isReady)){d.has(c.key.id)||d.set(c.key.id,c);break}}};z._hasReadyAncestor=function(p,d){const c=e.create();this.tileInfoView.getTileBounds(c,p,!0);for(const m of this.tileIndex.values())if(m.isReady&&m.key.level>=d&&m.key.level<p.level){const h=e.create();this.tileInfoView.getTileBounds(h,m.key,!0);if(e.contains(h,c))return!0}return!1};return F}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],function(e){return function(){function l(g,
q,x){this.maxSize=g;this.tileInfoView=q;this.removedFunc=x;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var k=l.prototype;k.has=function(g){return this._tilePerId.has(g)};k.get=function(g){return this._tilePerId.get(g)};k.pop=function(g){const q=this._tilePerId.get(g);if(!q)return null;const x=this._tileKeysPerLevel[q.key.level];this._tilePerId["delete"](g);for(let y=0;y<x.length;y++)if(x[y].id===g){x.splice(y,1);break}q.visible=!0;return q};k.add=function(g){g.visible=!1;const q=g.key,x=q.id;
this._tilePerId.has(x)||(this._tilePerId.set(x,g),g=q.level,this._tileKeysPerLevel[g]||(this._tileKeysPerLevel[g]=[]),this._tileKeysPerLevel[g].push(q))};k.prune=function(g,q,x){let y=this._tilePerId.size;if(!(y<=this.maxSize)){for(var D=this._tileKeysPerLevel.length-1;y>this.maxSize&&0<=D;)D!==g&&(y=this._pruneAroundCenterTile(y,q,x,D)),D--;y>this.maxSize&&(y=this._pruneAroundCenterTile(y,q,x,g))}};k._pruneAroundCenterTile=function(g,q,x,y){y=this._tileKeysPerLevel[y];if(!y||0===y.length)return g;
const {size:D,origin:F}=this.tileInfoView.tileInfo,z=x*D[0],p=x*D[1],d=[0,0],c=[0,0];for(y.sort((m,h)=>{d[0]=F.x+z*(m.col+.5);d[1]=F.y-p*(m.row+.5);c[0]=F.x+z*(h.col+.5);c[1]=F.y-p*(h.row+.5);return e.squaredDistance(d,q)-e.squaredDistance(c,q)});0<y.length&&(x=y.pop(),this._removeTile(x.id),g--,g!==this.maxSize););return g};k._removeTile=function(g){const q=this._tilePerId.get(g);this.removedFunc&&this.removedFunc(q);this._tilePerId["delete"](g)};return l}()})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n,t,r,u,C,I,w,f,B,K,P,T){var X={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},W={zoomIn:["\x3d","+"],zoomOut:["-","_"]},L={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};k=function(R){function aa(){var N=R.apply(this,arguments)||this;N._handles=new g;return N}e._inheritsLoose(aa,R);var H=aa.prototype;H.initialize=function(){this._handles.add([q.whenNot(this.view,
"ready",()=>this._disconnect()),q.when(this.view,"ready",()=>this._connect())])};H.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};H._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};H._connect=function(){const N=new C.BrowserEventSource(this.view.surface,this.view.input);var Q=[new K.ImmediateDoubleClick,new P.PointerClickHoldAndDrag,
new T.SingleAndDoubleClick,new B.Drag(this.view.navigation),new f.DoubleTapDrag];Q=new I.InputManager({eventSource:N,recognizers:Q});Q.installHandlers("prevent-context-menu",[new w.PreventContextMenu],I.ViewEventPriorities.INTERNAL);Q.installHandlers("navigation",[new u.PinchRotateAndZoom(this.view),new h.GamepadNavigation(this.view),new r.MouseWheelZoom(this.view),new p.DoubleClickZoom(this.view),new p.DoubleClickZoom(this.view,["Ctrl"]),new c.DragPan(this.view,"primary"),new b.KeyPan(this.view,
X),new t.KeyZoom(this.view,W),new n.KeyRotate(this.view,L),new m.DragRotate(this.view,"secondary"),new d.DoubleTapDragZoom(this.view,"touch")],I.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(Q);this._source=N;this._inputManager=Q;q.init(this.view.navigation,"browserTouchPanEnabled",v=>{this._source.browserTouchPanningEnabled=!v})};e._createClass(aa,[{key:"test",get:function(){return{inputManager:this._inputManager}}}]);return aa}(k);l.__decorate([x.property()],k.prototype,"view",void 0);
return k=l.__decorate([z.subclass("esri.views.2d.input.MapViewInputManager")],k)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support"],function(e,l,k,g){k=function(q){function x(y,D){var F=q.call(this,!0)||this;F.view=y;F.registerIncoming("double-click",D,z=>F._handleDoubleClick(z,D));return F}l._inheritsLoose(x,q);x.prototype._handleDoubleClick=function(y,D){g.eventMatchesPointerAction(y.data,
"primary")&&(y.stopPropagation(),D?this.view.mapViewNavigation.zoomOut([y.data.x,y.data.y]):this.view.mapViewNavigation.zoomIn([y.data.x,y.data.y]))};return x}(k.InputHandler);e.DoubleClickZoom=k;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/input/handlers/support":function(){define(["exports"],function(e){e.eventMatchesMousePointerAction=function(l,k){if("touch"===l.pointerType)return!1;switch(k){case "primary":return 0===l.button;case "secondary":return 2===l.button;case "tertiary":return 1===
l.button}};e.eventMatchesPointerAction=function(l,k){switch(k){case "primary":return"touch"===l.pointerType||0===l.button;case "secondary":return"touch"!==l.pointerType&&2===l.button;case "tertiary":return"touch"!==l.pointerType&&1===l.button}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(e,l,k,g){k=function(q){function x(y,
D,F){var z=q.call(this,!0)||this;z.view=y;z.pointerType=D;z.registerIncoming("double-tap-drag",F,p=>z._handleDoubleTapDrag(p));return z}l._inheritsLoose(x,q);x.prototype._handleDoubleTapDrag=function(y){var {data:D}=y,{pointerType:F}=D;if(F===this.pointerType){y.stopPropagation();var {action:z,delta:p}=D;({view:D}=this);({mapViewNavigation:y}=D);switch(z){case "begin":({scale:D}=D);this._currentScale=this._startScale=D;this._previousDelta=p;y.begin();break;case "update":if(this._previousDelta.y===
p.y)break;this._previousDelta=p;D=this._startScale*1.015**p.y;y.setViewpointImmediate(D/this._currentScale);this._currentScale=D;break;case "end":{({constraints:F}=D);const {effectiveLODs:d,snapToZoom:c}=F;c&&d?(D=F.snapScale(this._currentScale),D=(0<p.y?Math.max(D,F.snapToPreviousScale(this._startScale)):Math.min(D,F.snapToNextScale(this._startScale)))/this._currentScale,y.zoom(D)):y.end()}}}};return x}(g.InputHandler);e.DoubleTapDragZoom=k;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DragPan":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(e,l,k,g,q){g=function(x){function y(F,z,p){var d=x.call(this,!0)||this;d.view=F;d.pointerAction=z;d.registerIncoming("drag",p,c=>d._handleDrag(c));d.registerIncoming("pointer-down",()=>d.stopMomentumNavigation());return d}l._inheritsLoose(y,x);var D=y.prototype;D.onInstall=function(F){x.prototype.onInstall.call(this,F);this.dragEventSeparator=
new k.DragEventSeparator({start:(z,p)=>{this.view.mapViewNavigation.pan.begin(this.view,p.data);p.stopPropagation()},update:(z,p)=>{this.view.mapViewNavigation.pan.update(this.view,p.data);p.stopPropagation()},end:(z,p)=>{this.view.mapViewNavigation.pan.end(this.view,p.data);p.stopPropagation()},condition:(z,p)=>1===z&&q.eventMatchesPointerAction(p.data,this.pointerAction)})};D._handleDrag=function(F){const z=this.view.mapViewNavigation;z.pinch.zoomMomentum||z.pinch.rotateMomentum?this.stopMomentumNavigation():
this.dragEventSeparator.handle(F)};D.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return y}(g.InputHandler);e.DragPan=g;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(e){let l=function(){function k(q){this.callbacks=q;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=()=>!0)}var g=k.prototype;g.handle=function(q){const x=q.data,y=x.pointers.size;switch(x.action){case "start":this.currentCount=
y;this._emitStart(q);break;case "added":this._emitEnd(this.previousEvent);this.currentCount=y;this._emitStart(q);break;case "update":this._emitUpdate(q);break;case "removed":this.startEvent&&this._emitEnd(this.previousEvent);this.currentCount=y;this._emitStart(q);break;case "end":this._emitEnd(q),this.currentCount=0}this.previousEvent=q};g._emitStart=function(q){this.startEvent=q;this.callbacks.condition(this.currentCount,q)&&this.callbacks.start(this.currentCount,q,this.startEvent)};g._emitUpdate=
function(q){this.callbacks.condition(this.currentCount,q)&&this.callbacks.update(this.currentCount,q,this.startEvent)};g._emitEnd=function(q){this.callbacks.condition(this.currentCount,q)&&this.callbacks.end(this.currentCount,q,this.startEvent);this.startEvent=null};return k}();e.DragEventSeparator=l;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DragRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator",
"../../../input/InputHandler","../../../input/handlers/support"],function(e,l,k,g,q){g=function(x){function y(D,F,z){var p=x.call(this,!0)||this;p.view=D;p.pointerAction=F;const d=p.view.mapViewNavigation;p.dragEventSeparator=new k.DragEventSeparator({start:(c,m)=>{d.rotate.begin(p.view,m.data);m.stopPropagation()},update:(c,m)=>{d.rotate.update(p.view,m.data);m.stopPropagation()},end:(c,m)=>{d.rotate.end();m.stopPropagation()},condition:(c,m)=>1===c&&q.eventMatchesPointerAction(m.data,p.pointerAction)});
p.registerIncoming("drag",z,c=>p.dragEventSeparator.handle(c));return p}l._inheritsLoose(y,x);return y}(g.InputHandler);e.DragRotate=g;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(e,
l,k,g,q,x,y,D){y=function(F){function z(d){var c=F.call(this,!0)||this;c.view=d;c.frameTask=null;c.watchHandles=new k;c.currentDevice=null;c.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};c.handle=c.registerIncoming("gamepad",m=>c._handleGamePadEvent(m));c.handle.pause();return c}l._inheritsLoose(z,F);var p=z.prototype;p.onInstall=function(d){F.prototype.onInstall.call(this,d);this.watchHandles.add([q.init(this.view.navigation.gamepad,"enabled",c=>{c?(this.handle.resume(),this.frameTask||
(this.frameTask=g.addFrameTask({update:m=>this._frameUpdate(m.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))})])};p.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);F.prototype.onUninstall.call(this)};p._handleGamePadEvent=function(d){const c=this.view.navigation.gamepad.device;c&&d.data.device!==c||this.currentDevice&&this.currentDevice!==d.data.device||("end"===d.data.action?(this.currentDevice=
null,D.resetTransformation(this.transformation)):(this.currentDevice=d.data.device,D.extractTransformation(d.data,this.view.navigation.gamepad,this.transformation)))};p._frameUpdate=function(d){const c=this.transformation;if(!D.isZeroTransformation(c)){var m=this.view.viewpoint.clone(),h=.7*this.view.navigation.gamepad.velocityFactor*d;x.translateBy(m,m,[c.translation[0]*h,-c.translation[1]*h]);h=this.view.size;x.scaleAndRotateBy(m,m,1+6E-4*c.translation[2]*d,this.view.constraints.rotationEnabled?
.06*-c.heading*d:0,[h[0]/2,h[1]],h);d=this.view.constraints.constrain(m,this.view.viewpoint);this.view.viewpoint=d}};return z}(y.InputHandler);e.GamepadNavigation=y;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec3"],function(e,l){function k(g){let q=g*g;0>g&&(q*=-1);return q}e.extractTransformation=function(g,q,x){const y=g.state;g=g.device;q="forward-down"===q.tiltDirection?1:-1;"standard"===g.deviceType?
(x.translation[0]=k(y.axes[0]),x.translation[1]=k(y.axes[1]),x.translation[2]=k(y.buttons[7])-k(y.buttons[6]),x.heading=k(y.axes[2]),x.tilt=k(y.axes[3])):"spacemouse"===g.deviceType&&(x.translation[0]=1.2*k(y.axes[0]),x.translation[1]=1.2*k(y.axes[1]),x.translation[2]=2*-k(y.axes[2]),x.heading=1.2*k(y.axes[5]),x.tilt=1.2*k(y.axes[3]));x.tilt*=q;l.scale(x.translation,x.translation,1);return x};e.extractTransformationKeyboard=function(g,q){q.translation[0]=g[1]-g[0];q.translation[1]=g[3]-g[2];q.translation[2]=
g[4]-g[5];q.heading=g[7]-g[6];q.tilt=g[8]-g[9];q.zoom=g[10]-g[11];return q};e.isZeroTransformation=function(g){return 0===g.translation[0]&&0===g.translation[1]&&0===g.translation[2]&&0===g.heading&&0===g.tilt&&0===g.zoom};e.quadraticAccentuation=k;e.resetTransformation=function(g){g.translation[0]=0;g.translation[1]=0;g.translation[2]=0;g.heading=0;g.tilt=0;return g};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"../../../input/InputHandler"],function(e,l,k){k=function(g){function q(y,D,F){var z=g.call(this,!0)||this;z.view=y;z.keys=D;z._pressed=!1;z._keyMap={[D.left]:"left",[D.right]:"right",[D.up]:"up",[D.down]:"down"};z.registerIncoming("key-down",F,p=>z._handleKeyDown(p));z.registerIncoming("key-up",F,p=>z._handleKeyUp(p));z.registerIncoming("blur",F,()=>z._handleBlur());return z}l._inheritsLoose(q,g);var x=q.prototype;x._handleKeyDown=function(y){y.data.repeat||this._handleKey(y,!0)};x._handleKeyUp=
function(y){this._handleKey(y,!1)};x._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};x._handleKey=function(y,D){const F=this._keyMap[y.data.key];if(this._pressed=null!=F){if(D)switch(this.view.mapViewNavigation.begin(),F){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=
!1,this.view.mapViewNavigation.stop();y.stopPropagation()}};return q}(k.InputHandler);e.KeyPan=k;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(e,l,k){k=function(g){function q(y,D,F){var z=g.call(this,!0)||this;z.view=y;z.keys=D;z._pressed=!1;z._keyToDirection={[D.clockwiseOption1]:"clockwise",[D.clockwiseOption2]:"clockwise",[D.counterClockwiseOption1]:"counterClockwise",
[D.counterClockwiseOption2]:"counterClockwise",[D.resetOption1]:"reset",[D.resetOption2]:"reset"};z.registerIncoming("key-down",F,p=>z._handleKeyDown(p));z.registerIncoming("key-up",F,p=>z._handleKeyUp(p));z.registerIncoming("blur",F,()=>z._handleBlur());return z}l._inheritsLoose(q,g);var x=q.prototype;x._handleKeyDown=function(y){y.data.repeat||this._handleKey(y,!0)};x._handleKeyUp=function(y){this._handleKey(y,!1)};x._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};
x._handleKey=function(y,D){var F=y.modifiers;if(!(0<F.size&&!F.has("Shift")||!this.view.constraints.rotationEnabled)&&(F=this._keyToDirection[y.data.key],this._pressed=null!=F)){if(D)switch(this.view.mapViewNavigation.begin(),F){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();
y.stopPropagation()}};return q}(k.InputHandler);e.KeyRotate=k;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(e,l,k,g){var q;(function(x){x[x.IN=0]="IN";x[x.OUT=1]="OUT"})(q||(q={}));k=function(x){function y(F,z,p){var d=x.call(this,!0)||this;d.view=F;d.keys=z;d._keysToZoomAction={};d.registerIncoming("key-down",p,c=>
d._handleKeyDown(c));z.zoomIn.forEach(c=>d._keysToZoomAction[c]=q.IN);z.zoomOut.forEach(c=>d._keysToZoomAction[c]=q.OUT);return d}l._inheritsLoose(y,x);var D=y.prototype;D._handleKeyDown=function(F){this._handleKey(F)};D._handleKey=function(F){var z=F.modifiers;if(!(0<z.size)||z.has("Shift"))if({key:z}=F.data,z in this._keysToZoomAction){z=this._keysToZoomAction[z];var {mapViewNavigation:p}=this.view,d=null;switch(z){case q.IN:d=p.zoomIn();break;case q.OUT:d=p.zoomOut();break;default:return}p.begin();
d.then(()=>p.end());F.stopPropagation()}};return y}(g.InputHandler);e.KeyZoom=k;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(e,l,k){k=function(g){function q(x,y){var D=g.call(this,!0)||this;D.view=x;D._canZoom=!0;D.registerIncoming("mouse-wheel",y,F=>D._handleMouseWheel(F));return D}l._inheritsLoose(q,g);q.prototype._handleMouseWheel=
function(x){if(this.view.navigation.mouseWheelZoomEnabled&&(x.preventDefault(),x.stopPropagation(),this._canZoom)){var y=this.view.mapViewNavigation,{x:D,y:F,deltaY:z}=x.data;if(x=y.zoom(1/.6**(1/60*z),[D,F]))this._canZoom=!1,x.catch(()=>{}).then(()=>{this._canZoom=!0;y.end()})}};return q}(k.InputHandler);e.MouseWheelZoom=k;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator",
"../../../input/InputHandler"],function(e,l,k,g){g=function(q){function x(D){var F=q.call(this,!0)||this;F.view=D;F.registerIncoming("drag",p=>F._handleDrag(p));F.registerIncoming("pointer-down",()=>F._stopMomentumNavigation());const z=F.view.mapViewNavigation;F.dragEventSeparator=new k.DragEventSeparator({start:(p,d)=>{z.pinch.begin(F.view,d.data);d.stopPropagation()},update:(p,d)=>{z.pinch.update(F.view,d.data);d.stopPropagation()},end:(p,d)=>{z.pinch.end(F.view);d.stopPropagation()},condition:p=>
2<=p});return F}l._inheritsLoose(x,q);var y=x.prototype;y._handleDrag=function(D){this.dragEventSeparator.handle(D)};y._stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return x}(g.InputHandler);e.PinchRotateAndZoom=g;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/input/BrowserEventSource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ./keys ./gamepad/GamepadSource ../support/screenUtils".split(" "),function(e,
l,k,g,q,x){const y=k("trident"),D=k("edge"),F=k("chrome"),z=k("ff"),p=k("safari");k=function(){function c(h,b){this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=h;h.getAttribute("tabindex")||h.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,
"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new q.GamepadSource(h,this.input);this._gamepadSource.onEvent=n=>this._callback("gamepad",n)}var m=c.prototype;m.destroy=function(){this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(h=>
{this._releasePointerCaptureSafe(h)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};m.setPointerCapture=function(h,b){b?(this._element.setPointerCapture(h.pointerId),this._activePointerCaptures.add(h.pointerId)):(this._releasePointerCaptureSafe(h.pointerId),this._activePointerCaptures.delete(h.pointerId))};m._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?
"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};m._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};m._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");
this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};m._releasePointerCaptureSafe=function(h){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(h)||this._element.releasePointerCapture(h)}catch(b){}};m._updateNormalizedPointerLikeEvent=function(h,b){h=x.createScreenPointFromNativeEvent(this._element,h);c.test.disableSubpixelCoordinates&&(h.x=Math.round(h.x),h.y=Math.round(h.y));b.x=h.x;b.y=
h.y;return b};m._handleKey=function(h,b){const n=g.eventKey(b);n&&"key-up"===h&&this._keyDownState.delete(n);b={native:b,key:n,repeat:n&&this._keyDownState.has(n)};n&&"key-down"===h&&this._keyDownState.add(b.key);this._callback(h,b)};m._handlePointer=function(h,b){b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(h,b)};m._handlePointerPreventDefault=function(h,b){const n=this._updateNormalizedPointerLikeEvent(b,
{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(h,n)};m._handleMouseWheel=function(h,b){let n=b.deltaY;switch(b.deltaMode){case 0:if(y||D)n=n/document.documentElement.clientHeight*600;break;case 1:n*=30;break;case 2:n*=900}y||D?n*=.7:F||p?n*=.6:z&&(n*=1.375);const t=Math.abs(n);100<t&&(n=n/t*200/(1+Math.exp(-.02*(t-100))));b=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,deltaY:n});this._callback(h,
b)};m._handlePointerCaptureLost=function(h,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(h,b)};m._handleDefault=function(h,b){const n={native:b};b.preventDefault();this._callback(h,n)};m._preventAltKeyDefault=function(h){"Alt"===h.key&&h.preventDefault()};m._preventMultiTouchPanning=function(h){1<h.touches.length&&h.preventDefault()};l._createClass(c,[{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(h){this._browserTouchPanningEnabled=
h;this._updateTouchAction();this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(h){this._callback=h}},{key:"activeEvents",set:function(h){for(const b in this._active)h&&h.has(b)||(this._element.removeEventListener(d[b],this._active[b]),delete this._active[b]);h&&h.forEach(b=>{if(!this._active[b]&&d[b]){const n=(this._eventHandlers[b]||this._handleDefault).bind(this,b);this._element.addEventListener(d[b],n);this._active[b]=n}});this._gamepadSource.hasEventListeners=h&&h.has("gamepad")}}]);
return c}();k.test={disableSubpixelCoordinates:!1};const d={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};e.BrowserEventSource=k;Object.defineProperty(e,"__esModule",{value:!0})})},
"esri/views/input/gamepad/GamepadSource":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(e,l,k,g,q){let x=function(){function y(F,z){this.element=F;this.input=z;this._hasEventListeners=!1;this._onConnectGamepad=p=>{this._connectGamepad(p.gamepad)};this._onDisconnectGamepad=p=>{p=p.gamepad;const d=p.index,c=this.inputDevices[d];c&&(this._emitGamepadEvent(p,q.extractState(c),!1),this.inputDevices.splice(d,
1),this.latestUpdate.splice(d,1),this.input.gamepad.devices.remove(c),this.ensurePollingState())};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;F=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&F)this._forEachGamepad(p=>this._connectGamepad(p)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState()}var D=y.prototype;D.destroy=
function(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))};D._connectGamepad=function(F){const z=new g(F);"unknown"!==z.deviceType&&(this.inputDevices[F.index]=z,this.input.gamepad.devices.add(z));this.ensurePollingState()};D.ensurePollingState=function(){this.eventsEnabled?this._startPolling():this._stopPolling()};D._startPolling=function(){null==this.frameTask&&
(this.frameTask=k.addFrameTask({update:()=>this._readGamepadState()}))};D._stopPolling=function(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=[])};D._readGamepadState=function(){const F=document.hasFocus(),z=this.element.contains(document.activeElement),p="document"===this.input.gamepad.enabledFocusMode&&!F||"view"===this.input.gamepad.enabledFocusMode&&!z;this._forEachGamepad(d=>{var c=this.inputDevices[d.index];if(c){var m=this.latestUpdate[d.index];c=q.extractState(c);
var h=p||q.stateIdle(c);m&&(m.timestamp===d.timestamp||!m.active&&h||q.stateEqual(m.state,c))||this._emitGamepadEvent(d,c,!h)}})};D._forEachGamepad=function(F){const z=window.navigator.getGamepads();for(let p=0;p<z.length;p++){const d=z[p];this._validate(d)&&F(d)}};D._emitGamepadEvent=function(F,z,p){var d=this.latestUpdate[F.index];if((d=d&&d.active)||p)this.latestUpdate[F.index]={timestamp:F.timestamp,state:z,active:p},this.callback&&this.callback({device:this.inputDevices[F.index],state:z,action:!d&&
p?"start":d&&p?"update":"end"})};D._validate=function(F){if(!F||!F.connected)return!1;for(let z=0;z<F.axes.length;z++)if(isNaN(F.axes[z]))return!1;return!0};l._createClass(y,[{key:"hasEventListeners",set:function(F){this._hasEventListeners!==F&&(this._hasEventListeners=F,this.ensurePollingState())}},{key:"eventsEnabled",get:function(){return this.supported&&0<this.inputDevices.length&&this._hasEventListeners}},{key:"onEvent",set:function(F){this.callback=F}}]);return y}();e.GamepadSource=x;Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],function(e){e.extractState=function(l){const k=l.native;return k?{buttons:k.buttons.map(g=>g.pressed?g.value?g.value:1:0),axes:k.axes.map(g=>{{var q=l.axisThreshold;const x=Math.abs(g);g=x<q?0:Math.sign(g)*(x-q)/(1-q)}return g})}:{buttons:[],axes:[]}};e.stateEqual=function(l,k){if(l.axes.length!==k.axes.length||l.buttons.length!==k.buttons.length)return!1;for(var g=0;g<l.axes.length;g++)if(l.axes[g]!==
k.axes[g])return!1;for(g=0;g<l.buttons.length;g++)if(l.buttons[g]!==k.buttons[g])return!1;return!0};e.stateIdle=function(l){for(var k=0;k<l.axes.length;k++)if(0!==l.axes[k])return!1;for(k=0;k<l.buttons.length;k++)if(0!==l.buttons[k])return!1;return!0};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../InputHandler"],function(e,l,k){k=function(g){function q(){var x=g.call(this,
!0)||this;x.registerIncoming("context-menu",y=>{y.data.native.preventDefault()});return x}l._inheritsLoose(q,g);return q}(k.InputHandler);e.PreventContextMenu=k;e.default=k;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(e,
l,k,g,q,x,y,D,F){y=function(z){function p(c=D.DefaultParameters.maximumDoubleClickDelay,m=D.DefaultParameters.maximumDoubleClickDistance,h=D.DefaultParameters.maximumDoubleTouchDelay,b=D.DefaultParameters.maximumDoubleTouchDistance,n=k.clock){var t=z.call(this,!1)||this;t.maximumDoubleClickDelay=c;t.maximumDoubleClickDistance=m;t.maximumDoubleTouchDelay=h;t.maximumDoubleTouchDistance=b;t._clock=n;t._doubleTapDragReady=!1;t._doubleTapDragActive=!1;t._dragStartCenter=q.createScreenPoint(0,0);t._pointerState=
new Map;t._doubleTapDrag=t.registerOutgoing("double-tap-drag");t._dragEventSeparator=new x.DragEventSeparator({start:(r,u)=>t._dragStart(r,u),update:(r,u)=>t._dragUpdate(u),end:(r,u)=>t._dragEnd(u)});t.registerIncoming("drag",r=>t._dragEventSeparator.handle(r));t.registerIncoming("pointer-down",r=>t._handlePointerDown(r));t.registerIncoming("pointer-up",()=>t._handlePointerUp());return t}l._inheritsLoose(p,z);var d=p.prototype;d.onUninstall=function(){this._pointerState.forEach(c=>{null!=c.doubleTapTimeout&&
(c.doubleTapTimeout.remove(),c.doubleTapTimeout=null)})};d._clearPointerDown=function(c){const m=this._pointerState.get(c);m&&(m.doubleTapTimeout.remove(),m.doubleTapTimeout=null,this._pointerState.delete(c),this.refreshHasPendingInputs())};d._createDoubleTapDragData=function(c,m,h){const {button:b,buttons:n,pointer:t,pointers:r,pointerType:u,timestamp:C}=h;return{action:c,delta:m,button:b,buttons:n,pointer:t,pointers:r,pointerType:u,timestamp:C}};d._dragStart=function(c,m){if(this._doubleTapDragReady&&
1===c){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:h,modifiers:b}=m;({center:c}=h);this._dragStartCenter=c;c=this._createDoubleTapDragData("begin",q.createScreenPoint(0,0),h);this._doubleTapDrag.emit(c,void 0,b);m.stopPropagation()}};d._dragUpdate=function(c){if(this._doubleTapDragActive){var {data:m,modifiers:h}=c,{center:b}=m;b=q.createScreenPoint(b.x-this._dragStartCenter.x,b.y-this._dragStartCenter.y);b=this._createDoubleTapDragData("update",b,m);this._doubleTapDrag.emit(b,
void 0,h);c.stopPropagation()}};d._dragEnd=function(c){if(this._doubleTapDragActive){var {data:m,modifiers:h}=c,{center:b}=m;b=q.createScreenPoint(b.x-this._dragStartCenter.x,b.y-this._dragStartCenter.y);b=this._createDoubleTapDragData("end",b,m);this._doubleTapDrag.emit(b,void 0,h);this._doubleTapDragActive=!1;c.stopPropagation()}};d._handlePointerDown=function(c){const {data:m}=c,h=this._pointerId(m),b=this._pointerState.get(h);var {pointerType:n}=m.native;b?(n="touch"===n?this.maximumDoubleTouchDistance:
this.maximumDoubleClickDistance,this._clearPointerDown(h),F.manhattanDistance(b.event.data,m)>n?this._storePointerDown(c):this._doubleTapDragReady=!0):this._storePointerDown(c)};d._handlePointerUp=function(){this._doubleTapDragReady=!1};d._pointerId=function(c){({native:c}=c);const {pointerId:m,button:h,pointerType:b}=c;return"mouse"===b?`${m}:${h}`:`${b}`};d._storePointerDown=function(c){var {data:m}=c;const {pointerType:h}=m.native,b=this._pointerId(m);m=this._clock.setTimeout(()=>this._clearPointerDown(b),
"touch"===h?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);this._pointerState.set(b,{event:c,doubleTapTimeout:m});this.refreshHasPendingInputs()};l._createClass(p,[{key:"hasPendingInputs",get:function(){return g.someMap(this._pointerState,c=>null!=c.doubleTapTimeout)}}]);return p}(y.InputHandler);e.DoubleTapDrag=y;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../InputHandler ./support".split(" "),
function(e,l,k,g,q,x,y){const D={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};x=function(F){function z(d=D.maximumDoubleClickDelay,c=D.maximumDoubleClickDistance,m=D.maximumDoubleTouchDelay,h=D.maximumDoubleTouchDistance,b=k.clock){var n=F.call(this,!1)||this;n.maximumDoubleClickDelay=d;n.maximumDoubleClickDistance=c;n.maximumDoubleTouchDelay=m;n.maximumDoubleTouchDistance=h;n._clock=b;n._pointerState=new Map;n._click=n.registerOutgoing("click");
n._doubleClick=n.registerOutgoing("double-click");n.registerIncoming("immediate-click",n._handleImmediateClick.bind(l._assertThisInitialized(n)));n.registerIncoming("pointer-drag",n._handlePointerDrag.bind(l._assertThisInitialized(n)));n.registerIncoming("drag",n._handleDrag.bind(l._assertThisInitialized(n)));return n}l._inheritsLoose(z,F);var p=z.prototype;p.onUninstall=function(){this._pointerState.forEach(d=>d.doubleClickTimeout=q.removeMaybe(d.doubleClickTimeout))};p._pointerId=function(d){d=
d.native;return"mouse"===d.pointerType?`${d.pointerId}:${d.button}`:`${d.pointerType}`};p._handleImmediateClick=function(d){const c=d.data,m=this._pointerId(c),h=this._pointerState.get(m);if(h){const b="touch"===c.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;y.manhattanDistance(h.event.data,c)>b?(this._clearDoubleClickTimeout(m,!0),this._startClick(d)):(this._clearDoubleClickTimeout(m,!1),this._doubleClick.emit(h.event.data,void 0,h.event.modifiers))}else this._startClick(d)};
p._startClick=function(d){const c=this._pointerId(d.data);this._pointerState.set(c,{event:d,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(c),"touch"===d.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};p._handlePointerDrag=function(d){d=this._pointerId(d.data.currentEvent);this._clearDoubleClickTimeout(d,!0)};p._handleDrag=function(d){d=this._pointerId(d.data.pointer);this._clearDoubleClickTimeout(d,
!0)};p._clearDoubleClickTimeout=function(d,c){const m=this._pointerState.get(d);m&&(m.doubleClickTimeout.remove(),m.doubleClickTimeout=null,c&&this._doubleClickTimeoutExceeded(d),this._pointerState.delete(d),this.refreshHasPendingInputs())};p._doubleClickTimeoutExceeded=function(d){const c=this._pointerState.get(d);this._click.emit(c.event.data,void 0,c.event.modifiers);c.doubleClickTimeout=null;this._pointerState.delete(d);this.refreshHasPendingInputs()};l._createClass(z,[{key:"hasPendingInputs",
get:function(){return g.someMap(this._pointerState,d=>null!=d.doubleClickTimeout)}}]);return z}(x.InputHandler);e.DefaultParameters=D;e.SingleAndDoubleClick=x;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(e,l){e.euclideanDistance=function(k,g){const q=g.x-k.x;k=g.y-k.y;return Math.sqrt(q*q+k*k)};e.fitCircleLSQ=function(k,g){g?(g.radius=0,g.center.x=0,g.center.y=0):g={radius:0,center:l.createScreenPoint()};
if(0===k.length)return g;if(1===k.length)return g.center.x=k[0].x,g.center.y=k[0].y,g;if(2===k.length){const [b,n]=k,[t,r]=[n.x-b.x,n.y-b.y];g.radius=Math.sqrt(t*t+r*r)/2;g.center.x=(b.x+n.x)/2;g.center.y=(b.y+n.y)/2;return g}let q=0,x=0;for(g=0;g<k.length;g++)q+=k[g].x,x+=k[g].y;q/=k.length;x/=k.length;var y=k.map(b=>b.x-q),D=k.map(b=>b.y-x);let F=g=0;var z=0,p=0,d=0,c=0,m=0;for(var h=0;h<y.length;h++){const b=y[h],n=D[h],t=b*b,r=n*n;g+=t;F+=r;z+=b*n;p+=t*b;d+=r*n;c+=b*r;m+=n*t}y=g;D=z;h=F;p=.5*
(p+c);d=.5*(d+m);m=y*h-z*D;c=(p*h-d*D)/m;d=(y*d-z*p)/m;m=l.createScreenPoint(c+q,d+x);return{radius:Math.sqrt(c*c+d*d+(g+F)/k.length),center:m}};e.manhattanDistance=function(k,g){return Math.abs(g.x-k.x)+Math.abs(g.y-k.y)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/input/recognizers/Drag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/screenUtils ../../../core/time ../InputHandler ./support".split(" "),function(e,l,k,g,q,x){function y(p){const d=
[];p.forEach(c=>{d.push(k.createScreenPoint(c.event.x,c.event.y))});return x.fitCircleLSQ(d)}function D(p){const d=y(p);let c=0;p.forEach(m=>{var h=z(m,d);for(h-=m.lastAngle;h>Math.PI;)h-=2*Math.PI;for(;h<-Math.PI;)h+=2*Math.PI;h=m.lastAngle+h;m.lastAngle=h;c+=h-m.initialAngle});c/=p.size||1;return{angle:c,radius:d.radius,center:d.center}}function F(p){const d=new Map;p.forEach((c,m)=>d.set(m,c.event));return d}function z(p,d){p=p.event;return Math.atan2(p.y-d.center.y,p.x-d.center.x)}q=function(p){function d(m){var h=
p.call(this,!1)||this;h.navigationTouch=m;h.startStateModifiers=new Set;h.activePointerMap=new Map;h.isDragging=!1;h.isCurrentDragSuppressed=!1;h.drag=h.registerOutgoing("drag");h.registerIncoming("pointer-drag",h._handlePointerDrag.bind(l._assertThisInitialized(h)));h.registerIncoming("pointer-up",h._handlePointerUpAndPointerLost.bind(l._assertThisInitialized(h)));h.registerIncoming("pointer-capture-lost",h._handlePointerUpAndPointerLost.bind(l._assertThisInitialized(h)));h.registerIncoming("pointer-cancel",
h._handlePointerUpAndPointerLost.bind(l._assertThisInitialized(h)));return h}l._inheritsLoose(d,p);var c=d.prototype;c._createPayload=function(m,h,b,n){return{action:m,pointerType:this.pointerType,button:this.mouseButton,buttons:h.buttons,timestamp:n,pointers:F(this.activePointerMap),pointer:h,angle:b.angle,radius:b.radius,center:b.center}};c._addPointer=function(m){var h=m.native.pointerId;const b=D(this.activePointerMap).angle;m={event:m,initialAngle:0,lastAngle:0};this.activePointerMap.set(h,m);
h=z(m,y(this.activePointerMap));m.initialAngle=h;m.lastAngle=h;this._updatePointerAngles(b)};c._updatePointer=function(m){if(!m||null!=m.x||null!=m.y){var h=this.activePointerMap.get(m.native.pointerId);h?h.event=m:this._addPointer(m)}};c._removePointer=function(m){const h=D(this.activePointerMap).angle;this.activePointerMap.delete(m);this._updatePointerAngles(h)};c._updatePointerAngles=function(m){const h=D(this.activePointerMap);this.activePointerMap.forEach(b=>{b.initialAngle=z(b,h)-m;b.lastAngle=
z(b,h)-m})};c._emitEvent=function(m,h,b){const n=D(this.activePointerMap);this.drag.emit(this._createPayload(m,h,n,b),void 0,this.startStateModifiers)};c._handlePointerUpAndPointerLost=function(m){const h=m.data.native.pointerId,b=g.Milliseconds(m.timestamp);this.activePointerMap.get(h)&&(1===this.activePointerMap.size?(this._updatePointer(m.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",m.data,b),this.isCurrentDragSuppressed=this.isDragging=!1,this._removePointer(h)):(this._removePointer(h),
this._emitEvent("removed",m.data,g.Milliseconds(m.timestamp))))};c._handlePointerDrag=function(m){const h=m.data,b=h.currentEvent,n=g.Milliseconds(m.timestamp);switch(h.action){case "start":case "update":this.isDragging?this.activePointerMap.has(b.native.pointerId)?(this._updatePointer(b),!this.isCurrentDragSuppressed&&this._emitEvent("update",b,n)):(this._addPointer(b),this._emitEvent("added",b,n),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(b),this.pointerType=m.data.startEvent.pointerType,
this.mouseButton=m.data.startEvent.button,this.startStateModifiers=m.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",b,n))}};l._createClass(d,[{key:"isSuppressed",get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}]);return d}(q.InputHandler);e.Button=void 0;(function(p){p[p.Left=0]="Left";p[p.Middle=1]="Middle";p[p.Right=
2]="Right";p[p.Back=3]="Back";p[p.Forward=4]="Forward";p[p.Undefined=-1]="Undefined"})(e.Button||(e.Button={}));e.Drag=q;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(e,l,k,g,q,x){g=function(y){function D(z=q.DefaultParameters.maximumDoubleClickDelay,p=q.DefaultParameters.maximumDoubleClickDistance,
d=q.DefaultParameters.maximumDoubleTouchDelay,c=q.DefaultParameters.maximumDoubleTouchDistance,m=k.clock){var h=y.call(this,!1)||this;h.maximumDoubleClickDelay=z;h.maximumDoubleClickDistance=p;h.maximumDoubleTouchDelay=d;h.maximumDoubleTouchDistance=c;h._clock=m;h._pointerState=new Map;h._immediateDoubleClick=h.registerOutgoing("immediate-double-click");h.registerIncoming("pointer-down",h._handlePointerDown.bind(l._assertThisInitialized(h)));h.registerIncoming("pointer-up",b=>{h._handlePointerLoss(b,
"pointer-up")});h.registerIncoming("pointer-capture-lost",b=>{h._handlePointerLoss(b,"pointer-capture-lost")});h.registerIncoming("pointer-cancel",b=>{h._handlePointerLoss(b,"pointer-cancel")});return h}l._inheritsLoose(D,y);var F=D.prototype;F.onUninstall=function(){this._pointerState.forEach(z=>{z.immediateDoubleClick&&z.immediateDoubleClick.timeoutHandle.remove()});y.prototype.onUninstall.call(this)};F._handlePointerDown=function(z){z=z.data;const p=this._pointerId(z);this._pointerState.has(p)||
(this._pointerState.set(p,{downButton:z.native.button,immediateDoubleClick:null}),this.startCapturingPointer(z.native))};F._handlePointerLoss=function(z,p){const d=z.data;var c=this._pointerId(d);if((c=this._pointerState.get(c))&&"pointer-up"===p&&c.downButton===d.native.button)if(p=c.immediateDoubleClick){p.timeoutHandle.remove();const m="touch"===z.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;x.manhattanDistance(p,z.data)>m?this._startImmediateDoubleClick(z,
c):(this._immediateDoubleClick.emit(z.data,void 0,p.modifiers),this._removeState(d))}else this._startImmediateDoubleClick(z,c)};F._startImmediateDoubleClick=function(z,p){p.immediateDoubleClick={x:z.data.x,y:z.data.y,modifiers:z.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(z.data),"touch"===z.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};F._pointerId=function(z){z=z.native;return"mouse"===z.pointerType?`${z.pointerId}:${z.button}`:`${z.pointerType}`};
F._removeState=function(z){const p=this._pointerId(z);this._pointerState.delete(p);this.stopCapturingPointer(z.native);this.refreshHasPendingInputs()};return D}(g.InputHandler);e.ImmediateDoubleClick=g;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/clock","../InputHandler","./support"],function(e,l,k,g,q){const x={maximumClickDelay:300,movementUntilMouseDrag:1.5,
movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};g=function(y){function D(z=x.maximumClickDelay,p=x.movementUntilMouseDrag,d=x.movementUntilPenDrag,c=x.movementUntilTouchDrag,m=x.holdDelay,h=k.clock){var b=y.call(this,!1)||this;b.maximumClickDelay=z;b.movementUntilMouseDrag=p;b.movementUntilPenDrag=d;b.movementUntilTouchDrag=c;b.holdDelay=m;b._clock=h;b._pointerState=new Map;b._pointerDrag=b.registerOutgoing("pointer-drag");b._immediateClick=b.registerOutgoing("immediate-click");b._pointerHold=
b.registerOutgoing("hold");b.registerIncoming("pointer-down",b._handlePointerDown.bind(l._assertThisInitialized(b)));b.registerIncoming("pointer-up",n=>{b._handlePointerLoss(n,"pointer-up")});b.registerIncoming("pointer-capture-lost",n=>{b._handlePointerLoss(n,"pointer-capture-lost")});b.registerIncoming("pointer-cancel",n=>{b._handlePointerLoss(n,"pointer-cancel")});b._moveHandle=b.registerIncoming("pointer-move",b._handlePointerMove.bind(l._assertThisInitialized(b)));b._moveHandle.pause();return b}
l._inheritsLoose(D,y);var F=D.prototype;F.onUninstall=function(){this._pointerState.forEach(z=>{null!=z.holdTimeout&&(z.holdTimeout.remove(),z.holdTimeout=null)});y.prototype.onUninstall.call(this)};F._handlePointerDown=function(z){const p=z.data,d=p.native.pointerId;var c=null;0===this._pointerState.size&&(c=this._clock.setTimeout(()=>{const m=this._pointerState.get(d);m&&(m.isDragging||(this._pointerHold.emit(m.previousEvent,void 0,z.modifiers),m.holdEmitted=!0),m.holdTimeout=null)},this.holdDelay));
c={startEvent:p,previousEvent:p,startTimestamp:z.timestamp,isDragging:!1,downButton:p.native.button,holdTimeout:c,modifiers:new Set};this._pointerState.set(d,c);this.startCapturingPointer(p.native);this._moveHandle.resume();1<this._pointerState.size&&this._startDragging(z)};F._createPointerDragData=function(z,p,d){return{action:z,startEvent:p.startEvent,previousEvent:p.previousEvent,currentEvent:d}};F._handlePointerMove=function(z){const p=z.data,d=this._pointerState.get(p.native.pointerId);if(d){if(d.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",
d,p),void 0,d.modifiers);else{const c=q.euclideanDistance(p,d.startEvent),m=this._getDragThreshold(p.native.pointerType);c>m&&this._startDragging(z)}d.previousEvent=p}};F._getDragThreshold=function(z){switch(z){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}};F._startDragging=function(z){const p=z.data,d=p.native.pointerId;this._pointerState.forEach(c=>{null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=
null);c.isDragging||(c.modifiers=z.modifiers,c.isDragging=!0,d===c.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",c,p)):this._pointerDrag.emit(this._createPointerDragData("start",c,c.previousEvent),z.timestamp))})};F._handlePointerLoss=function(z,p){const d=z.data,c=d.native.pointerId,m=this._pointerState.get(c);m&&(null!=m.holdTimeout&&(m.holdTimeout.remove(),m.holdTimeout=null),m.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",m,"pointer-up"===
p?d:m.previousEvent),void 0,m.modifiers):"pointer-up"===p&&m.downButton===d.native.button&&z.timestamp-m.startTimestamp<=this.maximumClickDelay&&!m.holdEmitted&&this._immediateClick.emit(d),this._pointerState.delete(c),this.stopCapturingPointer(d.native),0===this._pointerState.size&&this._moveHandle.pause())};return D}(g.InputHandler);e.DefaultParameters=x;e.PointerClickHoldAndDrag=g;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(e,l,k,g,q,x,y){const D={added:[],removed:[]},F=new Set,z=new y(0,0,0,0);return function(p){function d(m){var h=p.call(this)||this;h._tiles=new Map;h._index=g.rbush(9,k("esri-csp-restrictions")?b=>({minX:b.bounds[0],minY:b.bounds[1],maxX:b.bounds[2],maxY:b.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);h.tiles=[];h.tileScheme=m;return h}e._inheritsLoose(d,p);var c=d.prototype;c.destroy=function(){this.clear()};c.clear=function(){this.tiles.length=0;this._tiles.clear();
this._index.clear()};c.has=function(m){return this._tiles.has(m)};c.get=function(m){return this._tiles.get(m)};c.boundsIntersections=function(m){return this._index.search({minX:m[0],minY:m[1],maxX:m[2],maxY:m[3]})};c.updateTiles=function(m){const h={added:[],removed:[]};for(const b of m.added)if(!this.has(b)){const n=new q.Tile(this.tileScheme,b);this._tiles.set(b,n);this._index.insert(n);h.added.push(n)}for(const b of m.removed)this.has(b)&&(m=this.get(b),this._tiles.delete(b),this._index.remove(m),
h.removed.push(m));this.tiles.length=0;this._tiles.forEach(b=>this.tiles.push(b));(h.added.length||h.removed.length)&&this.emit("update",h)};c.setViewState=function(m){if(m=this.tileScheme.getTileCoverage(m,0)){var {spans:h,lodInfo:b}=m,{level:n}=b;if(0<h.length)for(const {row:r,colFrom:u,colTo:C}of h)for(var t=u;t<=C;t++){const I=z.set(n,r,b.normalizeCol(t),b.getWorldForColumn(t)).id;F.add(I);if(!this.has(I)){const w=new q.Tile(this.tileScheme,I);this._tiles.set(I,w);this._index.insert(w);this.tiles.push(w);
D.added.push(w)}}for(n=this.tiles.length-1;0<=n;n--)t=this.tiles[n],F.has(t.id)||(this._tiles.delete(t.id),this.tiles.splice(n,1),this._index.remove(t),D.removed.push(t));(D.added.length||D.removed.length)&&this.emit("update",D);x.pool.release(m);F.clear();D.added.length=0;D.removed.length=0}};return d}(l)})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(e,l){function k(h,b){if(!(this instanceof k))return new k(h,b);this._maxEntries=Math.max(4,h||9);this._minEntries=Math.max(2,
Math.ceil(.4*this._maxEntries));b&&("function"===typeof b?this.toBBox=b:this._initFormat(b));this.clear()}function g(h,b){q(h,0,h.children.length,b,h)}function q(h,b,n,t,r){r||(r=c(null));r.minX=Infinity;r.minY=Infinity;r.maxX=-Infinity;r.maxY=-Infinity;for(var u;b<n;b++)u=h.children[b],x(r,h.leaf?t(u):u);return r}function x(h,b){h.minX=Math.min(h.minX,b.minX);h.minY=Math.min(h.minY,b.minY);h.maxX=Math.max(h.maxX,b.maxX);h.maxY=Math.max(h.maxY,b.maxY);return h}function y(h,b){return h.minX-b.minX}
function D(h,b){return h.minY-b.minY}function F(h){return(h.maxX-h.minX)*(h.maxY-h.minY)}function z(h){return h.maxX-h.minX+(h.maxY-h.minY)}function p(h,b){return h.minX<=b.minX&&h.minY<=b.minY&&b.maxX<=h.maxX&&b.maxY<=h.maxY}function d(h,b){return b.minX<=h.maxX&&b.minY<=h.maxY&&b.maxX>=h.minX&&b.maxY>=h.minY}function c(h){return{children:h,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function m(h,b,n,t,r){for(var u=[b,n],C;u.length;)n=u.pop(),b=u.pop(),n-b<=t||(C=
b+Math.ceil((n-b)/t/2)*t,l.quickselect(h,C,b,n,r),u.push(b,C,C,n))}k.prototype={all:function(){return this._all(this.data,[])},search:function(h){var b=this.data,n=[],t=this.toBBox;if(!d(h,b))return n;for(var r=[],u,C,I,w;b;){u=0;for(C=b.children.length;u<C;u++)I=b.children[u],w=b.leaf?t(I):I,d(h,w)&&(b.leaf?n.push(I):p(h,w)?this._all(I,n):r.push(I));b=r.pop()}return n},collides:function(h){var b=this.data,n=this.toBBox;if(!d(h,b))return!1;for(var t=[],r,u,C,I;b;){r=0;for(u=b.children.length;r<u;r++)if(C=
b.children[r],I=b.leaf?n(C):C,d(h,I)){if(b.leaf||p(h,I))return!0;t.push(C)}b=t.pop()}return!1},load:function(h){if(!h||!h.length)return this;if(h.length<this._minEntries){for(var b=0,n=h.length;b<n;b++)this.insert(h[b]);return this}h=this._build(h.slice(),0,h.length-1,0);this.data.children.length?this.data.height===h.height?this._splitRoot(this.data,h):(this.data.height<h.height&&(b=this.data,this.data=h,h=b),this._insert(h,this.data.height-h.height-1,!0)):this.data=h;return this},insert:function(h){h&&
this._insert(h,this.data.height-1);return this},clear:function(){this.data=c([]);return this},remove:function(h,b){if(!h)return this;for(var n=this.data,t=this.toBBox(h),r=[],u=[],C,I,w,f;n||r.length;){n||(n=r.pop(),I=r[r.length-1],C=u.pop(),f=!0);if(n.leaf){a:{w=h;var B=n.children,K=b;if(K){for(var P=0;P<B.length;P++)if(K(w,B[P])){w=P;break a}w=-1}else w=B.indexOf(w)}if(-1!==w){n.children.splice(w,1);r.push(n);this._condense(r);break}}f||n.leaf||!p(n,t)?I?(C++,n=I.children[C],f=!1):n=null:(r.push(n),
u.push(C),C=0,I=n,n=n.children[0])}return this},toBBox:function(h){return h},compareMinX:y,compareMinY:D,toJSON:function(){return this.data},fromJSON:function(h){this.data=h;return this},_all:function(h,b){for(var n=[];h;)h.leaf?b.push.apply(b,h.children):n.push.apply(n,h.children),h=n.pop();return b},_build:function(h,b,n,t){var r=n-b+1,u=this._maxEntries;if(r<=u){var C=c(h.slice(b,n+1));g(C,this.toBBox);return C}t||(t=Math.ceil(Math.log(r)/Math.log(u)),u=Math.ceil(r/Math.pow(u,t-1)));C=c([]);C.leaf=
!1;C.height=t;r=Math.ceil(r/u);u=r*Math.ceil(Math.sqrt(u));var I;for(m(h,b,n,u,this.compareMinX);b<=n;b+=u){var w=Math.min(b+u-1,n);m(h,b,w,r,this.compareMinY);for(I=b;I<=w;I+=r){var f=Math.min(I+r-1,w);C.children.push(this._build(h,I,f,t-1))}}g(C,this.toBBox);return C},_chooseSubtree:function(h,b,n,t){for(var r,u,C,I,w,f,B,K;;){t.push(b);if(b.leaf||t.length-1===n)break;B=K=Infinity;r=0;for(u=b.children.length;r<u;r++)C=b.children[r],w=F(C),f=(Math.max(C.maxX,h.maxX)-Math.min(C.minX,h.minX))*(Math.max(C.maxY,
h.maxY)-Math.min(C.minY,h.minY))-w,f<K?(K=f,B=w<B?w:B,I=C):f===K&&w<B&&(B=w,I=C);b=I||b.children[0]}return b},_insert:function(h,b,n){var t=this.toBBox;n=n?h:t(h);t=[];var r=this._chooseSubtree(n,this.data,b,t);r.children.push(h);for(x(r,n);0<=b;)if(t[b].children.length>this._maxEntries)this._split(t,b),b--;else break;this._adjustParentBBoxes(n,t,b)},_split:function(h,b){var n=h[b],t=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,t);t=this._chooseSplitIndex(n,r,t);t=c(n.children.splice(t,
n.children.length-t));t.height=n.height;t.leaf=n.leaf;g(n,this.toBBox);g(t,this.toBBox);b?h[b-1].children.push(t):this._splitRoot(n,t)},_splitRoot:function(h,b){this.data=c([h,b]);this.data.height=h.height+1;this.data.leaf=!1;g(this.data,this.toBBox)},_chooseSplitIndex:function(h,b,n){var t,r;var u=r=Infinity;for(t=b;t<=n-b;t++){var C=q(h,0,t,this.toBBox);var I=q(h,t,n,this.toBBox);var w=Math.max(0,Math.min(C.maxX,I.maxX)-Math.max(C.minX,I.minX))*Math.max(0,Math.min(C.maxY,I.maxY)-Math.max(C.minY,
I.minY));C=F(C)+F(I);if(w<u){u=w;var f=t;r=C<r?C:r}else w===u&&C<r&&(r=C,f=t)}return f},_chooseSplitAxis:function(h,b,n){var t=h.leaf?this.compareMinX:y,r=h.leaf?this.compareMinY:D,u=this._allDistMargin(h,b,n,t);b=this._allDistMargin(h,b,n,r);u<b&&h.children.sort(t)},_allDistMargin:function(h,b,n,t){h.children.sort(t);t=this.toBBox;var r=q(h,0,b,t),u=q(h,n-b,n,t),C=z(r)+z(u),I;for(I=b;I<n-b;I++){var w=h.children[I];x(r,h.leaf?t(w):w);C+=z(r)}for(I=n-b-1;I>=b;I--)w=h.children[I],x(u,h.leaf?t(w):w),
C+=z(u);return C},_adjustParentBBoxes:function(h,b,n){for(;0<=n;n--)x(b[n],h)},_condense:function(h){for(var b=h.length-1,n;0<=b;b--)0===h[b].children.length?0<b?(n=h[b-1].children,n.splice(n.indexOf(h[b]),1)):this.clear():g(h[b],this.toBBox)},_initFormat:function(h){var b=["return a"," - b",";"];this.compareMinX=new Function("a","b",b.join(h[0]));this.compareMinY=new Function("a","b",b.join(h[1]));this.toBBox=new Function("a","return {minX: a"+h[0]+", minY: a"+h[1]+", maxX: a"+h[2]+", maxY: a"+h[3]+
"};")}};e.rbush=k})},"esri/chunks/quickselect":function(){define(["exports"],function(e){var l={exports:{}};(function(k){(function(g){g=g();void 0!==g&&(k.exports=g)})(function(){function g(y,D,F,z,p){for(;z>F;){if(600<z-F){var d=z-F+1,c=D-F+1,m=Math.log(d),h=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*h*(d-h)/d)*(0>c-d/2?-1:1);g(y,D,Math.max(F,Math.floor(D-c*h/d+m)),Math.min(z,Math.floor(D+(d-c)*h/d+m)),p)}d=y[D];c=F;h=z;q(y,F,D);for(0<p(y[z],d)&&q(y,F,z);c<h;){q(y,c,h);c++;for(h--;0>p(y[c],d);)c++;for(;0<
p(y[h],d);)h--}0===p(y[F],d)?q(y,F,h):(h++,q(y,h,z));h<=D&&(F=h+1);D<=h&&(z=h-1)}}function q(y,D,F){var z=y[D];y[D]=y[F];y[F]=z}function x(y,D){return y<D?-1:y>D?1:0}return function(y,D,F,z,p){g(y,D,F||0,z||y.length-1,p||x)}})})(l);e.quickselect=l.exports})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(e,l,k,g,q,x,y){let D=function(){function F(p,d){this.key=new y(0,0,0,0);this.bounds=q.create();this.objectIds=new Set;this.key.set(d);d=p.getLODInfoAt(this.key);this.tileInfoView=p;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=d.resolution;this.scale=d.scale;this.level=d.level}var z=F.prototype;z.createChildTiles=function(){const p=this.key.getChildKeys(),d=k.acquire();for(let c=0;c<p.length;c++)d[c]=new F(this.tileInfoView,p[c]);return d};z.getQuantizationParameters=
function(){return x.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};l._createClass(F,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return g.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,
this.resolution],translate:[this.bounds[0],this.bounds[3]]}}}]);return F}();e.Tile=D;e.default=D;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,k,g,q,x,y,D,F){let z=0;g=function(p){function d(){var c=p.apply(this,arguments)||this;c.color=new k([0,255,255]);c.haloOpacity=1;c.fillOpacity=.25;return c}e._inheritsLoose(d,p);e._createClass(d,[{key:"version",get:function(){return z++}}]);return d}(g);l.__decorate([q.property({readOnly:!0})],g.prototype,"version",null);l.__decorate([q.property({type:k})],g.prototype,"color",void 0);l.__decorate([q.property({type:k})],g.prototype,"haloColor",void 0);l.__decorate([q.property()],g.prototype,
"haloOpacity",void 0);l.__decorate([q.property()],g.prototype,"fillOpacity",void 0);return g=l.__decorate([F.subclass("esri.views.2d.support.HighlightOptions")],g)})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(e){let l=function(){function k(){this._names=new Map}var g=k.prototype;g.begin=function(q){this._names.has(q)||(this._names.set(q,!1),-1!==q.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${q}.Start`))};g.end=function(q){this._names.has(q)&&
!this._names.get(q)&&(this._names.set(q,!0),performance.mark(`Esri.${q}.End`))};g.record=function(q){this._names.has(q)||(this._names.set(q,!0),performance.mark(`Esri.${q}`))};return k}();e.Timeline=l;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/support/createScreenshotPlan":function(){define(function(){return function(e,l,k,g,q,x,y,D){e.ignorePadding&&(g={left:0,right:0,top:0,bottom:0});var F;null!=e.width&&null!=e.height?F=[e.width,e.height]:null==e.width&&null!=e.height?F=[e.height,
e.height]:null!=e.width&&null==e.height?F=[e.width,e.width]:null==e.width&&null==e.height&&(F=null);var z=k[0]-(g.left+g.right);k=k[1]-(g.top+g.bottom);e=e.area||{x:0,y:0,width:z,height:k};if(F){const p=F[0]/F[1];p>z/k?(z=e.width/p,e={x:e.x,y:Math.round(e.y+(e.height-z)/2),width:e.width,height:Math.round(z)}):(z=e.height*p,e={x:Math.round(e.x+(e.width-z)/2),y:e.y,width:Math.round(z),height:e.height})}else F=[e.width,e.height];F[0]>e.width?(l=Math.min(F[0]/e.width,l),F=F[0]/e.width/l):(l=1,F=F[0]/
e.width);return{resolutionScale:l,cropArea:{x:Math.round((e.x+g.left)*l),y:Math.round((e.y+g.top)*l),width:Math.round(e.width*l),height:Math.round(e.height*l)},outputScale:F,format:q,quality:x,children:y,rotation:D}}})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils"],function(e,l,k){function g(b,n){const {format:t,quality:r,rotation:u,disableDecorations:C}=b||{};var I=F(b,n.padding);var w=n.width-I.left-I.right;n=n.height-I.top-I.bottom;I=
{x:0,y:0,width:w,height:n};if(b&&b.area){null!=b.area.x&&(I.x=Math.floor(b.area.x));null!=b.area.y&&(I.y=Math.floor(b.area.y));var f=null!=b.area.width?Math.floor(b.area.width):null,B=null!=b.area.height?Math.floor(b.area.height):null;I.width=w-I.x;I.height=n-I.y;null!=f&&null!=B?(I.width=Math.min(I.width,f),I.height=Math.min(I.height,B)):null==f&&null!=B?(f=Math.min(I.width,f),I.height*=f/I.width,I.width=f):null!=f&&null==B&&(f=Math.min(I.height,B),I.width*=f/I.height,I.height=f)}I=D(I,b);f=Math.floor(Math.max(I.x,
0));B=Math.floor(Math.max(I.y,0));w={x:f,y:B,width:Math.floor(Math.min(I.width,w-f)),height:Math.floor(Math.min(I.height,n-B))};n=w.width/w.height;I=I.width/I.height;I!==n&&(I>n?(n=Math.floor(w.width/I),w={x:w.x,y:Math.floor(w.y+(w.height-n)/2),width:w.width,height:n}):(n=Math.floor(w.height*I),w={x:Math.floor(w.x+(w.width-n)/2),y:w.y,width:n,height:w.height}));const {width:K,height:P}=y(b,w);n=z(t);I=m[n];I=k.clamp(null!=r?r:I,0,100);return{format:n,quality:I,area:w,width:K,height:P,rotation:u,disableDecorations:!!C,
ignoreBackground:!(!b||!b.ignoreBackground),ignorePadding:!(!b||!b.ignorePadding)}}function q(b,n){return b.toDataURL(c[n.format],n.quality/100)}function x(b,n,t){t||(p||(p=document.createElement("canvas"),p.width=1,p.height=1),t=p);return t.getContext("2d").createImageData(b,n)}function y(b,n){if(!b)return n;const t=b.width;b=b.height;if(null!=t&&null!=b)return{width:Math.floor(t),height:Math.floor(b)};if(null==t&&null==b)return n;n=n.width/n.height;return null==b?{width:Math.floor(t),height:Math.floor(t/
n)}:{width:Math.floor(b*n),height:Math.floor(b)}}function D(b,n){if(!n||null==n.width||null==n.height)return b;n=n.width/n.height;const t=b.width/b.height;if(t===n)return b;if(t<n)return n=Math.floor(b.height*n),b.x-=(n-b.width)/2,b.width=n,b;n=Math.floor(b.width/n);b.y-=(n-b.height)/2;b.height=n;return b}function F(b,n){return!n||b&&b.ignorePadding?h:n}function z(b){switch(b){case "png":case "jpg":case "jpeg":return b;case null:case void 0:return"png";default:return"png"}}let p=null,d=!0;const c=
{png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},m={png:100,jpg:98,jpeg:98},h={top:0,right:0,bottom:0,left:0};e.completeUserSettings=g;e.createEmptyImageData=function(b,n,t){if(!b||!n)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(b,n)}catch(r){d=!1}return x(b,n,t)};e.encodeResult=function(b,n,t,r){if(r.premultipliedAlpha){{var u=b.data;const I=u.length;for(let w=0;w<I;w+=4){var C=u[w+3];0<C&&(C/=255,u[w+0]/=C,u[w+1]/=C,u[w+2]/=C)}}}t.width=b.width;
t.height=b.height;u=t.getContext("2d");u.putImageData(b,0,0);r.flipY&&(u.save(),u.globalCompositeOperation="copy",u.scale(1,-1),u.translate(0,-u.canvas.height),u.drawImage(u.canvas,0,0),u.restore());b=u.getImageData(0,0,b.width,b.height);n=q(t,n);t.width=0;t.height=0;return{dataUrl:n,data:b}};e.getFormatAndQuality=function(b,n){b=z(b);const t=m[b];n=k.clamp(null!=n?n:t,0,100);return{format:b,quality:n}};e.getMaximumResolutionScale=function(b,n){return n/Math.max(b[0],b[1])};e.resampleHermite=function(b,
n,t,r=0,u=0,C=b.width-r,I=b.height-u,w=!1){const {data:f}=b,{width:B,height:K,data:P}=n;C/=B;I/=K;const T=Math.ceil(C/2),X=Math.ceil(I/2);b=b.width;for(let R=0;R<K;R++)for(let aa=0;aa<B;aa++){const H=4*(aa+(w?K-R-1:R)*B);let N=0,Q=0,v=0,E=0,G=0,S=0;const da=(R+.5)*I;for(let fa=Math.floor(R*I);fa<(R+1)*I;fa++){var W=Math.abs(da-(fa+.5))/X;const la=(aa+.5)*C;W*=W;for(let na=Math.floor(aa*C);na<(aa+1)*C;na++){var L=Math.abs(la-(na+.5))/T;L=Math.sqrt(W+L*L);if(1<=L)continue;L=2*L*L*L-3*L*L+1;const oa=
4*(r+na+(u+fa)*b);S+=L*f[oa+3];Q+=L;!t&&255>f[oa+3]&&(L=L*f[oa+3]/255);v+=L*f[oa];E+=L*f[oa+1];G+=L*f[oa+2];N+=L}}P[H]=v/N;P[H+1]=E/N;P[H+2]=G/N;P[H+3]=S/Q}return n};e.screenshotSuperSampleSettings=function(b,n,t){if(!n)return b;const {framebufferWidth:r,framebufferHeight:u,pixelRatio:C,region:I}=b;n=F(b,t);t=n.left+n.right;const w=n.top+n.bottom,f=r-t,B=u-w,K=Math.min(8,Math.min((2048-t)/f,(2048-w)/B));return 1.5>K?b:{...b,framebufferWidth:Math.round(f*K)+t,framebufferHeight:Math.round(B*K)+w,pixelRatio:C*
K,resample:{region:{x:Math.round((I.x-n.left)*K)+n.left,y:Math.round((I.y-n.top)*K)+n.top,width:Math.round(I.width*K),height:Math.round(I.height*K)},width:r,height:u}}};e.toDataUrl=q;e.toRenderSettings=function(b,n){const t=g(b,n),r=t.area,u=t.width/r.width,C=F(t,n.padding),I=C.left+C.right,w=C.top+C.bottom;return{framebufferWidth:Math.floor((n.width-I)*u+I),framebufferHeight:Math.floor((n.height-w)*u+w),region:{x:Math.floor(r.x*u)+C.left,y:Math.floor(r.y*u)+C.top,width:t.width,height:t.height},format:t.format,
quality:t.quality,rotation:t.rotation,pixelRatio:u,layers:b&&b.layers?b.layers:[],disableDecorations:t.disableDecorations,ignoreBackground:t.ignoreBackground,ignorePadding:t.ignorePadding}};e.wrapImageData=function(b,n,t,r){if(!n||!t)throw Error("Cannot construct image data without dimensions");if(d)try{return new ImageData(b,n,t)}catch(u){d=!1}n=x(n,t,r);n.data.set(b,0);return n};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/support/WebGLRequirements":function(){define(["exports",
"../../core/Error","../webgl/capabilities","../webgl/context-util"],function(e,l,k,g){e.check=function(q){var x;a:{for(x=g.getContextTypes(q);1<x.length;){const y=k.getWebGLCapabilities(x.shift());if(y.available){x=y;break a}}x=k.getWebGLCapabilities(x.shift())}if(!x.available)return new l("webgl:required","WebGL is required but not supported.");if("3d"===q&&x.majorPerformanceCaveat)return new l("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");
if(!x.supportsHighPrecisionFragment)return new l("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!x.supportsVertexShaderSamplers)return new l("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(x.type===g.ContextType.WEBGL1){if(!x.supportsElementIndexUint)return new l("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");
if(!x.supportsStandardDerivatives)return new l("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!x.supportsInstancedArrays)return new l("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/webgl/capabilities":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","./context-util"],
function(e,l,k,g){function q(){if(!D){{const c=new p,m=y(g.ContextType.WEBGL1,c);k.isNone(m)||(c.supportsElementIndexUint=null!==m.getExtension("OES_element_index_uint"),c.supportsStandardDerivatives=null!==m.getExtension("OES_standard_derivatives"),c.supportsInstancedArrays=null!==m.getExtension("ANGLE_instanced_arrays"),c.supportsTextureFloat=null!==m.getExtension("OES_texture_float"));D=c}}return D}function x(){if(!F){{const c=new d,m=y(g.ContextType.WEBGL2,c);k.isNone(m);F=c}}return F}function y(c,
m){const h=document.createElement("canvas");if(!h)return null;let b=g.createContext(h,c,{failIfMajorPerformanceCaveat:!0});k.isNone(b)&&(b=g.createContext(h,c),k.isSome(b)&&(m.majorPerformanceCaveat=!0));if(k.isNone(b))return b;if(c===g.ContextType.WEBGL1){if(c=b.getParameter(b.VERSION),c=null==c?void 0:c.match(/^WebGL\s+([\d.]*)/))c=parseFloat(c[1]),m.available=.94<=c}else m.available=!0;m.maxTextureSize=b.getParameter(b.MAX_TEXTURE_SIZE);m.supportsVertexShaderSamplers=0<b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
if(c=b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.HIGH_FLOAT))m.supportsHighPrecisionFragment=0<c.precision;return b}let D,F,z=function(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=0;this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1},p=function(c){function m(){var h=c.apply(this,arguments)||this;h.type=g.ContextType.WEBGL1;h.supportsElementIndexUint=!1;h.supportsStandardDerivatives=!1;h.supportsInstancedArrays=!1;h.supportsTextureFloat=!1;return h}l._inheritsLoose(m,
c);return m}(z),d=function(c){function m(){var h=c.apply(this,arguments)||this;h.type=g.ContextType.WEBGL2;return h}l._inheritsLoose(m,c);return m}(z);e.WebGL1Capabilities=p;e.WebGL2Capabilities=d;e.getWebGL1Capabilities=q;e.getWebGL2Capabilities=x;e.getWebGLCapabilities=function(c){switch(c){case g.ContextType.WEBGL1:return q();case g.ContextType.WEBGL2:return x()}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/webgl/context-util":function(){define(["exports","../../core/has","../../core/maybe"],
function(e,l,k){function g(D){const F=l("esri-force-webgl");if(F===e.ContextType.WEBGL1||F===e.ContextType.WEBGL2)return[F];switch(D){case "2d":return[e.ContextType.WEBGL1];case "3d":return[e.ContextType.WEBGL2,e.ContextType.WEBGL1]}}function q(D,F,z={}){if(!window.WebGLRenderingContext)return y(D,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;F=x(D,F,z);k.isNone(F)&&y(D,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e');
return F}function x(D,F,z={}){F=F===e.ContextType.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let p=null;for(const d of F){try{p=D.getContext(d,z)}catch(c){}if(p)break}return p}function y(D,F){(D=D.parentNode)&&(D.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+F+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}
e.ContextType=void 0;(function(D){D[D.WEBGL1=1]="WEBGL1";D[D.WEBGL2=2]="WEBGL2"})(e.ContextType||(e.ContextType={}));e.createContext=x;e.createContextOrErrorHTML=function(D,F,z={}){for(D=g(D);1<D.length;){const p=x(F,D.shift(),z);if(k.isSome(p))return p}return q(F,D.shift(),z)};e.getContextTypes=g;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),
function(e,l,k,g,q,x,y,D){g=function(F){function z(p){p=F.call(this,p)||this;p.components=["attribution","zoom"];return p}e._inheritsLoose(z,F);return z}(D);l.__decorate([k.property()],g.prototype,"components",void 0);return g=l.__decorate([y.subclass("esri.views.ui.2d.DefaultUI2D")],g)})},"esri/views/ui/DefaultUI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h){g.getLogger("esri.views.ui.DefaultUI");k=function(b){function n(r){r=b.call(this,r)||this;r._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};r.components=[];return r}e._inheritsLoose(n,b);var t=n.prototype;t.initialize=function(){this._handles.add([q.watch(()=>this.components,this._componentsWatcher.bind(this),q.initial),q.watch(()=>this.view,this._updateViewAwareWidgets.bind(this),q.initial)])};
t._add=function(r,u,C,I){if("string"===typeof r&&this._defaultPositionLookup[r]){if(this._find(r))return;r=this._createComponent(r)}b.prototype._add.call(this,r,u,C,I)};t._removeComponents=function(r){r.forEach(u=>{if(u=this._find(u))this.remove(u),u.destroy()})};t._updateViewAwareWidgets=function(r){this.components.forEach(u=>{(u=(u=this._find(u))&&u.widget)&&void 0!==u.view&&(u.view=r)})};t._componentsWatcher=function(r,u){this._removeComponents(u);this._addComponents(r);this._adjustPadding(r)};
t._adjustPadding=function(r){-1!==r.indexOf("attribution")||this._isOverridden("padding")||({top:r}=this.padding,this.padding=r)};t._addComponents=function(r){this.initialized&&r.forEach(u=>this.add(this._createComponent(u),this._defaultPositionLookup[u]))};t._createComponent=function(r){const u=this._createWidget(r);if(u)return new z({id:r,node:u})};t._createWidget=function(r){if("attribution"===r)return this._createAttribution();if("compass"===r)return this._createCompass();if("navigation-toggle"===
r)return this._createNavigationToggle();if("zoom"===r)return this._createZoom()};t._createAttribution=function(){return new d({view:this.view})};t._createCompass=function(){return new c({view:this.view})};t._createNavigationToggle=function(){return new m({view:this.view})};t._createZoom=function(){return new h({view:this.view})};return n}(p);l.__decorate([x.property()],k.prototype,"components",void 0);return k=l.__decorate([F.subclass("esri.views.ui.DefaultUI")],k)})},"esri/views/ui/Component":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,k,g,q,x,y,D,F){k=function(z){function p(){var c=z.apply(this,arguments)||this;c.widget=null;return c}e._inheritsLoose(p,z);var d=p.prototype;d.destroy=function(){this.widget&&this.widget.destroy();this.node=null};d.castNode=function(c){if(!c)return this._set("widget",null),null;if("string"===typeof c||c&&"nodeType"in c)return this._set("widget",null),g.byId(c);c&&"function"===typeof c.render&&!c.domNode&&(c.domNode=document.createElement("div"));this._set("widget",c);return c.domNode};
e._createClass(p,[{key:"id",get:function(){return this.get("widget.id")||this.get("node.id")}},{key:"node",set:function(c){const m=this._get("node");c!==m&&(c&&c.classList.add("esri-component"),m&&m.classList.remove("esri-component"),this._set("node",c))}}]);return p}(k);l.__decorate([q.property({dependsOn:[]})],k.prototype,"id",null);l.__decorate([q.property()],k.prototype,"node",null);l.__decorate([D.cast("node")],k.prototype,"castNode",null);l.__decorate([q.property({readOnly:!0})],k.prototype,
"widget",void 0);return k=l.__decorate([F.subclass("esri.views.ui.Component")],k)})},"esri/views/ui/UI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./Component ../../widgets/support/widgetUtils ../../core/Logger ../../widgets/support/widgetThemeUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h){function b(u){const C="object"===typeof u&&null!==u&&Object.getPrototypeOf(u);return null!==C&&C!==Object.prototype||!("component"in u||"index"in u||"position"in u)?null:u}function n(u,{top:C,bottom:I,left:w,right:f}){u.style.top=C;u.style.bottom=I;u.style.left=w;u.style.right=f}const t={left:0,top:0,bottom:0,right:0},r={bottom:30,top:15,right:15,left:15};g=function(u){function C(w){var f=u.call(this,w)||this;f._cornerNameToContainerLookup={};f._positionNameToContainerLookup=
{};f._components=[];f._componentToKey=new Map;f._handles=new q;f.view=null;f._applyViewPadding=()=>{const B=f.container;B&&n(B,f._toPxPosition(f._getViewPadding()))};f._applyUIPadding=()=>{const B=f._innerContainer;B&&n(B,f._toPxPosition(f.padding))};f._initContainers();return f}e._inheritsLoose(C,u);var I=C.prototype;I.initialize=function(){this._handles.add([x.watch(()=>{var w;return[null==(w=this.view)?void 0:w.padding,this.container]},this._applyViewPadding,x.initial),x.watch(()=>this.padding,
this._applyUIPadding,x.initial)])};I.destroy=function(){this.container=null;for(const w of this._components)w.destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};I.castPadding=function(w){return"number"===typeof w?{bottom:w,top:w,right:w,left:w}:{...r,...w}};I.add=function(w,f){let B,K;if(Array.isArray(w))w.forEach(T=>this.add(T,f));else{var P=b(w);P&&({index:B,position:f,component:w,key:K}=P);f&&"object"===typeof f&&({index:B,key:K,position:f}=f);!w||f&&!this._isValidPosition(f)||
this._add(w,f,B,K)}};I.remove=function(w,f){if(w){if(Array.isArray(w))return w.map(P=>this.remove(P,f));var B=this._find(w);if(B){var K=this._componentToKey;if(!K.has(w)||K.get(w)===f)return K=this._components.indexOf(B),B.node.parentNode&&B.node.parentNode.removeChild(B.node),this._componentToKey.delete(w),this._components.splice(K,1)[0]}}};I.empty=function(w){if(Array.isArray(w))return w.map(f=>this.empty(f)).reduce((f,B)=>f.concat(B));w=w||"manual";return"manual"===w?Array.prototype.slice.call(this._manualContainer.children).filter(f=>
!f.classList.contains("esri-ui-corner")).map(f=>this.remove(f)):this._isValidPosition(w)?Array.prototype.slice.call(this._cornerNameToContainerLookup[w].children).map(this.remove,this):null};I.move=function(w,f){Array.isArray(w)&&w.forEach(P=>this.move(P,f));if(w){var B=b(w)||b(f);if(B){var K=B.index;f=B.position;w=B.component||w}(!f||this._isValidPosition(f))&&(w=this.remove(w))&&this.add(w,{position:f,index:K})}};I.find=function(w){return w?(w=this._findById(w))&&(w.widget||w.node):null};I.getPosition=
function(w){for(const f in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[f].contains(w))return f;return null};I._add=function(w,f,B,K){w instanceof d||(w=new d({node:w}));this._place({component:w,position:f,index:B});this._components.push(w);K&&this._componentToKey.set(w,K)};I._find=function(w){return w?w instanceof d?this._findByComponent(w):"string"===typeof w?this._findById(w):this._findByNode(w.domNode||w):null};I._getViewPadding=function(){return this.get("view.padding")||
t};I._attachContainers=function(w){w.appendChild(this._innerContainer);w.appendChild(this._manualContainer)};I._initContainers=function(){var w=document.createElement("div");w.classList.add("esri-ui-inner-container");w.classList.add("esri-ui-corner-container");const f=document.createElement("div");f.classList.add("esri-ui-inner-container");f.classList.add("esri-ui-manual-container");const B=document.createElement("div");B.classList.add("esri-ui-top-left");B.classList.add("esri-ui-corner");w.appendChild(B);
const K=document.createElement("div");K.classList.add("esri-ui-top-right");K.classList.add("esri-ui-corner");w.appendChild(K);const P=document.createElement("div");P.classList.add("esri-ui-bottom-left");P.classList.add("esri-ui-corner");w.appendChild(P);const T=document.createElement("div");T.classList.add("esri-ui-bottom-right");T.classList.add("esri-ui-corner");w.appendChild(T);this._innerContainer=w;this._manualContainer=f;w=c.isRTL();this._cornerNameToContainerLookup={"top-left":B,"top-right":K,
"bottom-left":P,"bottom-right":T,"top-leading":w?K:B,"top-trailing":w?B:K,"bottom-leading":w?T:P,"bottom-trailing":w?P:T};this._positionNameToContainerLookup={manual:f,...this._cornerNameToContainerLookup}};I._isValidPosition=function(w){return!!this._positionNameToContainerLookup[w]};I._place=function(w){const f=w.component,B=w.index;w=this._positionNameToContainerLookup[w.position||"manual"];var K=-1<B,P=f.widget;P&&!P._started&&"function"===typeof P.postMixInProperties&&"function"===typeof P.buildRendering&&
"function"===typeof P.postCreate&&"function"===typeof P.startup&&f.widget.startup();K?(K=Array.prototype.slice.call(w.children),0===B?w.firstChild?k.insertBefore(f.node,w.firstChild):w.appendChild(f.node):B>=K.length?w.appendChild(f.node):k.insertBefore(f.node,K[B])):w.appendChild(f.node)};I._toPxPosition=function(w){return{top:this._toPxUnit(w.top),left:this._toPxUnit(w.left),right:this._toPxUnit(w.right),bottom:this._toPxUnit(w.bottom)}};I._toPxUnit=function(w){return 0===w?"0":w+"px"};I._findByComponent=
function(w){let f=null,B;this._components.some(K=>{(B=K===w)&&(f=K);return B});return f};I._findById=function(w){let f=null,B;this._components.some(K=>{(B=K.id===w)&&(f=K);return B});return f};I._findByNode=function(w){let f=null,B;this._components.some(K=>{(B=K.node===w)&&(f=K);return B});return f};e._createClass(C,[{key:"container",set:function(w){const f=this._get("container");w!==f&&(w&&(w.classList.add("esri-ui"),w.classList.add(h.getCalciteThemeClass()),this._attachContainers(w)),f&&(f.classList.remove("esri-ui"),
n(f,{top:"",bottom:"",left:"",right:""}),k.empty(f)),this._set("container",w))}},{key:"height",get:function(){const w=this.get("view.height")||0;if(0===w)return w;const f=this._getViewPadding();return Math.max(w-(f.top+f.bottom),0)}},{key:"padding",get:function(){return this._get("padding")},set:function(w){w?this._override("padding",w):this._clearOverride("padding")}},{key:"width",get:function(){const w=this.get("view.width")||0;if(0===w)return w;const f=this._getViewPadding();return Math.max(w-
(f.left+f.right),0)}}]);return C}(g.EventedAccessor);l.__decorate([y.property()],g.prototype,"container",null);l.__decorate([y.property()],g.prototype,"height",null);l.__decorate([y.property({value:r})],g.prototype,"padding",null);l.__decorate([z.cast("padding")],g.prototype,"castPadding",null);l.__decorate([y.property()],g.prototype,"view",void 0);l.__decorate([y.property()],g.prototype,"width",null);return g=l.__decorate([p.subclass("esri.views.ui.UI")],g)})},"esri/widgets/Attribution":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ./support/widgetUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h,b){q=function(n){function t(u,C){u=n.call(this,u,C)||this;u._isOpen=!1;u._attributionTextOverflowed=!1;u._prevSourceNodeHeight=0;u.iconClass="esri-icon-description";u.itemDelimiter=" | ";u.label=void 0;u.messages=null;u.view=null;u.viewModel=new p;return u}e._inheritsLoose(t,n);var r=t.prototype;r.initialize=function(){this.own(k.on(this,"viewModel.items","change",()=>this.scheduleRender()))};r.render=function(){return h.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",
{["esri-attribution--open"]:this._isOpen}),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};r.renderPoweredBy=function(){return h.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",h.tsx("a",{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))};r.renderSourcesNode=function(){const u=this._isOpen,C=this._isInteractive,I=C?0:-1,{attributionText:w}=this,f=C?"button":void 0;return h.tsx("div",
{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:u,["esri-interactive"]:C}),innerHTML:w,role:f,tabIndex:I})};r._afterSourcesNodeCreate=function(u){this._prevSourceNodeHeight=u.clientWidth};r._afterSourcesNodeUpdate=function(u){let C=!1;const {clientHeight:I,clientWidth:w,scrollWidth:f}=u;u=f>=w;const B=this._attributionTextOverflowed!==u;this._attributionTextOverflowed=u;
B&&(C=!0);this._isOpen&&(u=I<this._prevSourceNodeHeight,this._prevSourceNodeHeight=I,u&&(this._isOpen=!1,C=!0));C&&this.scheduleRender()};r._toggleState=function(){this._isInteractive&&(this._isOpen=!this._isOpen)};e._createClass(t,[{key:"_isInteractive",get:function(){return this._isOpen||this._attributionTextOverflowed}},{key:"attributionText",get:function(){return this.viewModel.items.reduce((u,C)=>{-1===u.indexOf(C.text)&&u.push(C.text);return u},[]).join(this.itemDelimiter)}}]);return t}(z);
l.__decorate([D.property()],q.prototype,"_isOpen",void 0);l.__decorate([D.property()],q.prototype,"_isInteractive",null);l.__decorate([D.property()],q.prototype,"_attributionTextOverflowed",void 0);l.__decorate([D.property()],q.prototype,"_prevSourceNodeHeight",void 0);l.__decorate([D.property({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],q.prototype,"attributionText",null);l.__decorate([D.property()],q.prototype,"iconClass",void 0);l.__decorate([D.property()],q.prototype,"itemDelimiter",
void 0);l.__decorate([D.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],q.prototype,"label",void 0);l.__decorate([D.property(),c.messageBundle("esri/widgets/Attribution/t9n/Attribution")],q.prototype,"messages",void 0);l.__decorate([g.aliasOf("viewModel.view")],q.prototype,"view",void 0);l.__decorate([D.property({type:p})],q.prototype,"viewModel",void 0);l.__decorate([d.accessibleHandler()],q.prototype,"_toggleState",null);return q=l.__decorate([F.subclass("esri.widgets.Attribution")],
q)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../geometry/SpatialReference".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h){function b(u,C){return u&&"copyright"in u&&(!C||"function"===typeof u.originOf&&"user"===u.originOf("copyright"))}function n(u,C){return u.length!==C.length||u.some((I,w)=>I.text!==C[w].text)}function t(u,C,I){I&&C&&(u.find(w=>w.layerView===C&&w.text===I)||u.push({text:I,layerView:C}))}const r=[];k=function(u){function C(w){var f=u.call(this,w)||this;f._clear=()=>{f._fetchedAttributionData.clear();f._pendingAttributions.clear();f.handles.remove("suspension");
f.notifyChange("state")};f._pendingAttributions=new Set;f._fetchedAttributionData=new Map;f.items=new q;f.view=null;f._allLayerViewsChange=B=>{f.handles.remove("suspension");const K=f.get("view.allLayerViews");K&&f.handles.add(K.map(P=>P.watch(["suspended","attributionVisible"],f._updateAttributionItems)),"suspension");B&&B.removed&&B.removed.forEach(P=>{f._pendingAttributions.delete(P);f._fetchedAttributionData.delete(P)});f._updateAttributionItems()};f._updateAttributionItems=()=>{const B=f.get("view.allLayerViews");
r.length=0;B?(B.forEach(K=>{if(!K.suspended&&K.get("layer.attributionVisible")){var P=K.layer;if(b(P,"user"))t(r,K,P.copyright);else if(P.hasAttributionData)if(f._fetchedAttributionData.has(K)){var T=f._fetchedAttributionData.get(K);T?t(r,K,f._getDynamicAttribution(T,f.view,P)):b(P)&&t(r,K,P.copyright)}else f._fetchAttributionData(K);else(T=P.get("portalItem.accessInformation"))?t(r,K,T):t(r,K,P.copyright)}}),n(f.items,r)&&(f.items.removeAll(),f.items.addMany(r)),r.length=0,f.notifyChange("state")):
f._clear()};f.handles.add([y.on(e._assertThisInitialized(f),"view.allLayerViews","change",f._allLayerViewsChange,f._allLayerViewsChange,f._clear),y.whenTrue(e._assertThisInitialized(f),"view.stationary",()=>f._updateAttributionItems())]);return f}e._inheritsLoose(C,u);var I=C.prototype;I.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()};I._fetchAttributionData=function(){var w=e._asyncToGenerator(function*(f){if(!this._pendingAttributions.has(f)){this._pendingAttributions.add(f);
var B=yield g.result(f.layer.fetchAttributionData());this._pendingAttributions.has(f)&&(B=B.ok?this._createContributionIndex(B.value,"bing-maps"===f.layer.type):null,this._pendingAttributions.delete(f),this._fetchedAttributionData.set(f,B));this._updateAttributionItems()}});return function(f){return w.apply(this,arguments)}}();I._createContributionIndex=function(w,f){w=w.contributors;const B={};if(!w)return B;for(let X=0;X<w.length;X++){const W=w[X];var K=W.coverageAreas;if(!K)return;for(const L of K){var P=
L.bbox,T=L.zoomMin-(f&&L.zoomMin?1:0);K=L.zoomMax-(f&&L.zoomMax?1:0);for(P={extent:m.geographicToWebMercator({xmin:P[1],ymin:P[0],xmax:P[3],ymax:P[2],spatialReference:h.WGS84}),attribution:W.attribution||"",score:null!=L.score?L.score:100,id:X};T<=K;T++)B[T]=B[T]||[],B[T].push(P)}}B.maxKey=Math.max.apply(null,Object.keys(B));return B};I._getDynamicAttribution=function(w,f,B){const {extent:K,scale:P}=f;B=B.tileInfo.scaleToZoom(P);B=Math.min(w.maxKey,Math.round(B));if(!K||null==B||-1>=B)return"";w=
w[B];const T=m.project(K.center.clone().normalize(),f.spatialReference),X={};return w?w.filter(W=>{const L=!X[W.id]&&T&&c.extentContainsPoint(W.extent,T);L&&(X[W.id]=!0);return L}).sort((W,L)=>L.score-W.score||W.objectId-L.objectId).map(W=>W.attribution).join(", "):""};e._createClass(C,[{key:"state",get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"}}]);return C}(x.HandleOwner);l.__decorate([D.property({readOnly:!0,type:q})],k.prototype,"items",
void 0);l.__decorate([D.property({readOnly:!0})],k.prototype,"state",null);l.__decorate([D.property()],k.prototype,"view",void 0);return k=l.__decorate([d.subclass("esri.widgets.Attribution.AttributionViewModel")],k)})},"esri/widgets/Compass":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ./support/widgetUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h){g=function(b){function n(r,u){r=b.call(this,r,u)||this;r.goToOverride=null;r.iconClass="esri-icon-locate-circled";r.label=void 0;r.messages=null;r.view=null;r.viewModel=new z;return r}e._inheritsLoose(n,b);var t=n.prototype;t.reset=function(){return this.viewModel.reset()};t.render=function(){const {orientation:r,state:u}=this.viewModel;var C="disabled"===u,I="compass"===("rotation"===u?"rotation":"compass");const w=C?-1:0;C={["esri-disabled"]:C,["esri-interactive"]:!C};
I={["esri-icon-compass"]:I,["esri-icon-dial"]:!I};const {messages:f}=this;return m.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",C),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:w,"aria-label":f.reset,title:f.reset},m.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",I),styles:this._toRotationTransform(r)}),m.tsx("span",{class:"esri-icon-font-fallback-text"},f.reset))};t._reset=function(){this.viewModel.reset()};t._toRotationTransform=
function(r){return{transform:`rotateZ(${r.z}deg)`}};return n}(F);l.__decorate([k.aliasOf("viewModel.goToOverride")],g.prototype,"goToOverride",void 0);l.__decorate([y.property()],g.prototype,"iconClass",void 0);l.__decorate([y.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],g.prototype,"label",void 0);l.__decorate([y.property(),d.messageBundle("esri/widgets/Compass/t9n/Compass")],g.prototype,"messages",void 0);l.__decorate([k.aliasOf("viewModel.view")],g.prototype,"view",void 0);
l.__decorate([y.property({type:z})],g.prototype,"viewModel",void 0);l.__decorate([p.accessibleHandler()],g.prototype,"_reset",null);return g=l.__decorate([D.subclass("esri.widgets.Compass")],g)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/GoTo".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p){k=function(d){function c(h){h=d.call(this,h)||this;h._handles=new g;h.orientation={x:0,y:0,z:0};h.view=null;h._updateForCamera=h._updateForCamera.bind(e._assertThisInitialized(h));h._updateForRotation=h._updateForRotation.bind(e._assertThisInitialized(h));h._updateRotationWatcher=h._updateRotationWatcher.bind(e._assertThisInitialized(h));return h}e._inheritsLoose(c,d);var m=c.prototype;m.initialize=function(){this._handles.add(q.init(this,"view",this._updateRotationWatcher))};
m.destroy=function(){this._handles.destroy();this.view=this._handles=null};m.reset=function(){if(this.get("view.ready")){var h={};"2d"===this.view.type?h.rotation=0:h.heading=0;this.callGoTo({target:h})}};m._updateForRotation=function(h){void 0!==h&&null!==h&&(this.orientation={z:h})};m._updateForCamera=function(h){h&&(this.orientation={x:0,y:0,z:-h.heading})};m._updateRotationWatcher=function(h){this._handles.removeAll();h&&("2d"===h.type?this._handles.add(q.init(this,"view.rotation",this._updateForRotation)):
this._handles.add(q.init(this,"view.camera",this._updateForCamera)))};e._createClass(c,[{key:"canShowNorth",get:function(){const h=this.get("view.spatialReference");return!(!h||!h.isWebMercator&&!h.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}}]);return c}(p.GoToMixin(k));l.__decorate([x.property({readOnly:!0})],k.prototype,"canShowNorth",null);l.__decorate([x.property()],k.prototype,"orientation",void 0);l.__decorate([x.property({readOnly:!0})],
k.prototype,"state",null);l.__decorate([x.property()],k.prototype,"view",void 0);return k=l.__decorate([z.subclass("esri.widgets.CompassViewModel")],k)})},"esri/widgets/NavigationToggle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ./support/widgetUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h){g=function(b){function n(r,u){r=b.call(this,r,u)||this;r.iconClass="esri-icon-pan2";r.label=void 0;r.messages=null;r.view=null;r.viewModel=new z;return r}e._inheritsLoose(n,b);var t=n.prototype;t.toggle=function(){return this.viewModel.toggle()};t.render=function(){const r="disabled"===this.get("viewModel.state");var u="pan"===this.get("viewModel.navigationMode");const C={["esri-navigation-toggle__button--active"]:u};u={["esri-navigation-toggle__button--active"]:!u};
const I=r?-1:0,w=this.messages.toggle;return m.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",{["esri-disabled"]:r,["esri-navigation-toggle--horizontal"]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:I,"aria-label":w,title:w},m.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",C)},m.tsx("span",{class:"esri-icon-pan"})),m.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",u)},m.tsx("span",{class:"esri-icon-rotate"})))};t._toggle=function(){this.toggle()};e._createClass(n,[{key:"layout",set:function(r){"horizontal"!==r&&(r="vertical");this._set("layout",r)}}]);return n}(F);l.__decorate([y.property()],g.prototype,"iconClass",void 0);l.__decorate([y.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],g.prototype,"label",void 0);l.__decorate([y.property({value:"vertical"})],g.prototype,"layout",null);l.__decorate([y.property(),
d.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],g.prototype,"messages",void 0);l.__decorate([k.aliasOf("viewModel.view")],g.prototype,"view",void 0);l.__decorate([y.property({type:z})],g.prototype,"viewModel",void 0);l.__decorate([p.accessibleHandler()],g.prototype,"_toggle",null);return g=l.__decorate([D.subclass("esri.widgets.NavigationToggle")],g)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,k,g,q,x,y,D,F,z){k=function(p){function d(m){m=p.call(this,m)||this;m._handles=new g;m.navigationMode="pan";m.view=null;return m}e._inheritsLoose(d,p);var c=d.prototype;c.initialize=function(){this._handles.add(q.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};c.destroy=function(){this._handles.destroy();this.view=this._handles=null};c.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};
c._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};e._createClass(d,[{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}}]);return d}(k);l.__decorate([x.property({readOnly:!0})],k.prototype,"state",null);l.__decorate([x.property()],k.prototype,"navigationMode",void 0);l.__decorate([x.property()],k.prototype,"view",void 0);return k=l.__decorate([z.subclass("esri.widgets.NavigationToggleViewModel")],
k)})},"esri/widgets/Zoom":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),function(e,l,k,g,q,x,y,D,F,z,p,d,c,m,h){g=function(b){function n(r,
u){r=b.call(this,r,u)||this;r.iconClass="esri-icon-zoom-in-magnifying-glass";r.label=void 0;r.messages=null;r.view=null;r.viewModel=new h;return r}e._inheritsLoose(n,b);var t=n.prototype;t.initialize=function(){this._zoomInButton=new m({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"});this._zoomOutButton=new m({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})};t.destroy=function(){this._zoomInButton.destroy();this._zoomOutButton.destroy();this._zoomOutButton=this._zoomInButton=
null};t.render=function(){const r=this.viewModel,u={["esri-zoom--horizontal"]:"horizontal"===this.layout};this._zoomInButton.enabled="ready"===r.state&&r.canZoomIn;this._zoomOutButton.enabled="ready"===r.state&&r.canZoomOut;this._zoomInButton.title=this.messages.zoomIn;this._zoomOutButton.title=this.messages.zoomOut;return c.tsx("div",{class:this.classes("esri-zoom esri-widget",u)},this._zoomInButton.render(),this._zoomOutButton.render())};t.zoomIn=function(){return this.viewModel.zoomIn()};t.zoomOut=
function(){return this.viewModel.zoomOut()};e._createClass(n,[{key:"layout",set:function(r){"horizontal"!==r&&(r="vertical");this._set("layout",r)}}]);return n}(F);l.__decorate([y.property()],g.prototype,"iconClass",void 0);l.__decorate([y.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],g.prototype,"label",void 0);l.__decorate([y.property({value:"vertical"})],g.prototype,"layout",null);l.__decorate([y.property(),p.messageBundle("esri/widgets/Zoom/t9n/Zoom")],g.prototype,"messages",
void 0);l.__decorate([k.aliasOf("viewModel.view")],g.prototype,"view",void 0);l.__decorate([y.property({type:h})],g.prototype,"viewModel",void 0);return g=l.__decorate([D.subclass("esri.widgets.Zoom")],g)})},"esri/widgets/Zoom/IconButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ../support/decorators/accessibleHandler ../../core/Logger ../support/jsxFactory ../support/widgetUtils".split(" "),
function(e,l,k,g,q,x,y,D,F,z,p,d){g=function(c){function m(){var b=c.apply(this,arguments)||this;b.enabled=!0;b.iconClass="";b.title="";return b}e._inheritsLoose(m,c);var h=m.prototype;h.render=function(){const b=this.enabled?0:-1,n={[this.iconClass]:!!this.iconClass};return p.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{["esri-disabled"]:!this.enabled,["esri-interactive"]:this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:b,
title:this.title},p.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",n)}),p.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};h._triggerAction=function(){this.action.call(this)};return m}(D);l.__decorate([k.property()],g.prototype,"action",void 0);l.__decorate([k.property()],g.prototype,"enabled",void 0);l.__decorate([k.property()],g.prototype,"iconClass",void 0);l.__decorate([k.property()],g.prototype,"title",void 0);l.__decorate([F.accessibleHandler()],
g.prototype,"_triggerAction",null);return g=l.__decorate([y.subclass("esri.widgets.IconButton")],g)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(e,l,k,g,q,x,
y,D,F,z,p){k=function(d){function c(h){h=d.call(this,h)||this;h.canZoomIn=!1;h.canZoomOut=!1;return h}e._inheritsLoose(c,d);var m=c.prototype;m.destroy=function(){this.view=null};m.zoomIn=function(){if(this.canZoomIn){var h=this.view;"2d"===h.type?h.mapViewNavigation.zoomIn():g.ignoreAbortErrors(h.goTo({zoomFactor:2}))}};m.zoomOut=function(){if(this.canZoomOut){var h=this.view;"2d"===h.type?h.mapViewNavigation.zoomOut():g.ignoreAbortErrors(h.goTo({zoomFactor:.5}))}};e._createClass(c,[{key:"state",
get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"view",set:function(h){h?"2d"===h.type?this._zoomConditions=new z({view:h}):"3d"===h.type&&(this._zoomConditions=new p({view:h})):this._zoomConditions=null;this._set("view",h)}}]);return c}(k);l.__decorate([q.property()],k.prototype,"_zoomConditions",void 0);l.__decorate([q.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],k.prototype,"canZoomIn",void 0);l.__decorate([q.property({aliasOf:"_zoomConditions.canZoomOut",
readOnly:!0})],k.prototype,"canZoomOut",void 0);l.__decorate([q.property({readOnly:!0})],k.prototype,"state",null);l.__decorate([q.property()],k.prototype,"view",null);return k=l.__decorate([F.subclass("esri.widgets.Zoom.ZoomViewModel")],k)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,k,g,q,x,y,D){k=function(F){function z(){return F.apply(this,arguments)||this}e._inheritsLoose(z,F);e._createClass(z,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;const p=this.get("view.animation.target.scale")||this.get("view.scale"),d=this.get("view.constraints.effectiveMaxScale");return 0===d||p>d}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;const p=this.get("view.animation.target.scale")||this.get("view.scale"),d=this.get("view.constraints.effectiveMinScale");
return 0===d||p<d}}]);return z}(k);l.__decorate([g.property({readOnly:!0})],k.prototype,"canZoomIn",null);l.__decorate([g.property({readOnly:!0})],k.prototype,"canZoomOut",null);l.__decorate([g.property()],k.prototype,"view",void 0);return k=l.__decorate([D.subclass("esri.widgets.Zoom.ZoomConditions2D")],k)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,k,g,q,x,y,D){k=function(F){function z(){return F.apply(this,arguments)||this}e._inheritsLoose(z,F);e._createClass(z,[{key:"canZoomIn",get:function(){return!!this.get("view.ready")}},{key:"canZoomOut",get:function(){return!!this.get("view.ready")}}]);return z}(k);l.__decorate([g.property({readOnly:!0})],k.prototype,"canZoomIn",null);l.__decorate([g.property({readOnly:!0})],k.prototype,"canZoomOut",null);l.__decorate([g.property()],k.prototype,"view",void 0);return k=l.__decorate([D.subclass("esri.widgets.Zoom.ZoomConditions3D")],
k)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(e,l,k,g,q,x,y,D){var F;g=F=function(z){function p(d){d=z.call(this,d)||this;d.color=new k([0,0,0,1]);return d}e._inheritsLoose(p,z);p.prototype.clone=function(){return new F(q.clone({color:this.color}))};
return p}(g.JSONSupport);l.__decorate([x.property({type:k,json:{write:!0}})],g.prototype,"color",void 0);return g=F=l.__decorate([D.subclass("esri.webmap.background.ColorBackground")],g)})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Graphic ../Viewpoint ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/iteratorUtils ../core/Logger ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/screenUtils ../core/Warning ../core/workers/workers ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/Point ../geometry/projection ../geometry/support/spatialReferenceUtils ../layers/support/TileInfo ./BreakpointsOwner ./DOMContainer ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling/PagedTileQueue ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/input/MapViewInputManager ./2d/layers/features/support/TileStore ./2d/support/HighlightOptions ./2d/support/Timeline ./support/createScreenshotPlan ./support/screenshotUtils ./support/screenUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground".split(" "),function(e,
l,k,g,q,x,y,D,F,z,p,d,c,m,h,b,n,t,r,u,C,I,w,f,B,K,P,T,X,W,L,R,aa,H,N,Q,v,E,G,S,da,fa,la,na,oa,sa,ta,M,V,ca,ha,ka){function pa(){return za.apply(this,arguments)}function za(){za=l._asyncToGenerator(function*(){const [,{GraphicsView2D:Ta,GraphicContainer:Va,LabelManager:Ca,MapViewNavigation:ba,MagnifierView2D:ia,Stage:qa}]=yield Promise.all([new Promise((wa,Aa)=>e(["./2d/webglDeps"],wa,Aa)),new Promise((wa,Aa)=>e(["./2d/mapViewDeps"],wa,Aa))]);Ia=Ta;kb=Va;Wa=Ca;sb=ba;qb=ia;Ea=qa});return za.apply(this,
arguments)}function Da(Ta){const Va=Ta.getObjectId();if(Va){var Ca,ba,ia,qa;return`${null!=(Ca=null!=(ba=null==(ia=Ta.layer)?void 0:ia.uid)?ba:null==(qa=Ta.sourceLayer)?void 0:qa.uid)?Ca:"MapView"}/${Va}`}return`"MapView/${Ta.uid}`}function Ba(Ta,Va,Ca,ba,ia){return qa=>{if(qa instanceof g){if(qa.layer===Ta)null==ia?void 0:ia();else{var wa=Ta.allLayerViews.find(Aa=>Aa.layer===qa.layer);wa&&(null==ba?void 0:ba(wa))}Ca(Da(qa))}else(wa=Ta.allLayerViews.find(Aa=>Aa.layer===qa))&&Va(wa)}}function Ga(Ta,
Va){if(Ta)if(z.isIterable(Ta))for(const Ca of Ta)if(z.isIterable(Ca))for(const ba of Ca)Va(ba);else Va(Ca);else Va(Ta)}const Ka=p.getLogger("esri.views.MapView");let Ea,Ia,kb,Wa,sb,qb;p=function(Ta){function Va(ba){var ia=Ta.call(this,ba)||this;ia._magnifierView=null;ia._stage=null;ia._resolveWhenReady=[];ia.rootLayerViews=new y({getCollections:()=>{var qa,wa;return[null==(qa=ia.basemapView)?void 0:qa.baseLayerViews,ia.layerViews,null==(wa=ia.basemapView)?void 0:wa.referenceLayerViews]},getChildrenFunction:()=>
null});ia.featuresTilingScheme=null;ia.fullOpacity=1;ia.graphicsView=null;ia.labelManager=null;ia.mapViewNavigation=null;ia.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};ia.rendering=!1;ia.supersampleScreenshotsEnabled=!1;ia.supportsGround=!1;ia._stationaryTimer=null;ia.frameTask=new aa(l._assertThisInitialized(ia));ia._pePromise=null;ia.floors=new x;ia.highlightOptions=new oa;ia.inputManager=new la({view:l._assertThisInitialized(ia)});
ia.map=null;ia.resizeAlign="center";ia.spatialReferenceLocked=!1;ia.timeline=new sa.Timeline;ia.type="2d";ia.ui=new ha;ia.constraints=new N;ia.padding={top:0,right:0,bottom:0,left:0};ia.handles.add([m.watch(()=>ia.viewpoint,()=>{ia._lastStationaryEventTimestamp=performance.now();ia._flipStationary(160)},m.sync),ia.on("resize",qa=>ia._resizeHandler(qa)),m.watch(()=>{var qa;return null==(qa=ia.animationManager)?void 0:qa.animation},qa=>{ia.animation=qa})]);n.initialize();return ia}l._inheritsLoose(Va,
Ta);var Ca=Va.prototype;Ca.destroy=function(){this._set("preconditionsReady",!1);this._gotoTask=this.frameTask=null;this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};Ca.goTo=function(ba,ia){if(ba)return this.animation&&(this.animation=null),this._createAnimation(),m.whenOnce(()=>this.ready,ia).then(()=>{const qa={animate:!0,...ia},wa=fa.create(ba,this);this.animation.update(wa);this._gotoTask={};return qa.animate?this._gotoAnimated(wa,qa):this._gotoImmediate(wa,
qa)});Ka.error("#goTo()","target cannot be null or undefined")};Ca.hitTest=function(){var ba=l._asyncToGenerator(function*(ia,qa){const wa=V.isSupportedScreenPointEvent(ia)?V.createScreenPointFromSupportedEvent(this,ia):ia;if(!this.ready||isNaN(wa.x)||isNaN(wa.y))return{screenPoint:wa,results:[]};let Aa=new Set,xa=!1,Ja=null,Ua=null;null!=qa&&qa.include?Ga(qa.include,Ba(this,La=>Aa.add(La),La=>{Ja||(Ja=new Set);Ja.add(La)},La=>Aa.add(La),()=>xa=!0)):(xa=!0,Aa=new Set(this.allLayerViews));null!=qa&&
qa.exclude&&Ga(qa.exclude,Ba(this,La=>Aa.delete(La),La=>{Ua||(Ua=new Set);Ua.add(La)}));ia=this.allLayerViews.filter(La=>!La.suspended&&Aa.has(La)).reverse();const Sa=this.toMap(wa);ia=(yield Promise.all([xa?this.graphicsView.hitTest(Sa):null,...ia.map(La=>La.hitTest(Sa,wa))])).filter(d.isSome).flat();Ja&&(ia=ia.filter(La=>Ja.has(Da(La))));Ua&&(ia=ia.filter(La=>!Ua.has(Da(La))));return{screenPoint:wa,results:ia.map(La=>({mapPoint:Sa,graphic:La}))}});return function(ia,qa){return ba.apply(this,arguments)}}();
Ca.takeScreenshot=function(ba){ba=ba||{};const ia=this.supersampleScreenshotsEnabled?Math.min(4,M.getMaximumResolutionScale(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let qa;ba.layers?(qa=[],ba.layers.forEach(xa=>{const Ja=this.allLayerViews.find(Ua=>Ua.layer.id===xa.id);Ja&&"container"in Ja&&Ja.container&&qa.push(Ja.container)})):qa=this._stage.children;const {format:wa,quality:Aa}=M.getFormatAndQuality(ba.format,ba.quality);ba=ta(ba,ia,this.size,this.padding,wa,Aa,
qa,ba.rotation);return this._stage.takeScreenshot(ba)};Ca.toMap=function(ba){if(!this.ready)return null;ba=V.isSupportedScreenPointEvent(ba)?V.createScreenPointFromSupportedEvent(this,ba):ba;const [ia,qa]=this.state.toMap([0,0],[ba.x,ba.y]);return new w({x:ia,y:qa,spatialReference:this.spatialReference})};Ca.toScreen=function(ba){if(!this.ready)return null;ba=this._project(ba,this.spatialReference);ba=[ba.x,ba.y];this.state.toScreen(ba,ba);return h.createScreenPoint(ba[0],ba[1])};Ca.on=function(ba,
ia,qa,wa){return(qa=this.inputManager&&this.viewEvents.on(ba,ia,qa,wa))?qa:Ta.prototype.on.call(this,ba,ia)};Ca.hasEventListener=function(ba){return Ta.prototype.hasEventListener.call(this,ba)||this.viewEvents.hasHandler(ba)};Ca.whenLayerView=function(ba){return Ta.prototype.whenLayerView.call(this,ba)};Ca.graphicChanged=function(ba){this.graphicsView&&this.graphicsView.graphicUpdateHandler(ba)};Ca.whenReady=function(){return new Promise(ba=>{this.ready?ba(this):this._resolveWhenReady.push(ba)})};
Ca.forceDOMReadyCycle=function(){this.forceReadyCycle()};Ca.getDefaultSpatialReference=function(){var ba,ia,qa;return this.map&&"initialViewProperties"in this.map&&(null==(ba=this.map)?void 0:null==(ia=ba.initialViewProperties)?void 0:ia.spatialReference)||(null==(qa=this.defaultsFromMap)?void 0:qa.spatialReference)||null};Ca.hasLayerViewModule=function(ba){return H.layerView2DImporter.hasLayerViewModule(ba)};Ca.importLayerView=function(ba){return H.layerView2DImporter.importLayerView(ba)};Ca.pixelSizeAt=
function(){return this.ready?this.state.resolution:(Ka.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};Ca.popupHitTest=function(ba){return this.hitTest(ba).then(ia=>({...ia,mapPoint:this.toMap(ba)}))};Ca.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};Ca.validate=function(){let ba=ca.check(this.type);F("safari")&&9>F("safari")&&(ba=new D("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,
detectedVersion:F("safari")}));return d.isSome(ba)?(Ka.warn("#validate()",ba.message),Promise.reject(ba)):pa()};Ca._createAnimation=function(){if(!this.animation||this.animation.done)this.animation=new L;return this.animation};Ca._cancellableGoTo=function(ba,ia,qa){const wa=()=>ba===this._gotoTask,Aa=qa.then(()=>{wa()&&(this.animation=null)}).catch(Ja=>{wa()&&(this.animation=null,ia.done||(ia.stop(),this.frameTask.animationInProgress=!1));throw Ja;}),xa=new Promise(Ja=>Ja(Aa));ia.when().catch(()=>
{wa()&&xa.cancel&&xa.cancel()});return xa};Ca._gotoImmediate=function(ba,ia){const qa=this._gotoTask,wa=this.animation;ba=ba.then(Aa=>{c.throwIfAborted(ia);if(qa!==this._gotoTask)throw new D("view:goto-interrupted","Goto was interrupted");this.viewpoint=wa.target=Aa;wa.finish()});return this._cancellableGoTo(qa,wa,ba)};Ca._flipStationary=function(ba){return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const ia=performance.now()-
this._lastStationaryEventTimestamp;160>ia&&(this._stationaryTimer=this._flipStationary(ia))},ba)};Ca._getDefaultViewpoint=function(){var ba,ia,qa,wa;const {constraints:Aa,initialExtent:xa,map:Ja}=this;if(!Aa)return null;const Ua=Ja&&"initialViewProperties"in Ja&&Ja.initialViewProperties;var Sa=this._get("zoom"),La=this._get("scale"),mb=this._get("center"),cb=this._get("extent"),Xa=this._get("rotation"),hb=this._get("viewpoint");Aa.effectiveLODs?-1!==Sa&&(La=Aa.zoomToScale(Sa)):Sa=-1;let nb=null,lb=
null,ob=0;Sa=hb&&hb.rotation;const J=hb&&hb.targetGeometry;d.isSome(J)&&("extent"===J.type?nb=J:"point"===J.type&&(lb=J,ob=hb.scale));cb=cb||nb||(null==(ba=d.unwrap(null==Ua?void 0:null==(ia=Ua.viewpoint)?void 0:ia.targetGeometry))?void 0:ba.extent)||xa;ba=mb||lb||(null==cb?void 0:cb.center);La=La||ob||(null==Ua?void 0:null==(qa=Ua.viewpoint)?void 0:qa.scale)||cb&&fa.extentToScale(cb,this.size);qa=Xa||Sa||(null==Ua?void 0:null==(wa=Ua.viewpoint)?void 0:wa.rotation)||0;return ba&&La?new q({targetGeometry:ba,
scale:La,rotation:qa}):null};Ca._gotoAnimated=function(ba,ia){const qa=this._gotoTask,wa=this.animation;ba=ba.then(Aa=>{c.throwIfAborted(ia);if(qa!==this._gotoTask)throw new D("view:goto-interrupted","Goto was interrupted");wa.update(Aa);this.animationManager.animate(wa,this.viewpoint,ia);return wa.when().then(()=>{},()=>{})});return this._cancellableGoTo(qa,wa,ba)};Ca._project=function(ba,ia){var qa;const wa=ba&&ba.targetGeometry||ba;if(!ia)return ba;if(!wa)return null;if(ia.imageCoordinateSystem||
null!=(qa=wa.spatialReference)&&qa.imageCoordinateSystem||B.equals(ia,wa.spatialReference))return ba;qa=f.project(wa,ia);if(!qa)throw new D("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:wa,spatialReference:ia});return ba&&"esri.Viewpoint"===ba.declaredClass?(ba.targetGeometry=qa,ba):qa};Ca._resizeHandler=function(ba){if(this.ready){var ia=this.state,qa=this.state.paddedViewState.viewpoint,wa=this.state.paddedViewState.size.concat();
ia.size=[ba.width,ba.height];fa.resize(qa,qa,wa,this.state.paddedViewState.size,this.resizeAlign);qa=this.constraints.constrain(qa,null);this.state.viewpoint=qa}};Ca._startup=function(){var ba;this.timeline.begin("MapView Startup");const ia=this._getDefaultViewpoint(),qa=ia.targetGeometry;try{this._project(ia,this.spatialReference)}catch(xa){var wa;Ka.warn(new b("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",
{center:qa.toJSON(),spatialReference:this.spatialReference,error:xa}));ia.targetGeometry=(null==(wa=this.defaultsFromMap.extent)?void 0:wa.center)||new w({x:0,y:0,spatialReference:this.spatialReference})}null==(ba=this.constraints)?void 0:ba.fit(ia);this._set("state",new Q({padding:this._get("padding"),size:this.size,viewpoint:ia}));this.graphics.owner=this;const Aa=new Ea(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,
debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=Aa;this._magnifierView=new qb;this._magnifierView.magnifier=this.magnifier;ba=new Wa({view:this});this._set("labelManager",ba);ba=new R({view:this});this._set("animationManager",ba);ba=new sb({view:this,animationManager:ba});this._set("mapViewNavigation",ba);this._setupSpatialReferenceDependentProperties();this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),
Aa.on("post-render",()=>this._set("rendering",Aa.renderRequested)),Aa.on("will-render",()=>this._set("rendering",Aa.renderRequested)),Aa.on("webgl-error",xa=>this.fatalError=xa.error),m.watch(()=>this.stationary,xa=>Aa.stationary=xa,m.syncAndInitial),m.watch(()=>this.background,xa=>{Aa.background=xa;this._magnifierView.background=xa},m.syncAndInitial),m.watch(()=>this.magnifier,xa=>this._magnifierView.magnifier=xa,m.syncAndInitial),m.watch(()=>this.renderingOptions,xa=>Aa.renderingOptions=xa,m.syncAndInitial),
m.watch(()=>this.highlightOptions,xa=>Aa.highlightOptions=xa,m.syncAndInitial),m.watch(()=>this.state.id,()=>Aa.state=this.state,m.syncAndInitial)],"map-view");this._updateStageChildren();ba=this._resolveWhenReady;this._resolveWhenReady=[];ba.forEach(xa=>xa(this));this.timeline.end("MapView Startup");this.frameTask&&this.frameTask.start();this._set("ready",!0)};Ca._teardown=function(){this._destroySpatialReferenceDependentProperties();this.handles.remove("map-view");this.mapViewNavigation.destroy();
this._set("mapViewNavigation",null);this.animationManager.destroy();this._set("animationManager",null);this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.frameTask&&this.frameTask.stop();this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);
this._set("ready",!1);const {center:[ba,ia],spatialReference:qa,rotation:wa,scale:Aa}=this.state.paddedViewState,xa=new w({x:ba,y:ia,spatialReference:qa});this._set("viewpoint",null);this._set("extent",null);this._set("center",xa);this._set("zoom",-1);this._set("rotation",wa);this._set("scale",Aa);this._set("spatialReference",qa);this._set("state",null);this.animation=null};Ca._updateStageChildren=function(){this._stage.removeAllChildren();this.rootLayerViews.forEach(ba=>{this._stage.addChild(ba.container)});
this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};Ca._setupSpatialReferenceDependentProperties=function(){var ba=new E(K.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",ba);ba=new Ia({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new kb(ba)});this.frameTask.graphicsView=ba;this._set("graphicsView",ba)};Ca._destroySpatialReferenceDependentProperties=function(){const ba=
this.graphicsView;this._set("graphicsView",null);this.frameTask.graphicsView=null;ba.destroy();this._set("featuresTilingScheme",null)};Ca._spatialReferenceChanged=function(ba){if(this.ready){this.frameTask.stop();for(var ia of this.allLayerViews)ia.processDetach();this._destroySpatialReferenceDependentProperties();ia=this.state.paddedViewState.clone();if(d.isNone(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=ia.scale;else{var qa=ia.viewpoint.clone();qa.scale=
this._scaleBeforeChangingSpatialReference;ia.viewpoint=qa}qa=ia.clone();var [wa,Aa]=ia.center,xa=null;try{xa=this._project(new w({x:wa,y:Aa,spatialReference:ia.spatialReference}),ba)}catch(Ja){f.isLoaded()||Ka.warn(new b("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:xa.toJSON(),spatialReference:ba,error:Ja}))}xa||(xa=new w({x:0,y:0,spatialReference:ba}));xa=fa.centerAt(new q({targetGeometry:new w,scale:0,rotation:0}),ia.viewpoint,xa);
qa.viewpoint=xa;try{const Ja=[ia.size[0]/2,ia.size[1]/2],Ua=[Ja[0]+20,Ja[1]],Sa=ia.toMap([0,0],Ua),{x:La,y:mb}=this._project(new w({x:Sa[0],y:Sa[1],spatialReference:ia.spatialReference}),ba);Sa[0]=La;Sa[1]=mb;qa.toScreen(Sa,Sa);const cb=fa.angleBetween(Ja,Sa,Ua),Xa=Math.hypot(Sa[0]-Ja[0],Sa[1]-Ja[1])/20;!Number.isFinite(Xa)||4<Math.abs(Xa)?(xa.rotation=0,xa.targetGeometry=new w({x:0,y:0,spatialReference:ba})):(xa.scale*=Xa,xa.scale>F("mapview-srswitch-adjust-rotation-scale-threshold")?xa.rotation=
0:xa.rotation+=Number.isFinite(cb)?cb:0)}catch{}this._get("constraints").constrain(xa,null);this._get("state").viewpoint=xa;this._stage.state=this.state;this._setupSpatialReferenceDependentProperties();for(const Ja of this.allLayerViews)Ja.processAttach();this.frameTask.requestFrame();this.frameTask.start();this._updateStageChildren()}};l._createClass(Va,[{key:"graphicsTileStore",get:function(){return new na(this.featuresTilingScheme)}},{key:"initialExtentRequired",get:function(){var ba;const {scale:ia,
constraints:qa,center:wa,viewpoint:Aa,extent:xa}=this;let Ja=this.zoom;if(this.map&&"initialViewProperties"in this.map&&null!=(ba=this.map.initialViewProperties)&&ba.viewpoint||xa)return!1;null!=qa&&qa.effectiveLODs||(Ja=-1);return wa&&(0!==ia||-1!==Ja)||Aa&&d.isSome(Aa.targetGeometry)&&("extent"===Aa.targetGeometry.type||Aa.scale)?!1:!0}},{key:"resourceManager",get:function(){return this._stage.resourceManager}},{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"_defaultsFromMapSettings",
get:function(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}},{key:"_projectionEngineLoaded",get:function(){if(f.isLoaded())return!0;this._pePromise||(this._pePromise=f.load().finally(()=>{this._pePromise=null}));return!1}},{key:"typeSpecificPreconditionsReady",get:function(){var ba=this._getDefaultViewpoint();if(!ba)return!1;const ia=this.spatialReference;ba=d.unwrap(ba.targetGeometry);return f.canProjectWithoutEngine(ba.spatialReference,
ia)?!0:this._projectionEngineLoaded}},{key:"animation",set:function(ba){var ia=this._get("animation");ba!==ia&&(ia&&ia.stop(),!ba||ba.isFulfilled()?this._set("animation",null):(this._set("animation",ba),this.frameTask.animationInProgress=!0,ia=()=>{ba===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame());this.frameTask.animationInProgress=!1},ba.when(ia,ia)))}},{key:"background",get:function(){return this.get("map.initialViewProperties.background")||null},set:function(ba){void 0===
ba?this._clearOverride("background"):this._override("background",ba)}},{key:"center",get:function(){if(!this.ready)return this._get("center");const {center:ba,spatialReference:ia}=this.state.paddedViewState;return new w({x:ba[0],y:ba[1],spatialReference:ia})},set:function(ba){if(null!=ba)if(this.ready){try{var ia=this._project(ba,this.spatialReference)}catch(qa){Ka.error(new D("mapview:invalid-center","could not project the value in the view's spatial reference",{input:ba,error:qa}));return}ba=this.viewpoint;
fa.centerAt(ba,ba,ia);this.viewpoint=ba}else this._set("center",ba),this.notifyChange("initialExtentRequired")}},{key:"constraints",set:function(ba){const ia=this._get("constraints");ia&&(this.handles.remove("map-view-constraints"),ia.destroy());this._set("constraints",ba);ba&&(ba.view=this,this.ready&&(this.state.viewpoint=ba.fit(this.state.paddedViewState.viewpoint)),this.handles.add(m.watch(()=>ba.version,()=>{this.ready&&this.state&&(this.state.viewpoint=ba.fit(this.state.paddedViewState.viewpoint))},
m.sync),"map-view-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(ba){if(null!=ba)if(ba.width&&ba.height)if(this.ready){try{var ia=this._project(ba,this.spatialReference)}catch(qa){Ka.error(new D("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:qa}));return}ba=this.viewpoint;fa.setExtent(ba,ba,ia,this.size,{constraints:this.constraints});this.viewpoint=ba}else this._set("extent",
ba),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired");else Ka.error(new D("mapview:invalid-extent","invalid extent size"))}},{key:"padding",get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(ba){this.ready?(this.state.padding=ba,this._set("padding",this.state.padding)):this._set("padding",ba)}},{key:"resolution",get:function(){return this.state?this.state.resolution:0}},{key:"rotation",
get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(ba){if(!isNaN(ba))if(this.ready){var ia=this.viewpoint;fa.rotateTo(ia,ia,ba);this.viewpoint=ia}else this._set("rotation",ba)}},{key:"scale",get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(ba){if(ba&&!isNaN(ba))if(this.ready){var ia=this.viewpoint;fa.scaleTo(ia,ia,ba);this.viewpoint=ia}else{this._set("scale",ba);this._set("zoom",-1);if(ba=this._get("extent"))this._set("extent",
null),this._set("center",ba.center);this.notifyChange("initialExtentRequired")}}},{key:"stationary",get:function(){return!this.animation&&!this.navigating&&!this.resizing&&!this._stationaryTimer}},{key:"updating",get:function(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some(ba=>!ba.destroyed&&!("layerViews"in ba)&&!0===ba.updating))}},
{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");const ba=this.state.paddedViewState;return ba&&ba.viewpoint.clone()},set:function(ba){if(null!=ba)if(this.ready){var ia;try{var qa=this._project(ba,this.spatialReference);!ba.scale||isNaN(ba.scale)?ia=new D("mapview:invalid-viewpoint",`invalid scale value of ${ba.scale}`):d.isNone(ba.targetGeometry)&&(ia=new D("mapview:invalid-viewpoint","geometry not defined"))}catch(wa){ia=new D("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",
{error:wa})}ia?Ka.error(ia):(this._scaleBeforeChangingSpatialReference=null,ba=new q({targetGeometry:new w,scale:0,rotation:0}),fa.copy(ba,qa),this.constraints.constrain(ba,this.state.paddedViewState.viewpoint),this.state.viewpoint=ba,this.frameTask.requestFrame(),this._set("viewpoint",ba))}else this._set("viewpoint",ba),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")}},{key:"zoom",get:function(){return this.ready?
this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(ba){if(null!=ba)if(this.ready)if(this.constraints.effectiveLODs){var ia=this.viewpoint;fa.scaleTo(ia,ia,this.constraints.zoomToScale(ba));this.viewpoint=ia;this._set("zoom",this.constraints.scaleToZoom(this.scale))}else this._set("zoom",-1);else{this._set("zoom",ba);this._set("scale",0);if(ba=this._get("extent"))this._set("extent",null),this._set("center",ba.center);this.notifyChange("initialExtentRequired")}}},{key:"navigating",
get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}}]);return Va}(P.BreakpointsOwner(T.DOMContainer(X.PopupView(W))));k.__decorate([t.property({readOnly:!0})],p.prototype,"animationManager",void 0);k.__decorate([t.property({constructOnly:!0})],p.prototype,"deactivatedWebGLExtensions",void 0);k.__decorate([t.property({constructOnly:!0})],p.prototype,"debugWebGLExtensions",void 0);k.__decorate([t.property({readOnly:!0})],p.prototype,"featuresTilingScheme",void 0);k.__decorate([t.property({readOnly:!0})],
p.prototype,"fullOpacity",void 0);k.__decorate([t.property({readOnly:!0})],p.prototype,"graphicsTileStore",null);k.__decorate([t.property()],p.prototype,"graphicsView",void 0);k.__decorate([t.property({readOnly:!0})],p.prototype,"state",void 0);k.__decorate([t.property()],p.prototype,"initialExtentRequired",null);k.__decorate([t.property()],p.prototype,"labelManager",void 0);k.__decorate([t.property({readOnly:!0})],p.prototype,"resourceManager",null);k.__decorate([t.property({readOnly:!0})],p.prototype,
"textureManager",null);k.__decorate([t.property({readOnly:!0})],p.prototype,"mapViewNavigation",void 0);k.__decorate([t.property({constructOnly:!0})],p.prototype,"renderCanvas",void 0);k.__decorate([t.property()],p.prototype,"renderingOptions",void 0);k.__decorate([t.property({readOnly:!0})],p.prototype,"rendering",void 0);k.__decorate([t.property({constructOnly:!0})],p.prototype,"supersampleScreenshotsEnabled",void 0);k.__decorate([t.property({readOnly:!0})],p.prototype,"supportsGround",void 0);
k.__decorate([t.property()],p.prototype,"_stationaryTimer",void 0);k.__decorate([t.property()],p.prototype,"_defaultsFromMapSettings",null);k.__decorate([t.property()],p.prototype,"_pePromise",void 0);k.__decorate([t.property({readOnly:!0})],p.prototype,"typeSpecificPreconditionsReady",null);k.__decorate([t.property()],p.prototype,"animation",null);k.__decorate([t.property({type:ka})],p.prototype,"background",null);k.__decorate([t.property({value:null,type:w,dependsOn:["state.id","ready"]})],p.prototype,
"center",null);k.__decorate([t.property({type:N})],p.prototype,"constraints",null);k.__decorate([t.property({value:null,type:I,dependsOn:["state.id","ready"]})],p.prototype,"extent",null);k.__decorate([t.property()],p.prototype,"floors",void 0);k.__decorate([t.property({type:oa})],p.prototype,"highlightOptions",void 0);k.__decorate([t.property({readOnly:!0})],p.prototype,"inputManager",void 0);k.__decorate([t.property()],p.prototype,"map",void 0);k.__decorate([t.property({value:{top:0,right:0,bottom:0,
left:0},cast:Ta=>({top:0,right:0,bottom:0,left:0,...Ta})})],p.prototype,"padding",null);k.__decorate([t.property()],p.prototype,"resizeAlign",void 0);k.__decorate([t.property({readOnly:!0,dependsOn:["state.id"]})],p.prototype,"resolution",null);k.__decorate([t.property({value:0,type:Number,dependsOn:["state.id","ready"]})],p.prototype,"rotation",null);k.__decorate([t.property({value:0,type:Number,dependsOn:["state.id","ready"]})],p.prototype,"scale",null);k.__decorate([t.property({constructOnly:!0})],
p.prototype,"spatialReferenceLocked",void 0);k.__decorate([t.property()],p.prototype,"stationary",null);k.__decorate([t.property({type:sa.Timeline,readOnly:!0})],p.prototype,"timeline",void 0);k.__decorate([t.property({readOnly:!0})],p.prototype,"type",void 0);k.__decorate([t.property({readOnly:!0})],p.prototype,"updating",null);k.__decorate([t.property({value:null,type:q,dependsOn:["state.id","ready"]})],p.prototype,"viewpoint",null);k.__decorate([t.property({value:-1,dependsOn:["state.id"]})],p.prototype,
"zoom",null);k.__decorate([t.property({type:Boolean})],p.prototype,"navigating",null);k.__decorate([t.property({type:ha})],p.prototype,"ui",void 0);return p=k.__decorate([C.subclass("esri.views.MapView")],p)});